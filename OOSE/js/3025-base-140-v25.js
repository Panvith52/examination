function obj(n,t){var r=n.substr(0,1),u,i;if(r=="."||r=="#"||r=="["||t){if(n=document.querySelectorAll(n),n.length==0)return!1;if(n.length==1&&t!=3||t===2)return n[0];for(u=[],i=0;i<n.length;i++)u.push(n[i]);return u}return document.getElementById(n)}function setWait(n,t,i,r){if(t=t?t:document.body,t){if(t[1]){for(var u=0;u<t.length;u++)setWait(n,t[u],i,r);return}t.wait=n;t.setAttribute("wait",n);i?(t.wdelay=i,t.setAttribute("wdelay",n)):n==0&&t.wdelay&&(delete t.wdelay,t.removeAttribute("wdelay"));t.wtmr&&clearTimeout(t.wtmr);n!=1||t.wblock||(r=r?r:12e4,t.wtmr=setTimeout(function(n){return function(){setWait(0,n)}}(t),r))}}function adsenseResize(n,t,i){var u=document.getElementById("content"),r="";if(u){switch(parseInt(u.offsetWidth)){case 768:case 768:r=i?i.split(";"):"";break;case 450:case 480:r=n?n.split(";"):"";break;case 300:case 320:r=t?t.split(";"):""}r&&(google_ad_slot=r[0]+"",google_ad_width=parseInt(r[1]),google_ad_height=parseInt(r[2]))}}function medianetResize(n,t,i){var u=document.getElementById("content"),r="";if(u){switch(parseInt(u.offsetWidth)){case 768:case 768:r=i?i.split(";"):"";break;case 450:case 480:r=n?n.split(";"):"";break;case 300:case 320:r=t?t.split(";"):""}r&&(console.log(r),medianet_crid=r[0]+"",medianet_width=parseInt(r[1]),medianet_height=parseInt(r[2]))}}function contentSize(){var n=document.getElementById("content");if(n){if(parseInt(n.offsetWidth)<450)return 2;if(parseInt(n.offsetWidth)<767)return 1}return 0}function setAttr(n){try{for(var t in n.attributes)(n.attributes[t].nodeName+"").substr(0,2)!="on"&&(n[n.attributes[t].nodeName]=n.attributes[t].nodeValue)}
catch(i){}}function getCookie(n){for(var r=(document.cookie+"").split(";"),i,t=0;t<r.length;t++)if(i=r[t].split("="),i[0].replace(/[\s]/gi,"")==n)return i[1].replace(/[\s]/gi,"");return""}function setCookie(n,t){var i=new Date;i.setFullYear(i.getFullYear()+10);document.cookie=n+"="+t+"; expires="+i.toUTCString()}function aspError(n,t,i){return n!="System.ASP_Error"&&i.indexOf('<font face="Arial" size=2>')!=-1&&i.indexOf("error")!=-1?(i=i.replace(/([\<][\/]*(font|p)( face[\=][\"]Arial[\"] size[\=]2)*[\>]|^[\s]+|[\s]+$)/gi,"").replace(/[\s]+/gi," "),xSend("System.ASP_Error","loc="+encodeURIComponent(document.location)+"&sv="+encodeURIComponent(n)+"&dv="+encodeURIComponent(t)+"&rv="+encodeURIComponent(i),function(){}),i):!1}function xTest(){return(document.location+"").indexOf("//test.")!=-1}function iSend(n,t){var i;if(document.trkV||(document.trkV=[]),!document.trkV[t]){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){i=new XMLHttpRequest}i.open("POST","/code/get_data.asp?d=Inventory.Intel",!1);i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");i.onreadystatechange=function(){document.trkV[t]=!0};i.send("idata="+escape(qRef+"~"+n))}}function xSend(n,t,i){var r,u,f;typeof n=="string"&&(n={s:n,d:t,cb:i});n.stm||(n.stm=(new Date).getTime());document.xtt=0;r=document.location+"";n.xTest=r.indexOf("//test.")!=-1&&!n.noLog&&!document.noLog&&(n.s+"").indexOf("Facebook.Heat_save")==-1&&(n.s+"").indexOf("System.ASP_Error")==-1;u=r.match(/[\&\?]fbuid[\=]([\d]+)/i);u&&u.length&&(n.uid=u[1]);try{n.objXML=new XMLHttpRequest}catch(e){n.objXML=new ActiveXObject("Microsoft.XMLHTTP")}if(n.noencode||(n.s=escape(n.s)),n.tURL=n.furl?n.furl:"/api/"+n.s+(n.uid?"&fbuid="+n.uid:"")+"&tt="+n.stm+(document.utf||n.utf?"&utf=y":""),n.tURL=n.tURL.replace(/[\+]/gi,"%20"),n.fLive&&r.indexOf("//test.")!=-1&&(n.tURL="https://"+(document.location.host+"").replace(/test./gi,"www.")+n.tURL+"&cors=y"),n.log=function(t,i){if(n.xTest&&i){var r,f=/([\"]log[\"][\:][\[\{\""][\s\S]*?[\]\}\""])[\,][\""]elog[\""][\:][\{][\}][\,]/,u=f.exec(i);u&&u[1]&&(r=JSON.parse("{"+u[1]+"}"),r&&(r.raw=u[1],console.log(r),i=i.replace(f,"")));i.substr(0,1)=="{"?(r=JSON.parse(i),r?(console.log(r),console.groupCollapsed(t),console.log(i),console.groupEnd()):console.log(i)):i.length>110?(console.groupCollapsed(t),console.log(i),console.groupEnd()):console.log(t+": "+i)}},n.xTest)try{console.groupEnd();console.groupCollapsed("XURLVR",n.tURL);n.start=performance.now()}catch(e){n.log("XURLVR",n.tURL)}return n.wait&&(f=typeof n.wait=="number",setWait(f?n.wait:1,f?0:n.wait)),n.emsg&&typeof sys=="object"&&sys.manage&&(n.oecb=n.ecb,n.ecb=function(n,t){sys.manage.newMsg(t.emsg+(!n||!n.error?"":": "+n.error),"error ontop");t.oecb&&t.oecb(n,t)}),n.d?(n.log("XPOST",decodeURIComponent(n.d)),n.objXML.open("POST",n.tURL,n.cb?!0:!1),n.objXML.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.objXML.send(n.d)):(n.log("XGET",decodeURIComponent(n.s)),n.objXML.open("GET",n.tURL,n.cb?!0:!1),n.objXML.send(null)),n.catchErr=function(n){return function(){if(document.xtt=(new Date).getTime()-n.stm,n.isErr=n.noErr?0:aspError(n.s,n.d,n.objXML.responseText),n.xTest){n.log("XRESP",n.objXML.responseText);try{console.log("%d, %fms, %fkb",n.objXML.status,Math.round((performance.now()-n.start)*1e3)/1e3,Math.round((n.objXML.responseText+"").length*100/1024)/100);console.groupEnd();n.isErr&&console.error(n.isErr)}catch(t){}}}}(n),n.cb?(n.cb!==!0&&(n.objXML.onreadystatechange=function(n){return function(){if(n.objXML.readyState==4){n.wait&&setWait(0,typeof n.wait=="number"?0:n.wait);n.catchErr();var t=n.objXML.responseText+"";if(n.json){if(t.substr(0,1)=="{")try{t=JSON.parse(t)}catch(i){t={error:"Failed to parse JSON"}}else t={error:t};if(n.ecb&&(t.error||t.error==="")){n.ecb!=1&&n.ecb(t,n);return}}n.cb(t,n)}}}(n)),n):(n.catchErr(),n.objXML.responseText)}function xSave(n,t){var f="",r=2,u=new Array(0),i;for((arguments[r]+"").indexOf(";")!=-1&&(u=arguments[0].split(";"),r++),i=r;i<arguments.length;i++)f+=(i==r?"":"&")+(u[i-r]?u[i-r]:"v"+(i-r+1))+"="+window.encodeURIComponent(arguments[i]);return xSend(n,f,t)}function sTimeTrack(n,t){document.cTime||(document.cTime=[]);document.cTime[n+"-"+t+":s"]=new Date;document.cTime[n+"-"+t+":o"]=setTimeout("eTimeTrack('"+n+"','"+t+"')",121e3)}function eTimeTrack(n,t){if(document.cTime||(document.cTime=[]),document.cTime[n+"-"+t+":s"]){clearTimeout(document.cTime[n+"-"+t+":o"]);var i=(new Date).getTime()-document.cTime[n+"-"+t+":s"].getTime(),r="120+";switch(!0){case i<=1e3:r="0-1";break;case i>1e3&&i<=5e3:r="1-5";break;case i>5e3&&i<=1e4:r="5-10";break;case i>1e4&&i<=3e4:r="10-30";break;case i>3e4&&i<=6e4:r="30-60";break;case i>6e4&&i<=12e4:r="60-120"}gEvent(n+"-TIMER",t,r)}}function gEvent(n,t,i,r,u){if(r=r?r:0,document.gEventBlock)return!1;var a='X_';if(typeof(cUser)=='object'&&cUser.id){a='F_';if(cUser.upgrade&&cUser.upgrade.account){a=(cUser.upgrade.trd?'T_':'P_')}}n=a+n;if((document.location+"").indexOf("test.")!=-1)return console.log("gEvent('"+n+"','"+
t+"','"+i+"',"+r+");",u),u&&u(),!1;u||(u=function(){});try{return ma.trackEvent(n,t,i,r),u(),!0}catch(f){}try{return gtag("event",t,{event_category:n,event_label:i,event_value:r}),u(),!0}catch(f){}try{return ga("send","event",n,t,i,r,{hitCallback:u}),!0}catch(f){}try{return _gaq.push(["_trackEvent",n,t,i,r]),u(),!0}catch(f){}try{return pageTracker._trackEvent(n,t,i,r),u(),!0}catch(f){}u()}function gEventS(n,t,i,r){document.gEventT||(document.gEventT=[]);var u=n+":"+t+":"+i;return document.gEventT[u]||document.gEventBlock?r&&r():(gEvent(n,t,i,0,r),document.gEventT[u]=1),!0}function abTID(n){var i,t,r="abtid",e,u,o,f;for(n&&(t=n,i=n),typeof localStorage=="object"&&(n?localStorage.setItem(r,t):(i=localStorage.getItem(r),i&&(t=i))),typeof sessionStorage=="object"&&(i=sessionStorage.getItem(r),i?t||(i=t):t&&sessionStorage.setItem(r,t)),i=0,e=(document.cookie+"").split(";"),u=0;u<e.length;u++)o=e[u].split("="),o[0].replace(/[\s]/gi,"")==r&&(i=o[1].replace(/[\s]/gi,""));return i?t||(t=i):t&&(f=new Date,f.setFullYear(f.getFullYear()+10),document.cookie=r+"="+t+"; expires="+f.toUTCString()),t}function tEventS(n,t,i,r,u,f){document.gEventT||(document.gEventT=[]);var e=i+":"+r+":"+u;return document.gEventT[e]||document.gEventBlock?f&&f():(tEvent(n,t,i,r,u,0,f),document.gEventT[e]=1),!0}function tEvent(n,t,i,r,u,f,e){gEvent(i,r,u,f,e);var o=abTID();o&&xSend({s:"System.AB_Track_E",noLog:1,d:"tid="+n+"&tv="+t+"&vid="+encodeURIComponent(o)+(i?"&ct="+encodeURIComponent(i):"")+(r?"&ac="+encodeURIComponent(r):"")+(u?"&lb="+encodeURIComponent(u):"")+(f?"&v="+encodeURIComponent(f):""),cb:function(){}})}function qsV(n,t){t=t?t:document.location+
"";try{return new RegExp("[\\?\\&\\#]"+n+"[\\=]([^\\&\\?\\=\\#]+)").exec(t)[1]}catch(i){}return""}function addBodyClass(n,t){var i=document.body.className+"",r=i.replace(new RegExp("[\\s]*"+n,"gi"),""),u=t+""=="undefined"?i.indexOf(n)==-1:t;return document.body.className=r+(u?(r?" ":"")+n:""),u}function setEvents(){var n=document.getElementById("top-menu"),t;n&&(attachE(n,"mouseover",menuHover),attachE(n,"mouseout",menuHover));t=document.getElementById("top-menu-mobile");t&&attachE(t,"change",mobileChange)}function evtByTag(n,t,i,r){for(var f=document.getElementsByTagName(n),u=0;u<f.length;u++)f[u].className==t&&attachE(f[u],i,r)}function attachE(n,t,i,r){var u;if(t!="DOMContentLoaded"||document.addEventListener||(n=window,t="load"),typeof n=="string"&&(n=obj(n)),t instanceof Array){for(u in t)attachE(n,t[u],i,r);return}if(n instanceof Array)for(u in n)attachE(n[u],t,i,r);else{if(!n)return;if(t=="tclick"){attachE(n,"click",i,r);n.touchEvt=function(n){if(document.moveing)return!1;i(n);n.preventDefault()};attachE(n,"touchstart",n.touchEvt);return}r&&(i=function(n,t){return function(i){t(n,i)}}(n,i),r=0);n.addEventListener?n.addEventListener(t,i,!0):n.attachEvent("on"+t,i)}}function dettachE(n,t,i){var
r;if(typeof n=="string"&&(n=obj(n)),t instanceof Array){for(r in t)dettachE(n,t[r],i);return}if(n instanceof Array)for(r in n)dettachE(n[r],t,i);else{if(!n)return;if(t=="tclick"){dettachE(n,"click",i);dettachE(n,"touchstart",n.touchEvt);return}n.attachEvent?n.detachEvent("on"+t,i):n.removeEventListener(t,i,!0)}}function menuHover(n){var t,u,i,r;for(n=n?n:event,t=n.target?n.target:n.srcElement,u=t;t&&((t.className+"").indexOf("top-item")==-1||t.parentNode.id!="top-menu"&&t.parentNode.id!="toolbar");)t=t.parentNode;if(!t||(i=t.getElementsByTagName("SPAN")[0],!i))return!1;i.hasT||(attachE(i,"mouseup",function(){i.style.visibility="hidden";i.style.opacity=0;document.menuV=!1}),i.hasT=1);r=n.type=="mouseover";i.style.visibility=r?"visible":"hidden";i.style.opacity=r?"1":"0";document.menuV=r?i:!1}function menuTouch(n){var t,i;for(n=n?n:event,t=n.target?n.target:n.srcElement;t&&((t.className+"").indexOf("top-item")==-1||t.parentNode.id!="top-menu"&&t.parentNode.id!="toolbar");)t=t.parentNode;if(!t||(i=t.getElementsByTagName("SPAN")[0],!i))return!1;i.style.visibility="visible";i.style.opacity="1";document.menuV=i}function menuTouchE(n){var t,i;document.menuV&&(n=n?n:event,t=n.target?n.target:n.srcElement,t&&t.className&&(t.className+"").indexOf("top-item")!=-1||(n.preventDefault(),n.stopPropagation(),i=document.menuV,i.style.visibility="hidden",i.style.opacity="0",document.menuV=!1))}function mobileChange(n){n=n?n:event;var t=n.target?n.target:n.srcElement;t.value&&t.value!="#"&&(document.location=t.value)}function docWait(n,t){document.body.className=(document.body.className+"").replace(/[\s]*doc[\-]wait([\-][\w\d]+)*/gi,"")+(n?"":" doc-wait"+(t?"-"+t:""))}function objVis(n,t){var u=window.innerHeight?window.innerHeight:document.documentElement?document.documentElement.clientHeight:0,r=window.pageYOffset?window.pageYOffset:Math.max(document.documentElement.scrollTop,document.body.scrollTop),i;for(myScroll&&(r+=0-myScroll.y),i=0;n&&n.tagName.toLowerCase()!="body";)i+=n.offsetTop,n=n.offsetParent;return i>r&&(!t||i<r+u)}function async(n,t,i,r){var e=document;if(e.getElementById(n))return i&&i(),!1;var f=t.indexOf(".css")==-1?"script":"link",u=e.createElement(f),o=e.getElementsByTagName(f)[0];f=="link"&&(u.setAttribute("type","text/css"),u.setAttribute("rel","stylesheet"));u[f=="script"?"src":"href"]=t.substr(0,1)=="/"||t.substr(0,4)=="http"?t:"//"+t;u.id=n;i&&u.addEventListener("load",function(n){i(null,n)},!1);r&&u.addEventListener("error",function(n){r(null,n)},!1);o.parentNode.insertBefore(u,o)}function asyncR(n,t,i){var o,e,r,f,s,i,u;if(n||(n=document.asyncQ,document.asyncQ=!1),!n)return t&&t(),!0;if(document.asyncKNTR||(document.asyncKNTR=0,document.asyncTMR=[]),i||(i=document.asyncKNTR++),n=n.split(";"),o=n.shift(),e=function(){clearTimeout(document.asyncTMR[i]);n.length?asyncR(n.join(";"),t,i):t&&t()},document.asyncTMR[i]=setTimeout(e,1e4),o.indexOf(":")!=-1){r=o.split(":");f=[];switch(r[0].substr(0,1)){case".":if(document.getElementsByClassName)f=document.getElementsByClassName(r[0].substr(1));else for(i=0;i<document.all.length;i++)document.all[i].className==r[0].substr(1)&&f.push(document.all[i]);break;case"<":f=document.getElementsByTagName(r[0].substr(1));break;default:f.push(obj(r[0]))}if(f.length){for(s=!1,i=0;i<f.length;i++)u=f[i],u&&!u.asyncLoaded&&(r[1].substr(0,1)=="/"?(u.style.height=="1px"&&attachE(u,"load",function(){u.style.height=""}),i==f.length-1&&attachE(u,"load",e),u.src=r[1]):xSend(r[1],0,function(n){r[2]&&(n=r[2](n));u.innerHTML=n;e()}),u.asyncLoaded=!0,s=!0);s||e()}else e()}else e();return!0}function asyncA(n,t){document.asyncQ||t||attachE(window,"load",function(){setTimeout("asyncR()",100)});document.asyncQ=(document.asyncQ?document.asyncQ+";":"")+n}function asyncP(n){var f,e,t;if(n&&document.asyncQ)for(f=n.split(";"),e=f.length-1;e>=0;e--){var o=f[e],i=document.asyncQ.split(";"),r="",u="";for(t=0;t<i.length;t++)(i[t]+":").split(":")[0]==o?f.length>1?asyncR(i[t]):r=(r?r+";":"")+i[t]:u=(u?u+";":"")+i[t];document.asyncQ=r+(!r||!u?"":";")+u}return asyncR()}function setAB(n,t,i){setWait(1);async("ab-"+
n.replace(/[^a-zA-Z0-9\-\_]+/gi,""),"/api/System.Set_AB%20"+n+";JS"+(typeof t=="string"?"&cb="+t:"")+(i?"&"+i:"")+"&tp=.js",typeof t=="string"?0:function(n){return function(){setWait(0);n()}}(t))}function loadTextEdit(n,t){for(var r=!1,u=document.getElementsByTagName("textarea"),i=0;i<u.length;i++)(u[i].className+"").indexOf("textedit")!=-1&&(r=!0);r&&async("tiny-mce","/tinymce/tinymce.min.js",function(t){return function(){loadTextEditCB(n,t)}}(t))}function loadTextEditCB(n,t){var i,r;try{tinymce.dom.Event.domLoaded=!0}catch(u){return!1}typeof tinymceNImage=="function"&&tinymceNImage();i=["<table border=1 style='width:100%; border:1px solid rgba(0,0,0,0);'><tr>","<td style='width:50%; box-sizing:border-box; padding-right:1em;'><img src='//cdn.poll-maker.com/8-402816/placeholder.png' width=\"100%\" style='width:100%; -mce-width:100%;'><\/td>","<td valign=top style='width:50%; box-sizing:border-box; padding-left:1em;'><div class='selcontent'>Your text here<\/div><div><\/div><div><\/div><div><\/div><\/td>","<\/tr><\/table>"];i.push(i[1].replace(/right/,"left"));i.push(i[2].replace(/left/,"right"));i.push(i[2].replace(/(padding)-left[\:]([^\;]+)[\;]/gi,"$1:0 $2;"));r={selector:"textarea.textedit",theme:"modern",init_instance_callback:mceEditLoaded,forced_root_block:"div",image_advtab:!0,valid_children:"+body[style]",statusbar:!1,tb:"",table_default_styles:{width:"100%"},template_selected_content_classes:"selcontent",templates:[{title:"Image on Left",description:"Two columns with an image on the left",content:i[0]+i[1]+i[2]+i[3]},{title:"Image on Right",description:"Two columns with an image on the right",content:i[0]+i[5]+i[4]+i[3]},{title:"Two Columns",description:"Two columns with text",content:i[0]+i[5]+i[2]+i[3]},{title:"Three Columns",description:"Three columns with text",content:(i[0]+i[5]+i[6]+i[2]+i[3]).replace(/width[\:]50[\%]/gi,"width:33.333333%")},],extended_valid_elements:"iframe[*]"};t&&(r=copyObj(r,t));sys&&sys.tmsg&&(r.language_url="/nanospell/lang/"+sys.tmsg.code+".js");r.setup=function(n){return function(t){n&&n(t);t.on("SetContent",function(){mceBlankErrT()})}}(r.setup);contentSize()==0?(r.plugins=["advlist autolink link nimage lists charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality template paste textcolor colorpicker noneditable"],r.menubar="edit insert view format table tools",r.toolbar1="bold italic underline | alignleft aligncenter alignright | bullist numlist outdent indent | link image media | forecolor backcolor",r.toolbar2="template | fontselect | fontsizeselect | emoticons | table"+r.tb):(r.plugins=["advlist autolink link nimage lists charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","save table contextmenu directionality template paste textcolor colorpicker"],r.toolbar="bold italic underline | bullist outdent indent | forecolor | alignleft aligncenter alignright | link image media | emoticons"+
r.tb,r.menubar=!1);tinymce.init(r);n&&n()}function mceEditLoaded(){tinyMCE.fcb&&tinyMCE.fcb()}function mceBlankErrT(){clearTimeout(document.mceBET);document.mceBET=setTimeout(mceBlankErr,100)}function mceBlankErr(){for(var t=obj(".mce-edit-area IFRAME",3),i,n=0;n<t.length;n++)if(!t[n].contentDocument.body.id){i=t[n].id.replace(/_ifr/gi,"");try{tinymce.EditorManager.execCommand("mceRemoveEditor",!1,i)}catch(r){}
try{tinymce.EditorManager.execCommand("mceAddEditor",!1,i)}catch(r){}}}function randomTestVersion(n,t,i){var r=getTestVersion(n),u=r;return r||(r=Math.floor(Math.random()*t+1),i&&(u=i[r-1]),setTestVersion(n,u)),u}function getTestVersion(n){return localStorage.getItem(n+"-v")}function setTestVersion(n,t){try{localStorage.setItem(n+"-v",t)}catch(i){}try{_gaq.push(["_setCustomVar",1,n,t,1]);_gaq.push(["_trackEvent","Test",n,t])}catch(i){}}function findPos(n){var t={x:0,y:0,xa:0,ya:0,sx:0,sy:0,sp:document.body},i;if(n.offsetParent)do t.x+=n.offsetLeft-n.scrollLeft,t.xa+=n.offsetLeft,t.y+=n.offsetTop-n.scrollTop,t.ya+=n.offsetTop,(n.scrollHeight>n.offsetHeight||n.scrollWidth>n.offsetWidth)&&(i=getComputedStyle(n,null).overflow,i!="hidden"&&i!="visible"&&(t.sp=n));while(n=n.offsetParent);return t.sp==document.body&&document.body.scrollTop==0&&document.documentElement?(t.scrollx=document.documentElement.scrollLeft,t.scrolly=document.documentElement.scrollTop,t.x-=t.scrollx,t.y-=t.scrolly):t.sp&&(t.scrollx=t.sp.scrollLeft,t.scrolly=t.sp.scrollTop),t}function isIn(n,t){while(t){if(t==n)return!0;t=t.parentNode}return!1}function stopProp(n){try{n.stopPropagation()}catch(n){try{n.cancelBubble=!0}catch(n){}}}function jsRPT(n){document.jsLog=(document.jsLog?document.jsLog+", ":"")+n}function utcDN(n){n||(n=new Date);var t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return 25569+t/864e5}function fromUTCDN(n){var t=new Date;return t.setServerUTC(n),new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}function splitTime(n){n=n?n:0;var t={tt:n,hh:parseInt(n/3600)};return t.mm=parseInt(n/60)-t.hh*60,t.ss=n-t.hh*3600-t.mm*60,t.setV=function(){for(var i,n=0;n<3;n++)i=["hh","mm","ss"][n],t[i+"v"]=(t[i]<10?"0":"")+t[i];t.v=t.hhv+":"+t.mmv+":"+t.ssv},t.setV(),t}function preventDefault(n,t){n.preventDefault?n.preventDefault():n.returnValue=!1;t&&stopProp(n)}function stopProp(n){n.stopPropagation&&n.stopPropagation();n.cancelBubble=!0}function clientXY(n){var r,t,i;return n=n?n:event,r=n.type.indexOf("touch")!=-1,t={x:0,y:0,ox:0,oy:0},r?n.touches.length==0?t=document.pTouch:(t.x=n.touches[0].pageX,t.y=n.touches[0].pageY,i=n.touches[0].target,i.pos&&n.type!="touchstart"||(i.pos=findPos(i)),t.ox=n.touches[0].pageX-i.pos.x-10,t.oy=n.touches[0].pageY-i.pos.y-10,document.pTouch=t):(t.x=n.clientX,t.y=n.clientY,t.ox=n.offsetX?n.offsetX:n.layerX,t.oy=n.offsetY?n.offsetY:n.layerY),t}function checkSort(n,t,i,r){if(n[i]){var u=n[i].n,f=t[u];(!n[r]||r=="s"&&n[r][u]<=f||r=="e"&&n[r][u]>=f)&&(n[r]&&n[r][u]===f?checkSort(n,t,i+1,r):n[r]=t)}}function copyObj(){return copyObjS({noFN:0},arguments)}function copyObjO(n){for(var i=[],t=1;t<arguments.length;t++)i.push(arguments[t]);return copyObjS(n,i)}function copyObjS(n,t,i){var f,o,e,u,r;for(!n.isArr&&n.isArr!==!1&&n.isArr!==0&&t.length>0&&(n.isArr=t[0]&&t[0].push?1:0),f=n.isArr?[]:{},i=i?i:0,o=n.isArr,e=0;e<t.length;e++){u=t[e];for(r in u)if(typeof f[r]!="object"&&typeof u[r]!="object"||!u[r]||u[r].tagName||n[r]===0)switch(typeof u[r]){case"object":n.noObj||!u[r]||n[r]===0||n.noTag&&u[r].tagName||(f[r]=u[r]);break;case"function":n.noFN||n[r]===0||(f[r]=u[r]);break;default:n[r]===0||(f[r]=u[r])}else r in f?u[r]===!1?f[r]=!1:i<100&&(n.isArr=u[r].push&&f[r].push?1:0,f[r]=copyObjS(n,[f[r],u[r]],i+1),n.isArr=o):i<100&&(n.isArr=u[r].push?1:0,f[r]=copyObjS(n,[u[r]],i+1),n.isArr=o)}return f}function cssRule(n,t,i){var u,r;if(t&&n){if(u=obj("sys-css"),u||(u=(document.head||document.body).appendChild(document.createElement("STYLE")),u.id="sys-css"),r=u.sheet,i==-1)try{i=(r.cssRules?r.cssRules:r.rules).length}catch(f){i=0}r.addRule?r.addRule(n,t,i):r.insertRule(n+" {"+t+"}",i)}}function scrollRoot(){for(var u=[document.documentElement,document.body,document.body.parentNode],r=0,t=0,n,i;u.length;)n=u.shift(),i=!1,n&&(i=n.scrollTop),i&&(r=n),i!==0||t||(t=n);return r?r:t?t:document.body.parentNode}
function easeScroll(n,t,i){typeof n!="object"&&(n={ev:n,cb:t,i:i});document.scrollBodyOverride?n.i=document.scrollBodyOverride:n.i||(n.i=scrollRoot());document.scrollT&&clearInterval(document.scrollT.tmr);document.scrollT={i:n.i,start:(new Date).getTime(),sv:n.i.scrollTop,cv:n.i.scrollTop,ev:0,d:300,cb:t};for(var r in n)document.scrollT[r]=n[r];document.scrollT.tmr=setInterval(easeScrollTo,10)}function focusEnd(n){if(typeof n.selectionStart=="number")n.selectionStart=n.selectionEnd=n.value.length;else if(typeof n.createTextRange!="undefined"){n.focus();var t=n.createTextRange();t.collapse(!1);t.select()}}function easeScrollTo(){var n=document.scrollT,t=(new Date).getTime()-n.start;if(n.sv<=n.ev&&n.cv>=n.ev||n.sv>n.ev&&n.cv<=n.ev)return n.i.scrollTop!=n.cv&&(document.easeScrollEvent=1),n.i.scrollTop=n.ev,clearInterval(n.tmr),n.cb&&n.cb(),document.scrollT=!1,!1;n.cv=(n.ev-n.sv)*(t/=n.d)*t*t+n.sv;n.i.scrollTop!=n.cv&&(document.easeScrollEvent=1);n.i.scrollTop=n.cv}var xerr,sysInit,sys;(function(n){"use strict";function t(n,t,i){return n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):void 0}function i(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return!0;return!1}function r(n,t){var i;n.createTextRange?(i=n.createTextRange(),i.move("character",t),i.select()):n.selectionStart&&(n.focus(),n.setSelectionRange(t,t))}function u(n,t){try{return n.type=t,!0}catch(i){return!1}}n.Placeholders={Utils:{addEventListener:t,inArray:i,moveCaret:r,changeType:u}}})(this),function(n){"use strict";function nt(){}function tt(){try{return document.activeElement}catch(n){}}function v(n,t){var i,r,u=!!t&&n.value!==t,e=n.value===n.getAttribute(f);return(u||e)&&"true"===n.getAttribute(h)?(n.removeAttribute(h),n.value=n.value.replace(n.getAttribute(f),""),n.className=n.className.replace(gt,""),r=n.getAttribute(w),parseInt(r,10)>=0&&(n.setAttribute("maxLength",r),n.removeAttribute(w)),i=n.getAttribute(a),i&&(n.type=i),!0):!1}function b(n){var t,r,u=n.getAttribute(f);return""===n.value&&u?(n.setAttribute(h,"true"),n.value=u,n.className+=" "+g,r=n.getAttribute(w),r||(n.setAttribute(w,n.maxLength),n.removeAttribute("maxLength")),t=n.getAttribute(a),t?n.type="text":"password"===n.type&&i.changeType(n,"text")&&n.setAttribute(a,"password"),!0):!1}function it(n,t){var r,s,u,o,h,l,i;if(n&&n.getAttribute(f))t(n);else for(u=n?n.getElementsByTagName("input"):e,o=n?n.getElementsByTagName("textarea"):c,r=u?u.length:0,s=o?o.length:0,i=0,l=r+s;l>i;i++)h=r>i?u[i]:o[i-r],t(h)}function rt(n){it(n,v)}function at(n){it(n,b)}function vt(n){return function(){y&&n.value===n.getAttribute(f)&&"true"===n.getAttribute(h)?i.moveCaret(n,0):v(n)}}function yt(n){return function(){b(n)}}function pt(n){return function(t){return k=n.value,"true"===n.getAttribute(h)&&k===n.getAttribute(f)&&i.inArray(dt,t.keyCode)?(t.preventDefault&&t.preventDefault(),!1):void 0}}function wt(n){return function(){v(n,k);""===n.value&&(n.blur(),i.moveCaret(n,0))}}function bt(n){return function(){n===tt()&&n.value===n.getAttribute(f)&&"true"===n.getAttribute(h)&&i.moveCaret(n,0)}}function kt(n){return function(){rt(n)}}function ut(n){n.form&&(o=n.form,"string"==typeof o&&(o=document.getElementById(o)),o.getAttribute(st)||(i.addEventListener(o,"submit",kt(o)),o.setAttribute(st,"true")));i.addEventListener(n,"focus",vt(n));i.addEventListener(n,"blur",yt(n));y&&(i.addEventListener(n,"keydown",pt(n)),i.addEventListener(n,"keyup",wt(n)),i.addEventListener(n,"click",bt(n)));n.setAttribute(ht,"true");n.setAttribute(f,r);(y||n!==tt())&&b(n)}var e,c,y,ft,k,l,d,r,et,o,t,p,u,ot=["text","search","url","tel","email","password","number","textarea"],dt=[27,33,34,35,36,37,38,39,40,8,46],g="placeholdersjs",gt=RegExp("(?:^|\\s)"+g+"(?!\\S)"),f="data-placeholder-value",h="data-placeholder-active",a="data-placeholder-type",st="data-placeholder-submit",ht="data-placeholder-bound",w="data-placeholder-maxlength",ni=document.createElement("input"),ct=document.getElementsByTagName("head")[0],lt=document.documentElement,s=n.Placeholders,i=s.Utils;if(s.nativeSupport=void 0!==ni.placeholder,!s.nativeSupport){for(e=document.getElementsByTagName("input"),c=document.getElementsByTagName("textarea"),y="false"===lt.getAttribute("data-placeholder-focus"),ft="false"!==lt.getAttribute("data-placeholder-live"),l=document.createElement("style"),l.type="text/css",d=document.createTextNode("."+g+" { color:#ccc; }"),l.styleSheet?l.styleSheet.cssText=d.nodeValue:l.appendChild(d),ct.insertBefore(l,ct.firstChild),u=0,p=e.length+
c.length;p>u;u++)t=e.length>u?e[u]:c[u-e.length],r=t.attributes.placeholder,r&&(r=r.nodeValue,r&&i.inArray(ot,t.type)&&ut(t));et=setInterval(function(){for(u=0,p=e.length+c.length;p>u;u++)t=e.length>u?e[u]:c[u-e.length],r=t.attributes.placeholder,r?(r=r.nodeValue,r&&i.inArray(ot,t.type)&&(t.getAttribute(ht)||ut(t),(r!==t.getAttribute(f)||"password"===t.type&&!t.getAttribute(a))&&("password"===t.type&&!t.getAttribute(a)&&i.changeType(t,"text")&&t.setAttribute(a,"password"),t.value===t.getAttribute(f)&&(t.value=r),t.setAttribute(f,r)))):t.getAttribute(h)&&(v(t),t.removeAttribute(f));ft||clearInterval(et)},100)}i.addEventListener(n,"beforeunload",function(){s.disable()});s.disable=s.nativeSupport?nt:rt;s.enable=s.nativeSupport?nt:at}(this);!document.querySelectorAll&&document.createStyleSheet&&function(n,t){n=document;t=n.createStyleSheet();n.querySelectorAll=function(i,r,u,f,e){for(e=n.all,r=[],i=i.split(","),u=i.length;u--;){for(t.addRule(i[u],"k:v"),f=e.length;f--;)e[f].currentStyle.k&&r.push(e[f]);t.removeRule(0)}return r}}();window.console||(window.console={log:function(){}});xerr={max:0,ehash:{uk:0,ck:0},force:function(n){setTimeout("force"+(n?n:"")+"-error",1)},hash:function(n){var t=0,i;if(!n)return t;for(i=0;i<n.length;i++)t=(t<<5)-t+n.charCodeAt(i),t=t&t;return t},tt:function(){return typeof performance=="object"&&performance.now?performance.now():(new Date).getTime()},track:function(n,t,i,r,u){var h,f,o,s,e,l;if(typeof n=="object")if(t){h={};for(o in n)h[o]=n[o];n=h}else u=n,t=u.filename?u.filename:document.location+"",n=u.message,i=u.lineno,r=u.colno;if(n!="Script error."&&n||i||r){var a=parseInt(qsV("err")),c=0,v={};typeof cUser=="object"&&(v=cUser);f={msg:n,url:t,line:i,col:r,err:u,ekntr:a?a:0,tt:0,h:0,u:v,loc:document.location,browser:{},screen:{}};typeof sys=="object"&&sys.pages?(f.pg=sys.pages.pg,f.pg.dash=1):f.pg={c:document.body?document.body.getAttribute("p"):"",tab:(document.location.hash+"").substr(1)};for(o in navigator)f.browser[o]=navigator[o];for(o in window.screen)
f.screen[o]=window.screen[o];try{f.h=xerr.hash(f.msg+f.line+f.col);s="e"+f.h;e=xerr.ehash;e[s]||(e[s]={k:0,st:xerr.tt()});e.ck=e[s].k++;e.ck==1&&e.uk++;f.uk=e.uk;f.ck=e.ck;f.tt=Math.round(xerr.tt()-e[s].st)}catch(y){}f.swin=f.pg.dash&&f.pg.c!="dashboard"&&(e.uk>1||e.ck>2)?1:0;f.ck>1&&f.tt&&f.tt<Math.pow(f.ck,5)*750&&(c=1);document.body&&!document.body.getAttribute("xerr")&&(c=1);l=function(n){return function(){n.swin&&typeof sys=="object"&&sys.errwin&&sys.errwin.show(1)}}(f);c?l():xSend({s:"System.xerr",d:"err="+encodeURIComponent(JSON.stringify(f)),wait:f.swin,cb:l})}}};attachE(window,"error",xerr.track);attachE(window,"load",function(){var n,i,t;try{if(n=document.querySelectorAll(".ad-slot, .adsbygoogle"),i=0,n){for(t=0;t<n.length;t++)n[t]&&((n[t].outerHTML+"").indexOf("google")!=-1||(n[t].outerHTML+
"").indexOf("ca-pub")!=-1)&&(i=n[t].offsetHeight||i==2?2:1);i==1&&gEventS("Adblock","On")}}catch(e){}});sys.init(0,function(){sys.addTemplates(" \t\t<div class='droplist' att='id,value,search::exists,multi,cols,cust,css::css,width::style-width'><div class='droplist-n' att='placeholder,txt::html,onD,sitm::droplist-sitm'><\/div><div class='droplist-search'><input class='droplist-sinp' value='' spellcheck='false' att='searchholder:placeholder,stype:type,sinp::save,onK::keyup,onSC::change,onSB::blur,onSearch::search'><\/div><div class='droplist-d' att='opt::.droplist-itm,dcss::css'><\/div><\/div> \t\t<div class='droplist-itm' att='value,selected,onMD::mousedown,onC::click,visible,css::css'><span att='txt::html,ev.0:eva,ev.1:evb'><\/span><\/div> \t\t<div class='droplist-sitm' att='value,txt'><div class='droplist-sitm-x' att='selD::click'><\/div><\/div> \t\t\t\t<div class='win-drop win-ic' att='rid,n,css::css,opacity::style,hide,disabled'> \t\t\t<div class='win-ic-l' att='label::html,labelcss::css,lwidth:width:style'><\/div> \t\t\t<div class='win-ic-b' att='boxcss::css,placeholder'><div att='drop::#droplist,items'><\/div><\/div> \t\t<\/div> \t");sys.gSet("droplist",{visible:0,grow:0,blur:0,searchholder:"Search",inp:{type:"text",value:""},stype:"text",prev:{key:"",tmr:0,itm:0},onD:function(n,t,i,r){if(!r.blockShow&&!r.multi&&(r.show(1,1),r.onDrop))
r.onDrop(n,t,i,r)},onK:function(n,t,i,r,u){if(i.search){var f=function(n){return function(){var t=sys[n],i=sys[t.obj(".droplist-d").sysID];setWait(1,t.obj(".droplist-search"));i.more(t.search(i,t.sinp.value),function(n){return function(){setWait(0,sys[n].obj(".droplist-search"))}}(n))}}(r.id);clearTimeout(r.stmr);u==1?f():r.stmr=setTimeout(f,400)}},onSC:function(n,t,i){if(i.cust&&(i.setValue(t.value),i.onChange))i.onChange(i,t.value,i)},onSB:function(n,t,i){i.cust&&i.show(0)},selD:function(n,t,i){var r=t.p.parentNode.p.o,u=sys[r.id+"_opt"],f=u.find(i.value);u.onClear(f,1);r.updateMulti();r.selEvent(f)},preCreate:function(n){var t,i;n.hide=function(n){return function(t){t&&(t.srcElement||t.target).className=="droplist-sinp"||(sys[n].dom.setAttribute("selh",1),sys[n].show(0,1),sys[n].blockShow=1,setTimeout(function(){sys[n].blockShow=0},1))}}(n.id);n.prefill&&setTimeout(function(n){return function(){sys[n].dropLoad()}}(n.id),1);n.pObj.p&&(t=n.pObj.p.className,t&&(t.indexOf("win-drop")!=-1||t.indexOf("tb-drop")!=-1)&&(i=n.pObj.p.o,n.onChange&&!i.onChange&&(i.onChange=n.onChange),n.onChange=function(n,t,i){var r=n.pObj.p.o;if(r.value=t,r.inp||(r.inp={type:"text",value:""}),r.inp.value=t,r.onChange)r.onChange(n,t,i)}));n.multi&&setTimeout(function(n){return function(){sys[n].dropLoad()}}(n.id),1)},dropKeyP:function(n){var i=this,t=i.prev.itm,r=sys[i.id+"_opt"],u,f;if(i.visible&&!i.nokeys&&r&&r.list.find){switch(n.keyCode){case 27:i.show(0);return;case 13:if(t){r.global.onC(n,t.dom,t,r);i.show(0)}return;case 38:case 40:t||(t=r.list[0]);t&&t.dom&&(u=n.keyCode==38?t.dom.previousSibling:t.dom.nextSibling,u&&(t=r.find(u),t&&(i.prev.itm=t)));break;default:if(!n.key||(n.key+"").substr(0,1)=="["){i.prevKey="";return}clearTimeout(i.prev.tmr);i.prev.key+="["+n.key+"]";i.prev.tmr=setTimeout(function(n){return function(){n.prev.key=""}}(i),500);try{f=new RegExp("^"+i.prev.key,"gi")}catch(n){}f&&(t=i.prev.itm=r.list.find(function(n){return function(t){return n.test((t.txt+"").replace(/[\<][^\>]+[\>]/gi,""))}}(f)))}t&&t.dom&&(t.dom.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),t.dom.tabIndex=0,t.dom.focus())}},preShow:function(n,t){var r,u,i,f;n.dom&&t&&(n.dom.removeAttribute("selh"),n.dom.setAttribute("ov",1),setTimeout(function(n){return function(){n.removeAttribute("ov")}}(n.dom),151));t?(attachE(document.body,"click",n.hide),document.body.setAttribute("droplist",n.id),n.search||(n.dropKey=n.dropKeyP.bind(n),attachE(document.body,"keydown",n.dropKey))):(dettachE(document.body,"click",n.hide),document.body.removeAttribute("droplist"),n.search||dettachE(document.body,"keydown",n.dropKey));n.dropLoad();n.search&&!n.nofocus&&setTimeout(function(n){return function(){n.focus()}}(n.sinp),1);(n.cust||n.onCustom)&&(n.sinp.value=n.sel?n.sel.txt:n.value);t&&(r=n.getDropP(),r&&r.setAttribute("drop",1));n.sel&&n.sel.dom&&(u=0,n.opt&&n.opt[0]&&n.opt[0].dom&&(u=findPos(n.opt[0].dom).ya),n.sel.dom.parentNode&&(n.sel.dom.parentNode.scrollTop=findPos(n.sel.dom).ya-u-findPos(n.dom).ya-n.sel.dom.offsetHeight-10));n.fix&&n.dom&&(i=n.obj(".droplist-d"),t?(f=findPos(i),i.style.cssText="position:fixed; top:"+f.y+"px; left:"+(f.x+2)+"px; width:"+i.offsetWidth+"px; z-index:60;"):i.style.cssText="")},postShow:function(n,t){if(!t){var i=n.getDropP();i&&i.removeAttribute("drop")}},getDropP:function(){var t=this,n=t.dom,i;if(t.dropP){for(i=0;i<t.dropP&&n&&n.parentNode;i++)n=n.parentNode;return n}},dropLoad:function(){var n=sys[this.obj(".droplist-d").sysID];n&&(n.multi=this.multi);n&&n.src&&!n.list.length&&(n.wp=this.dom,n.batch=!0,n.more(n.mObj?n.mObj:{clear:!0}))},onCreate:function(n){var t,i;n.dom&&(n.value||n.value==0)&&(t=sys[n.id+"_opt"],t&&t.sel&&(i=n.dom.childNodes[0],i&&(i.innerHTML=t.sel.txt)))},valueSet:function(n,t,i,r){i&&r&&r.dom&&sys[r.dom.parentNode.sysID]&&sys[r.dom.parentNode.sysID].template=="table-row"&&i.setValue(t.value);i.value=t.value},setValue:function(n){var i=sys[this.id+"_opt"],t,u=this.obj(".droplist-n"),r;if(typeof n=="undefined")this.value="",delete this.sel,u.innerHTML="",this.sinp.value="",i.clearAll(),this.sitm=[];else if(this.multi)if(i.src&&!i.list.length)this.value=n;else{var f=n.split(","),e=[],o=[];for(i.clearAll(),r=0;r<f.length;r++)t=i.find(f[r]),t&&(e.push(t.value),o.push({value:t.value,txt:t.txt}),this.sel=t,t.selected||i.setSel(t));this.updateMulti()}else t=i.find(n),t?(this.value=t.value,this.sel=t,t.selected||i.setSel(t)):(this.cust||this.onCustom)&&(this.onCustom&&(n=this.onCustom(this,n)),u.innerHTML=this.value=n,this.inp&&(this.inp.value=n),i.clearSel(),t=n);if(this.onValue)this.onValue(this,this.value,this);return t},updateMulti:function(){var t=sys[this.id+
"_opt"],n;this.value=[];n=this.obj(".droplist-n");n.innerHTML="";this.sitm=t.json(0,function(n){return function(t){if(t.selected)return sys[n].value.push(t.value),{value:t.value,txt:t.txt}}}(this.id)).list;this.inp.value=this.value=this.value.join(",");sys.template(n,"droplist-sitm",this.sitm,this);clearTimeout(this.utmr);this.utmr=setTimeout(function(n,t){return function(){var e=n.offsetHeight,f,r;if(n.style.height="auto",f=n.scrollHeight+1,n.style.height=e+"px",f<e-2||f>e+2){var u=t.obj(".droplist-d"),o=t.startH=t.startH?t.startH:t.dom.offsetHeight-2,s=o/2,i=f;i>s?(i=s,n.style.overflow="auto"):n.style.overflow="";i<41&&(i=41);i!=n.offsetHeight&&(r={nsh:n.offsetHeight,neh:i,bsh:u.offsetHeight,beh:o-i,sh:u.scrollTop,eh:u.scrollTop+(i-n.offsetHeight)},r.d=Math.round((r.eh-r.sh)/30),r.fn=function(t,i){return function(){var r=t.scrollTop+i.d,u=n.offsetHeight+i.d,f=t.offsetHeight-i.d;i.d>0?(r>i.eh&&(r=i.eh),u>i.neh&&(u=i.neh),f<i.beh&&(f=i.beh)):(r<i.eh&&(r=i.eh),u<i.neh&&(u=i.neh),f>i.beh&&(f=i.beh));n.style.height=u+"px";t.style.height=f+"px";t.scrollTop=r;r==i.eh&&u==i.neh&&f==i.beh&&clearInterval(t.stmr)}}(u,r),clearInterval(u.stmr),u.stmr=setInterval(r.fn,10),r.fn())}}}(n,this,t),10)},selEvent:function(n){var t=this,r,u;if(t.pObj.p&&(r=t.pObj.p.o,u=sys.global[r.template],u&&u.valueSet)){for(var f={},i=r.dom,e=i&&i.o&&i.o.inputs?1:0;i&&!/window/.test(i.className+"")&&!e;)i=i.parentNode,e=i&&i.o&&i.o.inputs?1:0;i&&i.o&&(f=i.o);u.valueSet({type:"change"},t,r,f)}if(t.onChange)t.onChange(t,t.multi?t.value:n.value,n);if(t.onValue)t.onValue(t,t.multi?t.value:n.value,n);t.sinp.value&&t.search&&!t.searchNC&&(t.sinp.value="",t.opt.mObj=t.search(t,""),t.opt.clear(1))},clearAll:function(){var n=sys[this.id+"_opt"];n.clearAll()},findTxt:function(n,t){var r,i,u;for(t||(t=function(n,t){return n.txt==t}),r=sys[this.id+"_opt"],i=0;i<r.list.length;i++)if(u=r.list[i],t(u,n))return u;return!1}});sys.gSet("droplist-itm",{idName:"value",visible:1,global:{onC:function(n,t,i,r){r.setSel(i,1);var u=r.p.p.o;u.selEvent(i)}},clearAll:function(){var n,t;for(delete this.sel,n=0;n<this.list.length;n++)if(t=this.list[n],t.selected)this.onClear(t,1)},onClear:function(n,t){(!this.multi||t)&&(delete n.selected,n.dom&&n.dom.removeAttribute("selected"))},onSel:function(n){var t=this.p.p.o;if(this.multi&&n.selected){this.onClear(n,1);t.updateMulti()}else n.selected=1,n.dom&&n.dom.setAttribute("selected",1),this.multi?t.updateMulti():(t.inp.value=t.value=n.value,t.obj(".droplist-n").innerHTML=n.txt)},perItem:function(n){var t=this,u=t.fields,i,f,r;if(u)if(typeof u=="function")n=u(n);else if(n.value=n[u.value],n.txt=n[u.txt],i=u.ev,i)for(typeof i!="object"&&(i=[i]),n.ev=[],f=0;f<i.length;f++)i.push(n[i[f]]);if(n.selected){t.sel=n;t.onSel(n)}else if(t.p&&t.p.p&&(r=t.p.p.o,r&&(!r.multi&&r.value===n.value||r.multi&&(","+r.value+",").indexOf(","+n.value+",")!=-1)))if(r.multi)n.selected=1,n.dom&&n.dom.setAttribute("selected",1);else{t.sel=n;t.onSel(n)}return n},postLoad:function(){var t=this,n;this.multi&&(n=t.p.p.o,n&&n.updateMulti())}});sys.gSet("win-drop",{valueSet:function(n,t,i,r){var e,f,u;if(i.drop&&i.drop.setValue&&(e=i.drop.setValue(t.value)),!i.hide)for(f=0;f<i.drop.opt.length;f++)u=i.drop.opt[f],!e&&u.custom&&(t.value=u.value,i.drop.setValue(t.value)),u.value==t.value&&(u.show||u.hide)&&r.inputs&&r.modInputs(function(n){return function(t){var r=","+(t.hideN?t.hideN:t.n?t.n:t.rid)+",",i=n.disable?"disabled":"hide";t[i]=(","+n.hide+",").indexOf(r)!=-1?1:(","+n.show+",").indexOf(r)!=-1?0:t[i]?t[i]:0;t.dom.setAttribute(i,t[i])}}(u))}});sys.gSet("tb-drop",{valueSet:function(n,t,i,r){if(i.drop&&i.drop.setValue&&(i.drop.setValue(t.value),i.onValue))i.onValue(n,t,i,r)}})});sys.init(0,function(){sys.addTemplates(" \t\t<div class='win-progress win-ic' att='rid,n,css::css,opacity::style,hide,disabled'> \t\t\t<input type=hidden att='rid:id,inp::save,value'> \t\t\t<div class='win-ic-l' att='label::html,labelcss::css,lwidth:width:style'><\/div> \t\t\t<div class='win-ic-b' att='boxcss::css'><div class='win-progress-bar' att='bgcss::css,value,max'><div class='win-progress-bari' att='bcss::css,bar::save'><\/div><\/div> \t\t<\/div> \t");sys.gSet("win-progress",{value:0,max:0,valueSet:function(n,t,i){var r=i.bar,u,f;r&&i.inp&&(u=i.inp.value,u==""?(i.max=0,i.pct=0):i.pct=parseFloat(u)*100/i.max,r.parentNode.setAttribute("value",u?u:0),r.parentNode.setAttribute("max",i.max?i.max:0),u=="c"||u==""?(i.rkntr=0,i.ct=i.st=(new Date).getTime(),i.et=0,setWait(u=="c"?1:0,i.dom),r.style.transitionDuration="0s",r.style.width=i.pct+"%",f=r.offsetWidth,r.style.transitionDuration=""):(i.ct=(new Date).getTime(),i.et=i.ct-i.st,i.rkntr++,i.avgt=i.et/i.rkntr,r.style.transitionDuration=Math.round(i.avgt,100)+"ms"),r.style.width=i.pct+"%",i.pct>=100&&(r.style.transitionDuration="0s",setWait(0,i.dom)))}})});sys.init(0,function(){sys.addTemplates(" \t\t<div class='table' att='id,view,emptymsg'><div class='table-tb' att='tbcn::class,inputs::tb-inp,inputs:vis:exists'><\/div><div class='table-box'><div class='table-th' att='cols::.table-col'><\/div><div class='table-tr' att='rows::.table-row'><\/div><\/div><\/div> \t\t<div class='table-col' att='colC,minw::style-min-width,w::style-width,css::css,hide,v:title,fmt,sort,o:ord,sorted,label'><span att='v::html'><\/span><\/div> \t\t<div class='table-row' att='rid,ev::array-v,cells::table-cell,sel,postR::click,mDown::contextmenu,size::custom-getSize'><\/div> \t\t<div class='table-cell' att='preC::mousedown+touchstart,cellC::click,dblC::dblclick,h,hide,fmt,minw::style-min-width,w::style-width,css::css,cellcn::class,inputs,inputs:hasinp:exists,card,v:hasv:exists'><span att='v::html,ev::array-v'><\/span><\/div> \t");sys.gSet("table",{grow:0,blur:0,onCreate:function(n){var t=sys[n.id+"_rows"],i;t.cols=n.cols;t.wp=n.pObj;i=sys[n.id+"_cols"];i&&(n.sortCol=i.sortCol);t.firstLoad?t.firstLoad():t.more({clear:!0})}});sys.gSet("table-row",{batch:1,global:{preC:function(n,t,i,r){var u=t.p.parentNode.p.o;u.cellClicked=t.o;r.cellC&&r.cellC(n,t,t.o,r)},postR:function(n,t,i,r){if(n){var u=n.target?n.target:n.srcElement;if(!(u&&u.parentNode&&/table[\-](cell|row)/.test(u.parentNode.className+""))){delete i.cellClicked;return}}i.rowC&&i.rowC(n,t,i,r);delete i.cellClicked},mDown:function(n,t,i,r){r.mDown&&r.mDown(n,t,i,r)},getSize:function(n,t,i,r,u){u.sizeRow&&u.sizeRow({},n,r,u)}},onClear:function(n){delete n.sel;n.dom&&n.dom.removeAttribute("sel")},onSel:function(n){n.sel=1;n.dom&&n.dom.setAttribute("sel",1)},perItem:function(n){var t,i,u,r,f;this.preRow&&(n=this.preRow(n));n.cells=[];n.counts={};n.rowC||(n.rowC=function(n,t,i,r){r.rowC&&r.rowC(n,t,i,r)});for(u in this.cols){t=this.cols[u];i={v:"",h:t.v};for(r in t)/^(v|ev|dv|dom|k|rid|update|inputs)$/.test(r)||(i[r]=t[r]);if(t.dv&&(i.v=t.dv),t.cb&&(i.cellC=t.cb),t.nodom&&(i.nodom=t.nodom),t.inputs){i.inputs={};for(u in t.inputs)i.inputs["i"+n[this.idName]+"_"+u]=copyObj(t.inputs[u],{dropP:1});sys.configInputs(i);i.values(n)}if(t.f&&(!t.inputs||t.showvalue)&&(i.v=sys.formatValue(sys.getProp(n,t.f),i.fmt,1,n,this)),t.ev)for(i.ev=[],r=0;r<t.ev.length;r++)i.ev[r]=copyObj(t.ev[r]),i.ev[r].f&&(i.ev[r].v=sys.formatValue(sys.getProp(n,i.ev[r].f),i.ev[r].fmt?i.ev[r].fmt:"",1,n,this));t.ctype&&(n.counts[t.ctype]=n.counts[t.ctype]?n.counts[t.ctype]+1:1);f=t.card?t.card:"l";i.v||i.v===0||(f="h");n.counts[f]=n.counts[f]?n.counts[f]+1:1;n.cells.push(i)}return this.perRow&&(n=this.perRow(n)),n},updateRow:function(n){for(var t,i,r=0;r<n.cells.length;r++)if(t=n.cells[r],t.inputs&&t.values(n),t.f&&(!t.inputs||t.showvalue)&&(t.v=sys.formatValue(sys.getProp(n,t.f),t.fmt?t.fmt:"",0,n,this)),t.ev)for(i=0;i<t.ev.length;i++)t.ev[i].v=sys.formatValue(sys.getProp(n,t.ev[i].f),t.ev[i].fmt?t.ev[i].fmt:"",0,n,this);this.update(n)},hideRow:function(n,t,i){var r=this.find(n),u;r.dom.setAttribute("hide",i?1:0);u=r.dom.offsetWidth;r.dom.setAttribute("hide",i?0:1);t&&(setTimeout(function(n){return function(){n.parentNode.removeChild(n)}}(r.dom),301),r.dom=0,this.remove(r))},showRow:function(n){this.hideRow(n,0,1)},setCell:function(n,t,i){var u=this.getCol(t),r=this.find(n),f;u!=-1&&r&&(sys.setProp(r,t,i),r.cells[u].v=sys.formatValue(i,r.cells[u].fmt?r.cells[u].fmt:""),f=r.cells[u].dom,f&&(f.childNodes[0].innerHTML=r.cells[u].v))},getCol:function(n){for(var t in this.cols)if(this.cols[t].f==n)return t;return-1},setCol:function(n,t,i){var e,u,f,r,s,o;typeof n=="string"&&(n=this.getCol(n));for(e in t)this.cols[n][e]=t[e];for(u=this.cols[n].dom,u&&(u.childNodes[0].innerHTML=t.v,u.setAttribute("title",t.v)),f=0;f<this.list.length;f++)
r=this.list[f],s=i?i(r):sys.getProp(r,t.f),r.cells[n].v=sys.formatValue(s,r.cells[n].fmt?r.cells[n].fmt:""),o=r.cells[n].dom,o&&(o.childNodes[0].innerHTML=r.cells[n].v)}});sys.gSet("table-col",{postLoad:function(n){var i=this.id.replace(/[\_]cols$/,""),r=sys[i],t=sys[i+"_rows"];t&&(t.colLoad&&t.colLoad(n.list),t.cols=n.list);r&&(r.cols=n.list)},perItem:function(n){return n.sorted&&(this.sortCol=n),n.colC||(n.colC=function(n,t,i,r){i=t.o;r=sys[r.id.replace(/[\_]cols$/,"")];r&&r.colC&&r.colC(n,t,i,r)}),n}})});sys.init(0,function(){sys.addTemplates(" \t\t<div class='tb'><div class='tbi' att='groups::tb-group,btns::tb-btn'><\/div><\/div> \t\t<div class='tb-group' att='btns::tb-btn,inputs::tb-btn,rid:n,g,css::css'><\/div> \t\t<div class='tb-btn' att='onC,onDC::dblclick,ch,caption,g,css::css,sel,title'><\/div> \t\t<div class='tb-inp' att='caption,rid:n,g,css::css'><input att='r[rid]:id,onC::change,onK::keyup,onF::focus,onB::blur,icss::css,width::style-width,placeholder,value,type,min,max,inp::save'><span att='btns::exists,btns::tb-btn'><\/span><\/div> \t\t<div class='tb-text' att='caption,rid:n,g,css::css'><textarea att='r[rid]:id,onC::change,onK::keyup,onF::focus,onB::blur,icss::css,width::style-width,placeholder,value,type,inp::save'><\/textarea><span att='btns::exists,btns::tb-btn'><\/span><\/div> \t\t<div class='tb-select' att='caption,rid:n,g,css::css'><select att='r[rid]:id,onC::change,options::win-opt,icss::css,width::style-width,value,inp::save'><\/select><\/div> \t\t<div class='tb-drop' att='caption,rid:n,g,css::css,drop::#droplist,onC::click,title'><\/div> \t\t<div class='tb-drop-font' att='caption,rid:n,g,css::css,drop::#droplist-font,onC::click'><\/div> \t\t<div class='tb-mnu' att='caption,g,onC,css::css'><div att='menu::tb-mnui'><\/div><\/div><div class='tb-mnui' att='caption,onM,ch,sep'><div att='sub::tb-mnui'><\/div><\/div> \t\t<div class='tb-prog' att='caption,onC,g,css::css'><div att='w::style-width,bcss::css'><\/div><\/div> \t\t<div class='tb-check' att='caption,onCH,onC,g,checked:ch:exists,css::css'><input type='checkbox' att='checked,value,width::style,icss::css,name,rid:id,valueSet::change,onCH::change,inp::save'><div class='tb-switch' att='w::style-width,scss::css'><\/div><\/div> \t\t<div class='tb-custom' att='caption,rid:n,g,css::css,items,onC::click,title'><\/div> \t\t<span class='tb-sep' att='rid:n,onC,g,css::css'><\/span> \t");sys.gSet("tb",{preCreate:function(n){for(var t=0;t<n.groups.length;t++)sys.configInputs(n.groups[t])}});sys.gSet("tb-mnui",{onM:function(n,t,i,r){var u=t.p.parentNode.p;u.o.onM(n,u,u.o,r,i)}});sys.gSet("tb-drop",{onC:function(n,t,i){(n.target?n.target==t:n.srcElement)&&i.drop.show(1,1)},valueSet:function(n,t,i,r){if(i.drop.setValue?i.drop.setValue(t.value):i.drop.value=t.value,i.onValue)i.onValue(n,t,i,r)}});sys.gSet("tb-custom",{onC:function(n,t,i){(n.target?n.target==t:n.srcElement)&&i.drop.show(1,1)}});sys.gSet("tb-drop-font",{onC:function(n,t,i){(n.target?n.target==t:n.srcElement)&&i.drop.show(1,1)},valueSet:function(n,t,i,r){if(i.drop.setValue(t.value),i.onValue)i.onValue(n,t,i,r)}});sys.gSet("tb-check",{valueSet:sys.global["win-check"].valueSet,onCH:function(n,t,i,r){i||(i=t.p.o);t.checked=i.checked=n&&n.type=="set"?n.value:!i.checked;i.value=t.checked?1:0;i.inp&&(i.inp.value=i.value,i.inp.checked=i.checked);i.dom&&i.dom.setAttribute("ch",i.checked?1:0);sys.global["tb-check"].valueSet(n,t,i,r)}});sys.gSet("tb-inp",{valueSet:function(n,t,i){i.value=t.value}});sys.gSet("tb-text",{valueSet:function(n,t,i){i.value=t.value}});sys.gSet("tb-select",{valueSet:function(n,t,i){i.value=t.value}});sys.gSet("tb-btn",{valueSet:function(n,t,i){i.dom&&i.dom.setAttribute("ch",t.value?1:0)}})});sys.init(0,function(){sys.addTemplates(" \t\t<div class='win-checklist win-ic' att='rid,n,css::css,opacity::style,hide,disabled'> \t\t\t<input type=hidden att='rid:id,inp::save,value'> \t\t\t<div class='win-checklist-l' att='label::html,labelcss::css,lwidth:width:style'><\/div> \t\t\t<div class='win-checklist-b' att='boxcss::css'><div att='options::.win-checklist-itm'><\/div><\/div> \t\t<\/div> \t\t<div class='win-checklist-itm' att='rid,value,visible'><input att='sysID:name,type,value,selected:checked,onCH::change,inp::save'><span att='txt::html,ev.0:eva,ev.1:evb,onLB::click'><\/span><\/div> \t");sys.gSet("win-checklist-itm",{idName:"value",rtype:"value",nodup:0,dupV:{},global:{onCH:function(n,t,i,r){r.onChange(n,t,i,r)},onLB:function(n,t,i,r){var u=t.previousSibling;u.checked=u.type=="radio"||!u.checked?!0:!1;r.onChange(n,t,i,r)}},onChange:function(n,t,i,r){for(var f=[],s=r.rtype?r.rtype:"value",i,u,o,e=0;e<r.list.length;e++)i=r.list[e],i.inp||(i.inp=i.dom.childNodes[0]),i.selected=i.inp.checked,i.inp.checked&&f.push(i[s]);f=f.join(",");r.value=f;u=r.p.p.o;u&&(u.value=u.inp.value=f,o=u.onChange,o&&o(n,t,i,u))},preLoad:function(n){var f=this,r=f.p.p.o,e,u,t,i,o;if(r.type||(r.type="radio"),f.type=r.type,r.value)for(t=0;t<n.list.length;t++)i=n.list[t],i.selected=r.value===i.value||(","+r.value+",").indexOf(","+i.value+",")>=0;else{for(e=[],t=0;t<n.list.length;t++)i=n.list[t],i.selected&&e.push(i.value);r.value=r.inp.value=e.join(",")}if(f.nodup){for(u=[],t=0;t<n.list.length;t++)i=n.list[t],o=this.hash(i.txt),this.dupV[o]||(this.dupV[o]=i,u.push(i));n.list=u;n.c=u.length}return n},onClearAll:function(){var n=this;n.nodup&&(n.dupV={})},onRemove:function(n){var t=this,i;t.nodup&&(i=t.hash(n.txt),i&&t.dupV[i]&&delete t.dupV[i])},hash:function(n){return(n+"").toLowerCase().replace(/[^a-z0-9]+/gi,"")},perItem:function(n){return n.sysID=this.id,n.type=this.type,n},selItem:function(n){var i=this,t=this.find(n);if(t)i.global.onLB({},t.inp.nextSibling,t,i)}});sys.gSet("win-checklist",{valueSet:function(n,t,i){for(var u=(sys[i.rid+"_options"]?sys[i.rid+"_options"]:i.options).list,f=","+i.inp.value+",",r=0;r<u.length;r++)u[r].inp||(u[r].inp=u[r].dom.childNodes[0]),u[r].inp.checked=u[r].inp.value===i.inp.value||f.indexOf(","+u[r].inp.value+",")>-1}})});sysInit=0;typeof sys=="object"&&typeof sys.initList=="object"&&(sysInit=1);sysInit||(sys={libLoad:0,global:{},preload:{},limits:{},loading:{},svg:{},reset:{},templateK:0,updateK:0,initFN:{},initList:[[{fn:function(){document.sysInit&&document.sysInit()}}]],build:function(){},onCreate:{},createCB:function(n,t){sys.onCreate[n]||(sys.onCreate[n]=[]);sys.onCreate[n].push(t)},init:function(n,t,i){var r=(n?n:"").split(":"),u=r[1]?r[1]:n,f;r=r[1]?parseInt(r[0]):0;r&&!sys.initList[r]&&(sys.initList[r]=[]);document&&"loaded;interactive;complete".indexOf(document.readyState)!=-1?(sys.domReady(),f=0,(!u||obj(u)||sys.initFN["frun-"+n])&&(t(),f=1),n&&(sys.initFN[n]||(sys.initFN[n]=[]),sys.initFN[n].push({fn:t,n:u,s:f}))):sys.initList[r].push({c:n,n:u,fn:t,ord:i?i:0})},domReady:function(n){if(n=!n||typeof n!="number"?0:n,sys.initList[n])for(sys.initList[n].sort(function(n,t){return n.ord==t.ord?0:n.ord<t.ord?-1:1});sys.initList[n].length;){var t=sys.initList[n].shift();if(t&&(!t.n||obj(t.n)||sys.initFN["frun-"+t.c]))try{t.fn()}catch(i){console.log("error",i)}t&&t.c&&(sys.initFN[t.c]||(sys.initFN[t.c]=[]),sys.initFN[t.c].push({fn:t.fn,n:t.n,s:obj(t.c)?1:0}))}},getRCTA:function(n,t){var i=0,r;try{i=localStorage.getItem("rnd"+n)}catch(u){}if(!i){r=Math.floor(Math.random()*t.length);i=t[r];try{localStorage.setItem("rnd"+n,i)}catch(u){}}return i}});sys.sendErr=function(n){if(typeof
window.onerror=="function")window.onerror(n.message,document.location.href,n.line?n.line:n.lineNumber,n.columnNumber,{name:n.name,stack:n.stack})};sys.gSet=function(n,t){if(sys.global[n])for(var i in t)
sys.global[n][i]=t[i];else sys.global[n]=t};sys.global.message={blur:0,top:0,left:0,pObj:"midnav",before:!0,hidePrev:!0,scroll:!0};sys.gSet("date-sel",{blur:3,hidePrev:!0,visible:!1});sys.runInit=function(n,t,i){var u,r;if(!sys.initFN[n]){t==0&&(sys.initFN["frun-"+n]=1);return}for(u=0;u<sys.initFN[n].length;u++)r=sys.initFN[n][u],r&&r.fn&&(typeof t=="undefined"||t==r.s)&&(r.fn(i),r.s=1)};sys.runCreate=function(n,t){var r,i;if(sys.onCreate[n])for(r in sys.onCreate[n])i=sys.onCreate[n][r],i&&i(t)};sys.ensure={files:{},obj:{},fn:{},test:document.location.host.split(".")[0]=="test",add:function(n){var t,i;sys.ensure.files[n.n]||(n.loadQ=[],sys.ensure.files[n.n]=n);for(t in n.obj)if(!sys[t]||sys[t].isEnsure){n.obj[t].ensure=1;for(i in n.obj[t])switch(n.obj[t][i]){case 0:n.obj[t][i]=function(n){return function(){return sys.ensure.files[n].loaded==3}}(n.n);break;case 1:n.obj[t][i]=function(n,t,i){return function(){return sys.ensure.prerun(n,t,i,arguments)}}(t,i,n.n)}n.obj[t].isEnsure=1;sys[t]=n.obj[t]}},fetch:function(n,t){sys.ensure.prerun("","ensure",n,[t])},prerun:function(n,t,i,r){var u=sys.ensure.files[i],t,f,e;if(u.loaded!=3){if(u.loaded==2)console.log("ensure que failed",n,t,i,r);else{if(t=="ensure"&&!r[0])return!1;if((t!="ensure"||typeof r[0]=="function")&&u.loadQ.push({obj:n,fn:t,args:r}),!u.loaded){t=="silent"&&(u.wp=-1);u.wp!==-1&&setWait(1,u.wp);u.loaded=1;t=u.sid+"-base-"+u.id+"-v"+u.v;for(f
in u.tp)e=function(n,t){return function(){sys.ensure.onload(n,t)}}(u.n,f),sys.ensure.test?async(t+"-"+f,"/api/System.async_package_"+f+"%20"+u.n+":I&sid="+u.sid+"&tp=."+f+"&utf=y",e):async(t+"-"+f,"/styles/"+
t+"."+f,e)}}return!1}return t=="ensure"||t=="silent"?(typeof r[0]=="function"&&r[0](),!0):sys[n][t].apply(sys[n],r)},onload:function(n,t){var i=sys.ensure.files[n],u,t,r;i.tp[t]++;u=1;for(t in i.tp)i.tp[t]||(u=0);if(u){for(i.loaded=2,i.wp!==-1&&setWait(0,i.wp);i.loadQ.length;)r=i.loadQ.shift(),r.fn=="ensure"||r.fn=="silent"?typeof r.args[0]=="function"&&r.args[0]():sys[r.obj][r.fn].apply(sys[r.obj],r.args);i.loaded=3}}};sys.limits.c=function(n,t,i){var r=sys.limits[n],u,f,e;if(!r||!r.q)return i&&i(),!0;if(u=r.q,f=typeof cUser=="object"&&cUser.upgrade?cUser.upgrade.account:0,typeof u=="object"&&(u=u[f]),typeof t=="string"&&u!=-1)return xSend(t,0,function(n,t,i){return function(t){sys.limits.c(n,parseFloat(t),i)}}(n,t,i)),!1;if((u||u===0)&&u!=-1&&t>=u){if(!r.block){if(w=sys.limitWin,w&&(w.dom.parentNode.removeChild(w.dom),delete sys.limitWin),w={id:"limitWin",title:"",tp:n,n:!r.pl||u==1?n:r.pl,q:u,cq:t,src:r,acc:["free","Standard","Premium","Platinum","Lite"][f],accv:f,href:"/Pricing?src=limit&tp="+
encodeURIComponent(n),msg:r.msg?r.msg:"Our @acc version is limited to @q @n.<br><a href='@href'>Start my zero obligation trial<\/a> for unlimited questions and responses.",visible:1,buttons:{ok:{caption:"Upgrade"}},okCB:function(){var n=sys.limitWin;n.show(0);setWait(1);top.document.location=n.href},onShow:function(n){n.q=n.q?n.q:1;var t=n.obj(".win-msg");t.innerHTML=(t.innerHTML+"").replace(/[\@][\w\.]+/gi,function(n){return sys.getProp(sys.limitWin,n.substr(1))})}},r.win)for(e in r.win)w[e]=r.win[e];sys.tool&&(w.n=sys.tool.set(w.n),w.msg=sys.tool.set(w.msg));sys.create(w)}return!1}return i&&i(),!0};sys.modText=function(n,t,i){var e,u,f,r;if(!t.re)for(e="",t.re=[],r=0;r<t.f.length;r++)t.re[r]=new RegExp(t.f[r],"gi");for(u in n)if(f=typeof n[u],f=="string"){if(/^([^~]*~(title|txt|label|caption|emptymsg)|(main|tabs)~n)$/i.test((i?i:"")+"~"+u))for(r=0;r<t.f.length;r++)n[u]=n[u].replace(t.re[r],t.r[r])}else f!="object"||n[u].tagName||(n[u]=sys.modText(n[u],t,parseInt(u)+""==u+""?i:u));return n};sys.gSet("win-input",{blur:0,grow:0,valueSet:function(n,t,i,r){if(n&&n.type!="first"&&i.inp&&(i.value=i.inp.value,i.onValue))i.onValue(i,i.value,r)},onCH:function(n,t,i,r){var u=t.p.o;if(u.onChange)u.onChange(u,u.value,i,r)},onF:function(n,t,i){i.autoselect&&t.select()}});sys.gSet("win-textarea",{blur:0,grow:0,valueSet:sys.global["win-input"].valueSet});sys.gSet("win-select",{blur:0,grow:0,valueSet:function(n,t,i,r){var e,f,u;for(n&&i.inp&&(n.type=="first"?(i.value||i.value===""||i.value===0)&&(i.inp.value=i.value):i.value=i.inp.value),e=0,i.dom&&i.dom.parentNode.className=="win-inputgroup-i"&&(e=i.dom.parentNode.parentNode.getAttribute("idx")),f=0;f<i.options.length;f++)u=i.options[f],u.value==t.value&&(u.show||u.hide)&&r.inputs&&r.modInputs(function(n,t){return function(i,r){if(!t||t==r){var f=","+(i.hideN?i.hideN:i.n?i.n:i.rid)+",",u=n.disable?"disabled":"hide";i[u]=(","+n.hide+",").indexOf(f)!=-1?1:(","+n.show+",").indexOf(f)!=-1?0:i[u]?i[u]:0;i.dom&&i.dom.setAttribute(u,i[u])}}}(u,e))}});sys.gSet("win-tselect",{blur:0,grow:0,valueSet:sys.global["win-select"].valueSet});sys.gSet("win-check",{blur:0,grow:0,valueSet:function(n,t,i,r){var e,f,o,u,s;if((n&&n.type!="first"&&i.inp&&(i.value=i.inp.value),i.inp&&(i.checked=i.inp.checked),t.p&&i.inp&&t.p.setAttribute("ch",i.inp.checked?1:0),t.tagName!="INPUT"&&(t=i.inp),i.wset)&&(e=(i.wset.rv?!t.checked:t.checked)?"show":"hide",f=t.disable?"disabled":"hide",i.wset[e])&&(!r.inputs&&i.dom&&i.dom.parentNode.p&&(r=i.dom.parentNode.p.o),r))for(o in r.inputs)u=r.inputs[o],s=","+(u.hideN?u.hideN:u.n?u.n:u.rid)+",",typeof u[f]=="function"&&(u[f]=0),u[f]=(","+i.wset[e]+",").indexOf(s)!=-1?e=="show"?0:1:u[f]?u[f]:0,u.dom.setAttribute(f,u[f])},onLB:function(n,t,i,r){if(i.inp&&(i.inp.checked=!i.inp.checked),sys.global["win-check"].valueSet(n,t,i,r),i.onCH)i.onCH(n,t,i,r)}});sys.gSet("win-inputsub",{blur:0,grow:0,subNew:function(n,t,i,r){for(var e=0,f,u=0;u<i.sub.length;u++)i.sub[u].idx>e&&(e=i.sub[u].idx);if(f=copyObjO({noTag:1},i.subInit),f.idx=e+1,i.sub.push(f),sys.template(i.dom.parentNode,i.template,[i],r),i.onAdd)i.onAdd(i,f)},subDel:function(n,t,i){for(var r=i.dom.parentNode.parentNode.parentNode.o,f=[],e=[],u=0;u<r.sub.length;u++)(r.sub[u].idx!=i.idx?f:e).push(r.sub[u]);if(i.dom.parentNode.removeChild(i.dom),r.sub=f,r.onDel)r.onDel(r,e[0])}});sys.gSet("win-inputgroup",{blur:0,grow:0,subDel:function(n,t,i){for(var r=i.dom.parentNode.parentNode.parentNode.o,f=[],e=[],u=0;u<r.sub.length;u++)(r.sub[u].idx!=i.idx?f:e).push(r.sub[u]);if(i.dom.parentNode.removeChild(i.dom),r.sub=f,r.onDel)r.onDel(r,e[0])}});sys.talert=function(n){n=sys.translate(n);n&&alert(n)};sys.translate=function(n){var r=n+"",i,t;if(sys.tmsg)for(i=0;i<sys.tmsg.list.length;i++){if(t=sys.tmsg.list[i],t.v==n)return t.t;r=r.replace(new RegExp(t.v,"gi"),t.t)}return r};sys.setLang=function(n,t){var u,i,r;for(sys.tmsg?(sys.tmsg.list=sys.tmsg.list.concat(t.list),sys.tmsg.list.sort(function(n,t){var i=n.v.split(" ").length,r=t.v.split(" ").length;return i==r?n.v.length==t.v.length?0:n.v.length<t.v.length?1:-1:i<r?1:-1})):sys.tmsg=t,sys.tmsg.code=n,u=document.querySelectorAll("SPAN[date]"),i=0;i<u.length;i++)r=new Date,r.setTime((parseFloat(u[i].getAttribute("date"))-25569)*864e5),u[i].innerHTML=r.toLocaleDateString?r.toLocaleDateString(n):r.toLocaleString()};sys.reportProcess=function(n){return(n+"       ").substr(0,7)!="Report "||(document.location+"").indexOf("test.")==-1?n:n.replace(/[\n\f\r\s]*Report[\s][\d]+[\:][\s\S]*?[\<]BR[\>][\n\f\r\s]*/g,function(){return""})};sys.wait=function(n,t,i){return(t=t?t:document.body,n&&i?(t.waitT=(new Date).getTime(),t.waitD=i):t.waitD=0,n||!t.waitD)?(t.wait=n,t.setAttribute("wait",n),0):(setTimeout(function(n,t){return function(){n.wait=t;n.setAttribute("wait",t)}}(t,n),t.waitD-((new Date).getTime()-t.waitT)%t.waitD),t.waitD)};sys.send=function(n,t,i,r,u){var f;f=typeof n=="object"?n:{s:n,d:t,sysid:r,utf:1,noLog:u,cb:function(n){return function(t,i){var r=function(n){return function(t){t!=n.s&&sys.send(n)}}(i);t=sys.reportProcess(t);sys.loading[i.sysid]=0;(!sys.postSend||sys.postSend(t,r))&&n&&n!==!0&&n(t)}}(i)};sys.preSend&&sys.preSend(f);r&&(sys.loading[r]=1);xSend(f)};sys.getProp=function(n,t,i,r,u){var o,f,e;if(t.indexOf("[")!=-1)return t.replace(/[\[][\w\d\.\:\-]+[\]]/gi,function(t){var i,r;return t=t.substr(1,t.length-2),i="",t.indexOf(":")!=-1&&(i=t.split(":"),t=i[0],i=i[1]),r=sys.getProp(n,t,0,0,u),r+""=="undefined"&&(r=""),i&&(r=sys.formatValue(r,i)),r});if(t.indexOf(".")!=-1){for(o=t.split("."),f=n,e=0;e<o.length;e++){if(typeof f[o[e]]=="undefined"&&i&&e<o.length-1&&(f[o[e]]={}),typeof f[o[e]]!="object")return i&&(i==2?(f[o[e]]||(f[o[e]]=typeof r=="string"?"":0),f[o[e]]+=r):f[o[e]]=r),f[o[e]];f=f[o[e]]}if(i)i==2?(f||(f=typeof r=="string"?"":0),f+=r):f=r;else if(u&&f+""=="undefined")return sys.getProp(u,t);return f}if(i)i==2&&(n[t]||n[t]===""||n[t]===0)?n[t]+=r:n[t]=r;else if(u&&n[t]+""=="undefined")
return sys.getProp(u,t);return n[t]};sys.setProp=function(n,t,i,r){sys.getProp(n,t,r?r:1,i)};sys.setO=function(n,t,i){var r=sys[n.p.parentNode.sysID],u=r.find(n),f;if(t){for(f in t)u[f]=t[f];r.update(u);i&&r.toStore()}return{o:u,sysO:r}};sys.getO=function(n){return sys.setO(n)};sys.addTemplates=function(n){var i,r,e,u,f,t,o;for(n=n.replace(/(^|[\>])[\s]+[\<]/g,"$1<"),sys.initTemplates(),i=sys.temSel(".template")[0],i||(i=document.createElement("DIV"),i.className="template",document.body.appendChild(i)),r=document.createElement("DIV"),r.innerHTML=n,e={},u=0,f=0;f<r.childNodes.length;f++)t=r.childNodes[f],t.className&&(t=i.appendChild(t.cloneNode(!0)),o=t.className.split(" ")[0],sys.reset[o]=t.cloneNode(!0),e[o]=t,u++);return u?u==1?t:e:!1};sys.modTemplate=function(n,t){var i=0,u,r,f;(sys.initTemplates(),u=function(n){return function(t,i){var r=sys.temSel(".template > ."+n+(t?" "+t:"")+", .template > .ignore ."+n+(t?" "+t:""));return r.length==1&&i!=3||i===2?r[0]:r}}(n),sys.reset[n]?(r=u("",2),r?(f=r.parentNode,f.removeChild(r),i=f.appendChild(sys.reset[n].cloneNode(!0))):i=sys.temSel(".template")[0].appendChild(sys.reset[n].cloneNode(!0)),i.obj=u,i.setAtt=function(n,t){var i=n.getAttribute("att");i=(i?i+",":"")+t;n.setAttribute("att",i)},i=t(i)):i=t(),i)&&(sys.reset[n]=i.cloneNode(!0))};sys.formatValue=function(t,i,r,u,f){var a,l,c,s;i=(i+"").split("-");var e,h=i.shift(),o=i.join("-"),v=t;switch(h){case"px":case"em":case"%":r?t=(t+"").replace(new RegExp(h+"$","i"),""):t+""==parseFloat(t)+""&&(t+=h);break;case"pct":t+="%";break;case"int":case"float":t=h=="int"?parseInt(t):parseFloat(t);t=(o=="sign"&&(t>=0||!t)?"+":0)+(t?t:0);t||o!="blank"||v!=""||(t="");break;case"round":a=Math.pow(10,parseInt(i[0]));t=Math.round(t*a)/a;t=(i[1]=="sign"&&(t>=0||!t)?"+":0)+(t?t:0);break;case"num":t=r?t==null?"":(o?o+" ":"")+(t+"").split("").reverse().join("").replace(/([\d]{3})/g,"$1,").split("").reverse().join("").replace(/^[\,]+/,""):parseFloat((t+"").replace(/[^\d\.\+\-]/gi));break;case"daten":t?(e=new Date,e.setTime(parseFloat(t)),t=e.format(o?o:"full")):t="";break;case"dateau":t?(e=new Date,e.setLocalN(parseFloat(t)),t=e.format(o?o:"full")):t="";break;case"date":case"iso":t?((h=="iso"||o=="iso")&&typeof
t=="string"&&t.indexOf("-")!=-1?e=new Date(t+(t.indexOf("Z")==-1?":00.0Z":"")):(e=new Date,e.setServerUTC(parseFloat(t))),t=e.format(o?o=="iso"?r?"iso":"server":o:"full")):t="";break;case"utc":t?(e=new
Date,e.setServerUTC(parseFloat(t)),t=e.format(o?o:"full")):t="";break;case"exists":t=t?1:0;break;case"nohtml":(t+"").indexOf("<")!=-1&&(e=document.createElement("DIV"),e.innerHTML=t,t=(e.textContent?e.textContent:e.innerText?e.innerText:"").replace(/^[\s]+|[\s]+$/gi,""),delete e);break;case"json":t=!t||t=="{}"?"":JSON.stringify(t,null,String.fromCharCode(9));o=="pre"&&(t='<pre class="table-json">'+
t.replace(/(^[\{\}]$|^[\t])/gmi,"")+"<\/pre>");break;case"custom":l=0;f&&(l=f[o],l&&(t=l(u.dom,"",t,u,f)));break;case"ago":case"shortago":t=parseFloat(t);c=Math.abs(t);s=h=="ago";switch(!0){case c>63072e6:t=Math.floor(t/31536e6);n=s?" year":"y";break;case c>7776e6:t=Math.floor(t/2592e6);n=s?" month":"m";break;case c>864e5:t=Math.floor(t/864e5);n=s?" day":"d";break;case c>36e5:t=Math.floor(t/36e5);n=s?" hr":"h";break;case c>6e4:t=Math.floor(t/6e4);n=s?" min":"mn";break;default:t=Math.floor(t/1e3);n=s?" second":"s"}t=t+""+n+(t==1||!s?"":"s")}return t};sys.configInputs=function(n){if(n.inputs&&(n.callValues=function(n,t,i,r){var f=n.inputs,h={value:{},post:"",inp:[]},v=typeof t=="object",u,y,tt,w,k,d,it,rt,e,s,c,g,o,a,l,b,p,nt;for(u in f)if(typeof f[u]=="object"&&u!="global"&&!/win-label|button/i.test(f[u].template)&&!f[u].nosave)if(y=f[u].n?f[u].n:u,f[u].sub){if(tt=[],t&&(c=sys.getProp(t,y),w=f[u].sub.length,c&&(c.length||c.length===0)))if(c.length<w){for(e=c.length;e<w;e++)k=f[u].sub[e].dom,k&&k.parentNode.removeChild(k);f[u].sub=f[u].sub.slice(0,c.length)}else{for(d=0,e=0;e<w;e++)f[u].sub[e].idx>d&&(d=f[u].sub[e].idx);for(it=d+1,e=w;e<c.length;e++)rt=copyObjO({noTag:1},f[u].subInit),rt.idx=it,it++,f[u].sub.push(rt);sys.template(n.obj(".win-inputsub[rid='"+f[u].rid+"'] .win-inputsub-sub",2),"win-inputgroup",f[u].sub,sys.global["win-inputgroup"])}for(e=0;e<f[u].sub.length;e++)s=t,s&&(c=sys.getProp(s,y)),s&&c&&(s=c,s[u]&&(s=s[u])),typeof s=="object"&&s.push&&(s=s[e]),g=n.callValues(f[u].sub[e],!s||s==1?2:s,i,e+1),tt.push(g.value),h.post+=(h.post?"&":"")+g.post,h.inp=h.inp.concat(g.inp);sys.setProp(h.value,y,tt)}else{o=f[u].inp;o||(o=f[u].inp={type:"",value:""});a="";o.vtype||(o.vtype=o.tagName=="INPUT"?o.type:o.tagName);l=v?sys.getProp(t,y):undefined;b=v&&(l||l===0||l===!1||l==="");b&&(l=typeof f[u].format=="function"?f[u].format({type:"set"},f[u],l,v?t:{}):sys.formatValue(l,f[u].format,1,v?t:{},n));p=f[u].template;p=="tb-check"&&(o.vtype="checkbox",o.p=f[u].dom);switch(o.vtype){case"checkbox":case"radio":b&&(o.checked=!!l);a=o.checked?1:0;break;default:b&&(o.value=l);a=o.value}if(a=typeof f[u].format=="function"?f[u].format({type:"get"},f[u],a,v?t:{}):sys.formatValue(a,f[u].format,0,v?t:{},n),v&&(b||!f[u].hide)&&(/^[\.\#]/.test(p)&&(p=p.substr(1)),nt=sys.global[p],nt&&nt.valueSet&&nt.valueSet({type:"change"},f[u].inp,f[u],n),i&&(f[u].subShow&&f[u].subShow({type:"change"},f[u].inp,f[u],n),f[u].onCH)))
f[u].onCH({type:"change"},f[u].inp,f[u],n);t!=3&&f[u].hide&&typeof f[u].hide!="function"||(sys.setProp(h.value,y,a),h.post+=(h.post?"&":"")+y+(r?r:"")+"="+encodeURIComponent(a),h.inp.push(o))}return t?t==1?h.post:h:h.value},n.callModInputs=function(n,t,i){var f,u,r;if(n.inputs)for(f in n.inputs)if(t(n.inputs[f],i),u=n.inputs[f].sub,u)for(r=0;r<u.length;r++)n.callModInputs(u[r],t,r+1)},n.modInputs=function(n){return function(t){n.callModInputs(n,t)}}(n),n.values=function(n){return function(t,i){return n.callValues(n,t,i)}}(n),n.clearValues=function(n){return function(){n.values(n.defaultValues)}}(n),n.defaultValues=n.values(),n.inpID={},n.inpP=function(n){while(n&&!/(^|[\s])win-ic([\s]|$)/i.test(n.className))n=n.parentNode;return n},n.inputs))for(var t in n.inputs)n.inpID[n.inputs[t].n?n.inputs[t].n:t]=n.inputs[t],!n.inputs[t].subInit&&n.inputs[t].sub&&n.inputs[t].sub[0]&&(n.inputs[t].subInit=copyObj(n.inputs[t].sub[0]))};document.sysSet||(sys.hidePrevF=function(n){var t,r,i;if(sys.blockPrev){sys.blockPrev=0;return}if(t=document.body.getAttribute("blur"),t=="3"||t=="9"||document.body.getAttribute("prev")=="1"||sys.prevCB){for(r=n.target?n.target:n.srcElement,i=r;i.parentNode;){if(i.id==document.sysPrev)return!1;i=i.parentNode}sys.prevCB?(sys.prevCB(),sys.prevCB=!1):(t!="0"&&t!="9"&&stopProp(n),document.sysPrev&&sys[document.sysPrev].visible&&sys[document.sysPrev].show(0,t!="3"&&t!="9"));sys.delHide()}},sys.hideA=!1,sys.addHide=function(){sys.hideA||(sys.hideA=!0,attachE(document.body,"click",sys.hidePrevF))},sys.delHide=function(){sys.hideA&&(sys.hideA=!1,dettachE(document.body,"click",sys.hidePrevF))},document.sysSet=!0);sys.framePost=function(n,t){if(n.framed){var i={};n.dom&&(i.pos=copyObjO({noTag:1,noFN:1},findPos(n.dom)));i.act=n.template;i.evt=t;try{top.window.postMessage(JSON.stringify(i),"*")}catch(r)
{}}};sys.create=function(n){var u,i,r,t;if(n.id&&(!n.id||sys[n.id])){if(n.id){if(n.visible||n.visible===!1||(n.visible=!0),n.reset){for(t in n.reset)sys[n.id][t]=n.reset[t];n.visible&&sys[n.id].show(1);return}for(t in n)typeof n[t]!="object"&&(sys[n.id][t]=n[t]);n=sys[n.id]}}else{u={title:"",msg:"",buttons:{template:"button",ok:{caption:"OK",dCB:"okCB",hide:!0,visible:1,cn:"yes"},no:{caption:"No",dCB:"noCB",hide:!0,visible:0,cn:"no"},cancel:{caption:"Cancel",dCB:"cancelCB",hide:!0,visible:1,cn:"no"}},okCB:function(){return!0},noCB:function(){return!0},cancelCB:function(){return!0},db:!1,dbWait:!0,template:"window",objtype:"ok-cancel",top:"50%",left:"50%",blur:!n.template||n.template=="window"?1:0,blurDelay:0,showDelay:0,showLimit:0,closeLimit:0,visible:!0,grow:!0,hidePrev:!1,scroll:!1,close:0};n.template||(n.template=u.template);sys.global[n.template]&&(u=copyObj(u,sys.global[n.template]));n=copyObj(u,n);for(i in n)typeof n[i]=="function"&&i.substr(0,2)!="on"&&n[i].toString().substr(9,3)=="(o)"&&(n["call"+i]=n[i],n[i]=function(n,t){return function(){n["call"+t](n)}}(n,i));n.show||(n.show=function(n){return function(t,i,r){var u,f;if((n.showLimit||n.closeLimit)&&localStorage){if(n.showCount=parseInt(localStorage.getItem("show-count-"+n.id,0)),n.showCount=n.showCount?n.showCount:0,n.closeCount=parseInt(localStorage.getItem("close-count-"+n.id,0)),n.closeCount=n.closeCount?n.closeCount:0,t&&(n.showLimit&&n.showCount>=n.showLimit||n.closeLimit&&n.closeCount>=n.closeLimit))return!1;u=t?"show":"close";n[u+"Count"]++;localStorage.setItem(u+"-count-"+n.id,n[u+"Count"])}t&&n.hidePrev&&document.sysPrev&&sys[document.sysPrev]&&!r&&!n.noHidePrev&&sys[document.sysPrev].visible&&sys[document.sysPrev].show(0,n.blur?!0:!1);n.preShow&&n.preShow(n,t);try{top.window!=window&&top.window.winFrame&&(n.blur||(n.cn+"").indexOf("mobile")!=-1)&&top.window.postMessage('{"act":"win"'+(n.id?',"id":"'+n.id+'"':"")+',"status":'+(t?t:0)+"}","*")}catch(e){}if(t){if(n.template=="date-sel"&&(f=new Date,n.onShowDate&&(f=n.onShowDate()),n.setDate(f,1)),n.grow==2&&n.resize(),n.onShow)n.onShow(n);n.noHidePrev||setTimeout(function(n){return function(){n.blockHide?document.sysBlockHide=1:(document.sysPrev=n.id,sys.addHide())}}(n),1);n.pObj==document.body&&n.dom&&n.dom.nextSibling&&(n.dom=n.pObj.appendChild(n.dom));n.scroll&&easeScroll(0)}else{if((n.grow==2||n.resized)&&(n.dom.style.maxHeight=""),n.onHide&&n.onHide(n)===!1)return!1;n.blockHide&&(document.sysBlockHide=0);sys.delHide()}sys.framePost(n,{type:"show",status:t});(n.blur||n.grow||n.template=="window")&&document.body.setAttribute(n.id,t);n.visible=t?!0:!1;n.dom&&n.dom.setAttribute("show",t);n.hidePrev&&document.body.setAttribute("prev",t);!n.blur||i||document.sysBlockHide||setTimeout(function(){document.body.setAttribute("blur",t?n.blur:0)},!n.blurDelay||t?0:n.blurDelay);n.blur&&i==9&&!document.sysBlockHide&&document.body.setAttribute("blur",0);n.postShow&&n.postShow(n,t)}}(n),n.hide=function(n){return function(){n.show(0)}}(n),n.expandW=function(n){return function(){n.max=n.max==1?0:1;n.dom.setAttribute("max",n.max);var t=n.dom.offsetWith;n.expandCB&&n.expandCB(n)}}(n));sys.configInputs(n);n.obj=function(n){return function(t,i){return obj((n.dom.id?"#"+n.dom.id:"."+(n.dom.className+"").replace(/ /gi,".")+"[k='"+n.dom.getAttribute("k")+"']")+" "+(!i&&".#[".indexOf(t.charAt(0))==-1?"#":"")+t,i)}}(n);n.dbCheck=function(){return function(n,t){switch((n+" ").substr(0,1)){case"T":console.log("timeout");break;case"Y":t&&t(n);break;default:console.log("Error:",n)}}}(n);n.dbSend=function(n){return function(t){n.db&&n.dbWait||!t||(t(!0),t=!1);n.db&&(n.dbWait&&sys.wait(1),xSend(n.db===!0?"SI.Window "+n.id+";"+n.lastBtn.id:n.db.replace(/[\@]btn/gi,n.lastBtn.id),n.dbSendData?n.dbSendData:"",function(n,t){return function(i){n.dbWait&&sys.wait(0);n.dbCheck(i,t);n.dbCB&&n.dbCB(i)}}(n,t)))}}(n);n.pObj?typeof n.pObj=="string"&&(n.pObj=obj(n.pObj)):n.pObj=document.body;switch(n.objtype){case"none":n.buttons.ok.visible=0;n.buttons.cancel.visible=0;break;case"ok":n.buttons.cancel.visible=0;break;case"yes-no":n.buttons.ok.caption="Yes";n.buttons.no.visible=1;n.buttons.cancel.visible=0;break;case"yes-no-cancel":n.buttons.ok.caption="Yes";n.buttons.no.visible=1}for(r in n.buttons)typeof n.buttons[r]=="object"&&(n.buttons[r].id=r,!n.buttons[r].cb&&n.buttons[r].dCB&&(n.buttons[r].cb=function(n,t){return function(i){if(n.lastBtn=t,t.dom.getAttribute("disabled"))return!1;n.dbSend(function(){n[t.dCB]?n[t.dCB](i,t,n)&&t.hide&&n.show(0):t.hide&&n.show(0)})}}(n,n.buttons[r])));if(n.reset)for(t in n.reset)n[t]=n.reset[t]}if(typeof n.pObj=="string"&&(n.pObj=obj(n.pObj)),sys.runCreate("pre-"+
n.id,n),n.preCreate&&n.preCreate(n),n.pObj&&(n.pObj.sysID=n.id,sys.template(n.pObj,n.template,[n])),n.growCSS=function(n){return function(t){if(!t||n.height+""=="undefined"||n.width+""=="undefined"){n.dom.className+=" size-check";t&&n.height+""!="undefined"||(n.height=n.dom.offsetHeight);t&&n.width+""!="undefined"||(n.width=n.dom.offsetWidth);n.dom.className=n.dom.className.replace(/ size[\-]check/i,"");var i=document.body.offsetHeight}return(n.top?"top:"+n.top+";"+(n.top=="50%"&&n.height?"margin-top:-"+parseInt(n.height/2)+"px;":""):"")+(n.left?"left:"+n.left+";"+(n.left=="50%"&&n.width?"margin-left:-"+
parseInt(n.width/2)+"px;":""):"")+(n.css?n.css:"")}}(n),n.growRules=function(n){return function(){var t=n.growCSS(1),i;cssRule("#"+n.id,t,-1);cssRule("BODY["+n.id+"='1'] #"+n.id,"max-height:"+(n.height+
(n.template=="window"?200:0))+"px;",-1);i=document.body.offsetHeight}}(n),n.resize=function(n){return function(t){if(t&&n.dom.setAttribute("notrans",1),n.dom.style.cssText=n.growCSS()+" max-height:"+n.height+"px;",n.resized=!0,t){var i=n.dom.offsetHeight;n.dom.removeAttribute("notrans")}}}(n),n.resizeM=function(n){return function(){var t=n.dom.childNodes[0].offsetHeight;n.dom.offsetTop+t>window.innerHeight?n.resize():n.dom.style.maxHeight=t+"px"}}(n),n.update=function(n){return function(t){var i;t?t.dom&&(i=t.dom.parentNode):(t=sys[n],i=t.pObj);sys.template(i,t.template,[t],0,1)}}(n.id),!n.first&&n.dom)
{if(n.onCreate)n.onCreate(n);sys.runCreate(n.id,n);n.inputs&&n.modInputs(function(t){if(t.inp){var i=sys.global[t.template];i&&i.valueSet&&i.valueSet({type:"first"},t.inp,t,n)}});n.id&&n.grow&&n.grow!=2&&n.growRules();n.first=!0}n.id&&(sys[n.id]=n);n.visible&&(n.showDelay?setTimeout(function(n){return function(){n.show(1)}}(n),n.showDelay):n.show(1))};sys.sortChar=function(n){return typeof n!="string"?n:n==""?"@blank@":n?n.replace(/[\,\;\|\:]/gi,function(n){switch(n){case",":return"@SRT-C@";case":":return"@SRT-L@";case";":return"@SRT-S@";case"|":return"@SRT-P@"}}):""};sys.keepDOM=function(n,t){t.dom&&(n.dom=t.dom);for(var i in n)t[i]&&typeof t[i]=="object"&&!t[i].tagName&&(n[i]=sys.keepDOM(n[i],t[i]));return n};sys.timeK=function(n,t,i){if(sys.timeObj||(sys.timeObj={}),sys.timeObj[n]&&i!=1||(sys.timeObj[n]={}),sys.timeObj[n][t]){var r=performance.now()-sys.timeObj[n][t];(r>10||i)&&console.log(n,t,r,!i||i==1?"":i)}sys.timeObj[n][t]=performance.now()};sys.timeA=function(n,t,i){if(sys.timeObjA||(sys.timeObjA={}),sys.timeObjA[n]&&i!=1||(sys.timeObjA[n]={},i!=1)){var r=sys.timeObjA[n][t];r||(r=sys.timeObjA[n][t]={c:0,s:performance.now()});r.e=performance.now();r.c++;i==2&&r.e-r.s>1&&console.log(t,Math.round((r.e-r.s)*100)/100,"AVG: "+Math.round((r.e-r.s)*100/r.c)/100)}};sys.defaultList={list:[],ids:{},idName:"rid",sID:0,eID:0,q:!1,mq:0,cq:0,loadK:0,first:!0,filter:"",sort:{}};sys.createlist=function(n){var
t=n.id,e,o,f,r,u,i,s;if(sys[t]=copyObj(sys.defaultList),sys[t].storeID="sys-"+t,sys.global[n.template])for(i in sys.global[n.template])sys[t][i]=sys.global[n.template][i];for(i in n)if(i=="global"&&sys[t][i])for(e in n[i])sys[t][i][e]=n[i][e];else sys[t][i]=n[i];o=0;for(i in n.sort)o++;if(o||(sys[t].sort[sys[t].idName]=[{n:sys[t].idName,db:"List_ID",o:1}]),sys[t].load=function(n){return function(t){var i=sys[n],u,e,l,o,f,c,h,r,s;if(i.loadK++,t&&t.list){if(t.clear&&i.p&&(i.doClear?i.doClear(i):i.p.innerHTML="",i.clear()),i.preLoad&&(t=i.preLoad(t)),u=i.filter,!u&&i.sortD&&(u=i.sortD),i.storeSort&&(u==""||!i.sort[u])&&(u=document.body.getAttribute(n+"-sort")),u!=""&&i.sort[u]||(u="listid"),!i.sort[u]){u="";for(r in i.sort)u==""&&(u=r)}e=i.sort[u];l=[];for(r in t.list)o=t.list[r][i.idName],f=i.ids[o],t.recount&&(t.list[r][t.recount]=1),i.perItem&&(t.list[r]=i.perItem(t.list[r],f,t),f||(o=t.list[r][i.idName],f=i.ids[o])),f||f==0?(t.list[r]=sys.keepDOM(t.list[r],i.list[f]),t.merge?(i.list[f]=copyObjO({noFN:0,noTag:0},i.list[f],t.list[r]),t.list[r].update||(t.list[r].update=!0)):i.list[f]=t.list[r],t.count&&!t.recount&&(i.list[f][t.count]=(i.list[f][t.count]?i.list[f][t.count]:2)+1),t.force&&(t.list[r].update||(t.list[r].update=!0))):(t.list[r].p||t.list[r].nosort||t.nosort||(checkSort(e,t.list[r],0,"s"),checkSort(e,t.list[r],0,"e")),t.before&&(t.list[r].before=!0),t.count&&(t.list[r][t.count]=1),i.q&&e.o==0&&e.s[e.n]===t.list[r][e.n]&&(t.list[r].before=!0),i.q&&e.o==1&&e.e[e.n]===t.list[r][e.n]&&(t.list[r].before=!0),i.list.push(t.list[r]),i.ids[o]=i.list.length-1);if(t.c&&i.p){for(i.q=t.c,i.mq=0,i.cq=0,i.vq=0,r=0;r<i.list.length;r++)i.list[r].p?i.cq++:i.mq++,i.dom&&i.vq++;if(i.showLimit&&i.mq>i.showLimit){for(c=[],h=function(n){return function(t,r){for(var u=0;u<n.length;u++)if(n[u]==t)return;r&&!t.nodom&&n.length<i.showLimit?n.push(t):t.dom&&!t.p&&(console.log(t),t.dom.parentNode.removeChild(t.dom),t.dom=!1)}}(c),r=0;r<t.list.length;r++)t.list[r].before&&h(t.list[r],!0);for(r=0;r<i.list.length;r++)h(i.list[r],!0);for(r=0;r<t.list.length;r++)t.list[r].before||h(t.list[r],!0);sys.template(i.p,i.template,c,i.global,t.noDocFrag)}else i.batch?(s=document.createElement("DIV"),s=i.p.appendChild(s),s.sysID=i.p.sysID,sys.template(s,i.template,t.list,i.global,t.noDocFrag)):sys.template(i.p,i.template,t.list,i.global,t.noDocFrag)}i.first=!1;i.p&&i.p.setAttribute("hm",i.q!=!1&&i.q!=0&&i.q<=i.mq?0:1);i.pcount&&i.pcount.setAttribute("q",i.q?i.q:0);i.postLoad&&i.postLoad(t)}}}(t),sys[t].sortN=function(n){return function(){var i=sys[n],t;return i.sortD?i.sortD:(t="",i.storeSort&&(t=document.body.getAttribute(n+"-sort")),i.storeSort&&!t&&localStorage&&(t=localStorage.getItem(n+"-sort-"+(document.location+"?#").split("?")[0].split("#")[0])),t)}}(t),sys[t].prevSort=[],sys[t].localSort=function(n){return function(t,i){var r=sys[n],f,u,o,e;if(t&&(r.prevSort=r.prevSort.join(";").replace(new RegExp("(^|[\\;])"+t+"[\\=][\\d]+","gi"),"").replace(/^[\;]+/,"").split(";"),r.prevSort.unshift(t+"="+(i?i:0))),r.list.sort(function(n){return function(t,i){var u,f,r,s,e,o;if(t.fixed)return i.fixed?0:t.fixed;if(i.fixed)return t.fixed?0:0-i.fixed;for(u=0,f=0;f==0&&n.prevSort[u];)r=n.prevSort[u].split("="),s=parseInt(r[1]),r=r[0],e=sys.getProp(t,r),o=sys.getProp(i,r),f=e==o?0:s?e<o?1:-1:e<o?-1:1,u++;return f}}(r)),r.batch)for(f=document.createDocumentFragment();r.p.firstChild;)f.appendChild(r.p.firstChild);for(u=0;u<r.list.length;u++)o=r.list[u].dom,r.ids[r.list[u][r.idName]]=u,o&&(o.parentNode==r.p||r.batch)&&(e=r.p,r.batch&&(e=f.childNodes[parseInt(u/100)],e||(e=f.appendChild(document.createElement("DIV")))),e.appendChild(o));if(r.batch)while(f.firstChild)r.p.appendChild(f.firstChild)}}(t),sys[t].reOrder=function(n){return function(t){var r,i=sys[n],f=[],u;for(ids={},t||(t=i.p.childNodes),u=0;u<t.length;u++)r=i.find(t[u]),r[i.idName]&&(ids[r[i.idName]]=f.length,f.push(r));for(u=0;u<i.list.length;u++)r=i.list[u],ids[r[i.idName]]||ids[r[i.idName]]===0||(ids[r[i.idName]]=f.length,f.push(r));i.list=f;i.ids=ids}}(t),sys[t].valueList=function(n){return function(t,i,r){var u=sys[n];return u.txt="",i=i?i:u.idName,r=r?r:".",u.list.forEach(function(n,t,i){return function(r){var f=!0;f=n?n(r):!0;f&&(u.txt+=r[t]+""=="undefined"?"":(u.txt?i:"")+r[t])}}(t,i,r)),u.txt}}(t),sys[t].clear=function(n){return function(t){var i=sys[n];i.list=[];i.ids={};i.sID=0;i.eID=0;i.q=!1;i.first=!0;t&&i.p&&(i.p.innerHTML="");i.pcount&&i.pcount.setAttribute("q",0);i.onClearAll&&i.onClearAll()}}(t),sys[t].remove=function(n){return function(t){var i=sys[n],r=i.find(t),f,u;if(r){for(r.dom&&r.dom.parentNode&&r.dom.parentNode.removeChild(r.dom),f=i.ids[r[i.idName]],i.list.splice(f,1),i.ids=[],u=0;u<i.list.length;u++)i.ids[i.list[u][i.idName]]=u;if(i.pcount&&i.pcount.setAttribute("q",i.list.length),i.onRemove)i.onRemove(r)}}}(t),sys[t].removeQ=function(n){return function(t){for(var r=sys[n],e=document.querySelectorAll("."+r.template+"[k]"+t),u=[],f,i=0;i<e.length;i++)f=e[i].getAttribute(r.idName),f&&u.push(f);for(i=0;i<u.length;i++)r.remove(u[i])}}(t),sys[t].nextID=function(n){return function(t,i){var e=sys[n],u=0,r,f;t||(t=e.list);i||(i=e.idName);for(r in t)t[r]&&t[r][i]&&(f=parseInt(t[r][i]),f>u&&(u=f));return u+1}}(t),sys[t].json=function(n){return function(t,i,r){for(var o=sys[n],h=[],c,f,e,s,u=0;u<o.list.length;u++)c=o.list[u],f=copyObjO({noFN:r?0:1,noTag:1},c),i&&(f=i(f)),f&&h.push(f);if(e={},t){if(t=="all"&&(t=o),typeof t=="string")for(s=t.split(","),t={},u=0;u<s.length;u++)t[s[u]]=o[s[u]];e=copyObjO({noFN:r?0:1,noTag:1},t)}return e.c=h.length,e.list=h,e}}(t),sys[t].fromStore=function(n){return function(t){var u=sys[n],i=0,e=localStorage.getItem(u.storeID),f,r;if(e&&(i=JSON.parse(e)),f=sys.blocksave,i){for(r in i)r!="c"&&r!="list"&&(u[r]=i[r]);return sys.blocksave=!0,u.load(i),sys.blocksave=f,!0}return t&&(sys.blocksave=!0,u.load(t),sys.blocksave=f),!1}}(t),sys[t].toStore=function(n){return function(t,i){var r=sys[n];(t=t?t:r.storeExt,i=i?i:r.storeFN,sys.blocksave)||localStorage.setItem(r.storeID,JSON.stringify(r.json(t,i)))}}(t),sys[t].more=function(n){return function(t,i){var r,u,o,e,h,c;if(sys[n].moreTMR&&clearTimeout(sys[n].moreTMR),r=sys[n],!sys.loading[n]){u={force:!1,clear:!1,sort:!1,fresh:!0,tfilter:!1,filter:!1,filterF:!1,fids:!1,before:!1,delay:0,extra:!1};for(e in t)u[e]=t[e];if(!u.force&&!u.clear&&r.q!=!1&&r.q!=0&&r.q<=r.mq)return i&&i(),!1;if(u.delay)return sys[n].moreTMR=setTimeout(function(n,t,i){return function(){t.delay=0;sys[n].more(t,i)}}(n,t,i),u.delay),!1;if(u.extra!==!1&&(r.extra=u.extra),u.tfilter&&(u.filter=u.tfilter),u.filter!==!1&&(r.filter=u.filter,r.filterF=u.filterF,r.sortfilter=!1),i&&(r.cb=i),u.clear&&(r.clear(),u.fresh=!1),o=u.sort!==!1?u.sort:r.sortN(),r.wp||(r.wp=r.p),!r.sort[o]){o="";for(e in r.sort)o==""&&(o=e)}var f=r.sort[o],s="",l=[],a=[],v=[];if(f){for(u.filter==!1&&(f[0]&&f[0].filter?(r.sortfilter=!0,r.filter=f[0].filter,r.filterF=f[0].filterF):r.sortfilter&&(r.filter="",r.filterF=!1,r.sortfilter=!1)),u.clear&&(f.s=!1,f.e=!1),e=0;e<f.length;e++)l.push(f[e].db+":"+f[e].o),a.push(f.s?sys.sortChar(f.s[f[e].n]):""),v.push(u.fresh?"X":f.e?sys.sortChar(f.e[f[e].n]):"");s=[l.join(","),a.join(","),v.join(",")].join(";");r.storeSort&&document.body.setAttribute(n+"-sort",o);r.sortD&&(r.sortD=o);r.storeSort&&u.sort!=!1&&localStorage&&localStorage.setItem(n+"-sort-"+(document.location+"?#").split("?")[0].split("#")[0],o)}if(r.src)if(typeof r.src=="function"){h=r.src(s,r.filter,u);for(c in u)h[c]=u[c];sys[n].load(h);r.pcount&&r.pcount.setAttribute("q",r.q?r.q:0);r.cb&&(r.cb.call(r),r.cb=!1)}else sys.wait(u.clear?1:2,r.wp),r.preSend&&r.preSend(r,u),u.sdata="",u.fids&&(u.sdata+=(u.sdata?"&":"")+"fids="+u.fids.join(",")),r.extra&&(u.sdata+=(u.sdata?"&":"")+r.extra),sys.send(r.src+" "+s+"|"+r.filter+(r.filterF?";"+r.filterF():"")+(r.sendE?"|"+r.sendE:""),u.sdata?u.sdata:!1,function(n,t){return function(i){var
u=!1,f;if(i.substr(0,1)=="{"){try{u=JSON.parse(i)}catch(e){sys.sendErr(e)}for(f in t)u[f]=t[f];t.clear&&(u.force=!0,u.clear=!0);t.fids&&(u.nosort=!0);sys[n].load(u)}else t.clear&&i==""&&(r.doClear?r.doClear(r):r.p.innerHTML="");r.pcount&&r.pcount.setAttribute("q",r.q?r.q:0);t.tfilter&&(t.filter=!1,r.filter="");r.cb&&(r.cb.call(r,u),r.cb=!1);setTimeout(function(n){return function(){sys.wait(0,n)}}(r.wp),100)}}(n,u),n,r.log||u.log?0:1)}}}(t),sys[t].update=function(n){return function(t){for(var u=sys[n],r=t instanceof Array?t:[t],i=0;i<r.length;i++)r[i]&&!r[i].update&&(r[i].update=!0);sys.template(u.p,u.template,r,u.global,1)}}(t),sys[t].find=function(n){return function(t,i,r){var u=sys[n],e,f;return!t&&t!==0&&t!==""?!1:(typeof t=="object"&&(t.tagName?(e=t.getAttribute(u.idName),e?t=e:t.p&&(t=t.p.getAttribute(u.idName))):t=t[u.idName]),f=u.ids[t],(f||f===0)&&u.list[f]?(i&&i(u.list[f],u),u.list[f]):(r&&r(u),!1))}}(t),sys[t].obj=function(n){return function(t,i,r){var u=sys[n],f=u.find(t);return obj("."+u.template+
"[k]["+u.idName+"='"+f[u.idName]+"'] "+i,r)}}(t),sys[t].clearSel=function(n){return function(){if(sys[n].sel){if(sys[n].onClear)sys[n].onClear(sys[n].sel);sys[n].sel=!1}}}(t),sys[t].setSel=function(n)
{return function(t,i,r){if((typeof t=="object"?i=sys[n].ids[t[sys[n].idName]]:(t||t===0)&&(i=sys[n].ids[t]),sys[n].beforeSel&&!sys[n].beforeSel(!i&&i!==0?!1:sys[n].list[i],t,i))||(r||sys[n].clearSel(),!i&&i!==0))return!1;if(sys[n].sel=sys[n].list[i],sys[n].sel&&sys[n].onSel)sys[n].onSel(sys[n].sel);return sys[n].sel}}(t),sys[t].preCreate&&sys[t].preCreate(sys[t]),typeof sys[t].p=="string"&&(f=obj(sys[t].p),f||(f=document.createElement("DIV"),f.id=sys[t].p,p=document.body.appendChild(f)),sys[t].p=f),sys[t].p&&(sys[t].p.sysID=t),sys[t].attach)for(r=sys[t].attach.split(","),i=0;i<r.length;i++)r[i]=r[i].split(":"),u=r[i][0]=="window"?window:obj(r[i][0]),u||(u=obj(t+"-"+r[i][0])),r[i][1]||(r[i][1]=r[i][0]),u&&sys[t][r[i][1]]&&(u.sysO=sys[t],attachE(u,r[i][2]?r[i][2].split("+"):"click",function(n,t,i){return function(r){sys[n][t](r,i)}}(t,r[i][1]?r[i][1]:r[i][0],u)));if(sys[t].onCreate)sys[t].onCreate(sys[t]);if(sys.onCreate[t])for(i in sys.onCreate[t])s=sys.onCreate[t][i],s&&s(sys[t]);sys.preload[t]&&sys[t].load(sys.preload[t])};sys.clearDom=function(n){for(var t in n)typeof n[t]=="object"&&(t=="dom"||n[t].tagName?(n[t].parentNode&&n[t].parentNode.removeChild(n[t]),delete n[t]):sys.clearDom(n[t]))};sys.initTemplates=function(){if(document.templateFN&&!sys.tloaded){for(var n=0;n<document.templateFN.length;n++)document.templateFN[n]();sys.tloaded=!0}};sys.querySel=function(n){if(sys.docF){var
t=sys.docF.querySelectorAll(n);if(t&&t.length)return t}return document.querySelectorAll(n)};sys.temSel=function(n){if(sys.temF){var t=sys.temF.querySelectorAll(n);if(t&&t.length)return t}return document.querySelectorAll(n)};sys.template=function(n,t,i,r,u,f){var ct,ei,oi,s,l,gt,pt,ii,ri,ui,ft,rt,nt,fi,k,et,wt,bt,ot,o,e,w,c,d,ci,vt,st,tt,ut,v,li,kt;sys.updateK++;r||(r=sys.global[t]);r||(r={});var ai=new
Date,dt=[],ht,at={n:0,e:0,u:0,h:0};for(sys.docF||(sys.docF=document.createDocumentFragment()),sys.initTemplates(),ct=n.parentNode,(r&&r.noDocFrag||n.noDocFrag||u||i.length<2&&t!=="table-cell")&&(ct=null),ct&&n!=document.body?(oi=n.nextSibling,ei=sys.docF,n=ei.appendChild(n)):ct=null,o=0;o<i.length;o++){if(i[o]&&!i[o].nodom&&(!i[o].dom||r.force||i[o].force||r.update||i[o].update)){var lt=!1,g=0,yt=0,v=i[o].dom;if(i[o].dom&&!document.body.contains(i[o].dom)&&(yt=1),i[o].dom&&(r.update||i[o].update))g=i[o].dom.getAttribute("k"),lt=!0,at.u++;else{if(sys.templateK++,g=sys.templateK,at.n++,ht=sys.temSel(".template > ."+t+", .template > .ignore ."+t)[0],!ht){console.log("F:",t,i);console.trace();sys.updateK--;return}v=ht.cloneNode(!0);v.setAttribute("k",sys.templateK);v.o=i[o];i[o].k=sys.templateK;yt=2}for(yt&&(i[o].p&&typeof i[o].p=="string"&&((i[o].p+"   ").substr(0,3)=="top"&&(i[o].p="[k='"+i[0].k+"']"+i[o].p.substr(3)),i[o].pDom=sys.querySel("."+t+i[o].p)[0]),i[o].pDom?i[o].dom=!r.before&&!i[o].before?i[o].pDom.appendChild(v):i[o].pDom.insertBefore(v,i[o].pDom.childNodes[0]):(n||console.log("Parent not found for",t),i[o].dom=!r.before&&!i[o].before?n.appendChild(v):n.insertBefore(v,n.childNodes[0]?n.childNodes[0]:null),i[o].dom.pDom=n),yt==2&&(i[o].cn&&(i[o].dom.className+=" "+i[o].cn),i[o].css&&(i[o].dom.getAttribute("att")+"").indexOf(":css")==-1&&(i[o].dom.style.cssText=i[o].css))),s=sys.querySel("."+t+"[k='"+g+"'] [data], ."+t+"[k='"+g+"'][data], ."+t+"[k='"+g+"'] [att], ."+t+"[k='"+g+"'][att]"),e=0;e<s.length;e++)if(l=s[e].getAttribute("data"),gt=!1,l||(l=s[e].getAttribute("att"),gt=!0),lt&&s[e].getAttribute("tk")!=g&&(l=!1),l)for(pt=l.split(","),w=0;w<pt.length;w++){l=pt[w];var y=l,a="",h="",b=1;l.indexOf(":")!=-1&&(l=(l+":::").split(":"),y=l[1]?l[1]:l[0],a=l[2],l=l[0]);h=sys.getProp(i[o],l,0,0,r);h+""=="undefined"&&(h="",b=0);var si="."+t+"[k='"+g+"']",hi="[att='"+pt.join(",")+"'][tk='"+g+"']",ni=si+" "+hi+","+si+hi,it=typeof h,ti=(a+"-").split("-")[0];(it=="object"||it=="function")&&(a=="exists"||a=="save"||a=="proplist"||ti=="custom")&&(it="");it=="object"&&(h instanceof Array&&typeof h[0]!="object"&&(it="array"),(h==null||ti=="array")&&(it=""),l=="value"&&i[o].format&&(it=""));switch(it){case"function":lt||(ii=ni.replace(/k[\=][\'][\d]+[\']/gi,""),s[e].eSel&&s[e].eSel[l+"-"+(a?a:"tclick")+"-"+ii]||(s[e].eSel||(s[e].eSel={}),s[e].p=sys.querySel("."+t+"[k='"+g+"']")[0],rt=n.sysID,!rt&&i[o].sysID&&(rt=i[o].sysID),attachE(s[e],(a?a:"tclick").split("+"),function(n,t,i){return function(r){var u=i?sys[i]:null;t.f(r,n,!u||!u.find?t.o:u.find(t.o),u)}}(s[e],{n:l,s:ni,f:h,t:a?a:"tclick",o:i[o]},rt)),s[e].eSel[l+"-"+(a?a:"tclick")+"-"+ii]=!0));break;case"object":ri=l;a&&(a.substr(0,1)=="#"||a.substr(0,1)==".")&&(ui={},ui[l]=h,h=ui,ri="");dt.push({c:h,s:ni,itm:ri,t:h.template?h.template:a?a:l,g:h.global,pidx:o,pid:i[o].id?i[o].id:i[o].rid});break;default:switch(ti){case"style":ft=a.split("-");ft.shift();ft=ft.join("-");ft||(ft=y);ft!="background-image"||(h+"").indexOf("//")==-1||/url/i.test(h+"")||(h="URL("+h+")");s[e].style[ft]=h;b=0;break;case"css":(h!=""||b)&&(s[e].style.cssText=h);b=0;break;case"class":h&&(s[e].className+=" "+h);b=0;break;case"check":y="CHECKED";parseInt(h)?h=!0:b=!1;break;case"custom":nt=r[a.split("-")[1]];rt=n.sysID;!rt&&i[o].sysID&&(rt=i[o].sysID);nt&&nt(s[e],y,h,i[o],sys[rt],o);b=!1;y="";break;case"function":nt=sys.getProp(sys,a.split("-")[1]);nt&&nt(s[e],y,h,i[o]);b=!1;y="";break;case"value":h=l;break;case"array":if(b=0,nt=a.split("-"),typeof h=="object"&&h.length)for(k=0;k<h.length;k++)s[e].setAttribute(y+(k>25?k-25:String.fromCharCode(97+k)),nt[1]?h[k][nt[1]]:h[k]);break;case"proplist":if(b=0,typeof h=="object")for(fi in h)s[e].setAttribute((!y||y==l?"":y)+fi,h[fi]);break;case"translate":if(sys.tmsg)switch(y){case"html":s[e].innerHTML=sys.translate(s[e].innerHTML);break;default:s[e].setAttribute(y,sys.translate(s[e].getAttribute(y)))}b=!1;y="";break;case"save":sys.setProp(i[o],y,s[e]);b=0;break;default:h=sys.formatValue(h,a,1)}if((a=="html"||a=="value"||y=="label"||y=="caption")&&(it=="array"&&(h=h.join(", ")),sys.tmsg&&typeof h=="string"&&(h=sys.translate(h))),gt&&a.indexOf("html")==-1)if((s[e].tagName=="SELECT"||s[e].tagName=="INPUT"||s[e].tagName=="TEXTAREA"||s[e].contentEditable+""=="true")&&y=="value"){if(s[e].value=h,s[e].tagName=="SELECT")for(k=0;k<s[e].childNodes.length;k++)if(et=s[e].childNodes[k],et.tagName=="OPTION")et.value+""==h+""?et.setAttribute("SELECTED",1):et.removeAttribute("SELECTED");else if(et.tagName=="OPTGROUP")for(wt=0;wt<et.childNodes.length;wt++)bt=et.childNodes[wt],bt.value+""==h+""?bt.setAttribute("SELECTED",1):bt.removeAttribute("SELECTED");s[e].contentEditable+""=="true"&&(s[e].innerHTML=h)}else b&&(y=="checked"&&s[e].tagName=="INPUT"&&s[e].type=="checkbox"?s[e].checked=h:s[e].setAttribute(y,h));else s[e].innerHTML=h;s[e].tagName=="OPTION"&&y=="value"&&(ot=s[e].parentNode,ot.tagName=="OPTGROUP"&&(ot=ot.parentNode),ot.p.o&&ot.p.o.value&&h+""==ot.p.o.value+""&&(ot.value=h))}s[e].setAttribute("tk",g);s[e].p||(s[e].p=s[e])}}i[o].nodom?at.h++:at.e++}for(o=0;o<dt.length;o++){var p=dt[o],vi=sys.templateK,s=sys.querySel(p.s);for(e=0;e<s.length;e++)for(w in p.c)if(c=p.c[w],typeof c=="object"&&w!="global")
{d=c.template?c.template:p.t;s[e].sysID=n.sysID;ci=s[e].getAttribute("k");vt=s[e].getAttribute("tk");s[e].p=ci==vt?s[e]:sys.querySel("."+t+"[k='"+vt+"']")[0];switch(d.substr(0,1)){case"#":c.template=d.substr(1);c.id||(tt=p.pid?p.pid:n.sysID,c.id=(parseInt(tt)+""==tt?"x"+tt+"_"+vt:tt)+"_"+(c.rid?c.rid:w));c.pObj=s[e];sys[c.id]&&delete sys[c.id];sys.create(c);/^[\w\d]+$/.test(p.itm)?i[p.pidx][p.itm][w]=sys[c.id]:p.itm==""&&(i[p.pidx][w]=sys[c.id]);break;case".":st=[];c.push&&(c={list:c});c.list&&(st=c.list,delete c.list);c.template=d.substr(1);c.id||(tt=p.pid?p.pid:n.sysID,c.id=(parseInt(tt)+""==tt?"x"+tt+"_"+vt:tt)+"_"+(c.rid?c.rid:w));c.p=s[e];sys[c.id]&&delete sys[c.id];sys.createlist(c);sys[c.id].p.parentNode!=s[e].parentNode&&s[e].parentNode.appendChild(sys[c.id].p);st&&(st.push?st.length&&sys[c.id].load({c:st.length,list:st}):sys[c.id].load(st));p.itm==""&&i[p.pidx][w]&&!i[p.pidx][w].push&&(i[p.pidx][w]=sys[c.id]);break;default:lt&&!c.update&&(c.update=lt);c.rid||(c.rid=w);ut={};for(v in
p.c)ut[v]=p.c[v];if(r)for(v in r)ut[v]=r[v];if(sys[d]&&sys[d].global)for(v in sys[d].global)ut[v]=sys[d].global[v];if(sys.global&&sys.global[d])for(v in sys.global[d])ut[v]=sys.global[d][v];if(p.g)for(v in p.g)ut[v]=p.g[v];ut.isChild=!0;f=f?f:0;f<25?li=sys.template(s[e],d,[c],ut,"child",f+1):console.log("chain "+f,s[e],d,[c],ut)}}}return ct&&ct.insertBefore(n,oi),sys.reset[t]&&ht&&!lt&&!r.isChild&&(kt=ht.parentNode,kt&&(kt.removeChild(ht),kt.appendChild(sys.reset[t].cloneNode(!0)))),sys.updateK--,at};!1&&console.log("upload");sys.upload={upCont:[],upCancel:[],smallKntr:0,init:function(n,t){var u,i,r,e,f;for(sys.upload.o=n,sys.upload.fkntr=0,n.snd=[],n.validK=0,n.invalidK=0,sys.upload.upCont=[],sys.upload.upCancel=[],sys.upload.smallKntr=0,u=n.files?n.files:t?t.dataTransfer.files||t.target.files:n.finp.files,i=0;i<u.length;i++)r=u[i],e=new FileReader,(n.checkCB?n.checkCB(r,r.name,i,u.length):1)?(n.snd[i]=1,n.validK++,f=n.prog,typeof f=="function"&&(f=f(r,r.name,n.validK-1,u.length)),sys.upload.startP(f)):(n.snd[i]=0,n.invalidK++),e.onload=function(n,t,i){return function(r){var u=sys.upload.o,f=u.prev,o,e,s;if(f&&(!u.img&&f.id&&(u.img=obj("#"+f.id+" img")),u.img||(u.img=f.appendChild(document.createElement("IMG"))),u.img.tagName=="IMG"?(u.img.style.opacity=0,u.img.style.left="",u.img.src=r.target.result,o=parseInt(window.getComputedStyle(u.img).width),o>f.offsetWidth&&(u.img.style.left=-(o-
f.offsetWidth)/2+"px"),u.img.style.opacity=1):u.img.style.backgroundImage="URL("+r.target.result+")"),sys.upload.smallKntr++,sys.upload.upCont.push(function(n,t,i){return function(){var s,u,v,o,f;if(i.maxMB&&n.size/1048576>i.maxMB)return s=sys.upload.o.prog,s&&(s.style.opacity=0),sys.create({id:"imgtoomb",template:"window",title:"Image too Large",msg:"Your image is larger than the maximum allowed "+
i.maxMB+" MB, please resize or select a different image",visible:1,objtype:"ok"}),!1;if(!sys.upload.o.noresize&&n.size/1048576>4){u=document.createElement("IMG");u.style.cssText="position:absolute; top:-2000px; left:-2000px; opacity:0; max-width:800px; max-height:800px; pointer-events:none;";document.body.appendChild(u);u.src=r.target.result;var w=document.body.offsetLeft,c=getComputedStyle(u),l=parseInt(c.width),a=parseInt(c.height),e=document.createElement("canvas");if(e.width=l,e.height=a,v=e.getContext("2d"),v.drawImage(u,0,0,l,a),u.src=e.toDataURL(),o=u.src.match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/),o){var y=atob(o[3]),p=new ArrayBuffer(y.length),h=new Uint8Array(p);for(f=0;f<h.length;f++)h[f]=y.charCodeAt(f);u.blob=new Blob([h],{type:o[1]});i.sysCB=function(n){return function(){document.body.removeChild(n)}}(u)}sys.upload.start(u.blob&&u.blob.size<n.size?u.blob:n,n.name,t,i.validK)}else i.sysCB=!1,sys.upload.start(n,n.name,t,i.validK)}}(n,i,u)),sys.upload.upCancel.push(function(n){return function(){sys.upload.cancel(n)}}(i)),u.min||u.max)e=document.body.appendChild(document.createElement("IMG")),e.style.cssText="position:absolute; left:-10000px; top:-10000px; pointer-events:none; visibility:hidden;",attachE(e,"load",function(n){return function(){var s=window.getComputedStyle(n),f=parseInt(s.width),e=parseInt(s.height),i,r,o;if(document.body.removeChild(n),n=0,i="",u.snd[t]&&(u.min&&(f<u.min.w||e<u.min.h)&&(i="Small"),u.max&&(f>u.max.w||e>u.max.h)&&(i="Large")),i)r=sys.upload.o.prog,r&&(r.style.opacity=0),sys.create({id:"imgtoo"+i,template:"window",title:i+" Image",msg:sys.upload.smallKntr+" of your images "+(sys.upload.smallKntr==1?"is "+f+" wide by "+e+" high<br><br>which is":"are<br><br>")+" "+(i=="Small"?"smaller":"larger")+" than the recommended dimensions of "+(i=="Small"?u.min.w+" width by "+u.min.h:u.max.w+" width by "+u.max.h)+" height",visible:1,buttons:{ok:{caption:"Upload Anyway",visible:!u.min.force}},okCB:function(){var t=sys.upload.o.prog,n;for(t&&(t.style.opacity=1);sys.upload.upCont.length;)n=sys.upload.upCont.shift(),n&&n();return!0},cancelCB:function(){while(sys.upload.upCancel.length){var n=sys.upload.upCancel.shift();n&&n()}return!0}});else for(r=sys.upload.o.prog,r&&(r.style.opacity=1);sys.upload.upCont.length;)o=sys.upload.upCont.shift(),o&&o()}}(e)),e.src=r.target.result;else for(f=sys.upload.o.prog,f&&(f.style.opacity=1);sys.upload.upCont.length;)s=sys.upload.upCont.shift(),s&&s()}}(r,i,n.validK-1,u.length),e.readAsDataURL(r)},startP:function(n)
{var t;sys.upload.o.waitFN?sys.upload.o.waitFN(1):document.body.setAttribute("upload",1);n||(n=sys.upload.o.prog);n.bar=n.childNodes[0];n.p=0;n.setAttribute("p","Processing File...");setTrans(n.bar,"none");n.bar.style.width="0%";n.style.opacity=1;t=document.body.offsetWidth;setTrans(n.bar,"width 60s linear");n.bar.style.width="100%";t=document.body.offsetWidth;n.st=(new Date).getTime();n.initial=!0;n.setTL=function(n){return function(t){var i=window.getComputedStyle(n.bar).width,f=parseInt(window.getComputedStyle(n).width),r,u;r=i.indexOf("%")!=-1?parseFloat((i+"%").split("%")[0]):Math.round(parseFloat(i)*100/f);setTrans(n.bar,"none");n.bar.style.width=r+"%";u=document.body.offsetWidth;setTrans(n.bar,"width "+t+"ms linear");n.bar.style.width="100%";u=document.body.offsetWidth}}(n);n.tmr=setInterval(function(n){return function(){var i=window.getComputedStyle(n.bar).width,r=parseInt(window.getComputedStyle(n).width),t;t=i.indexOf("%")!=-1?Math.round(parseFloat((i+"%").split("%")[0])):Math.round(parseFloat(i)*100/r);t>75&&t<90&&n.initial&&n.setTL(12e4);t>90&&n.initial&&n.setTL(24e4);t>0&&(n.p=t,n.setAttribute("p",t+"%"))}}(n),100)},cancel:function(n){try{sys.upload.xhr.abort()}catch(i){}try{sys.upload.byurl.objXML.abort()}catch(i){}var t=sys.upload.o.prog;typeof t=="function"&&(t=t(0,"",n,0));clearInterval(t.tmr);sys.upload.o.waitFN?sys.upload.o.waitFN(0):document.body.setAttribute("upload",0);sys.upload.o&&sys.upload.o.cancelCB&&sys.upload.o.cancelCB()},start:function(n,t,i,r){var u=sys.upload.o.prog,f,o,e;typeof u=="function"&&(u=u(n,t,i,r));u.setAttribute("p","0%");u.setTL(6e4);u.st=(new Date).getTime();f=new XMLHttpRequest;sys.upload.xhr=f;o=sys.upload.o.postTo.replace(/[\@]fname/gi,encodeURIComponent(t.replace(/[\+]/gi," ")));u.edata&&(o=o.replace(/[\@]edata/gi,u.edata));e="/api/"+o;sys.upload.o&&sys.upload.o.fLive&&(document.location+"").indexOf("test.")!=-1&&(e="//"+(document.location.host+"").replace(/test[\.]/gi,"www.")+e+(e.indexOf("?")==-1?"&":"&")+"cors=y");f.open("POST",e,!0);f.onload=function(n,t,i,r){return function(){var o=f.responseText,u=sys.upload.o,s,e,h;u.finp.value="";sys.upload.fkntr++;o.substr(0,1)=="Y"?u.postCB&&u.postCB(o,i,r,r>1&&sys.upload.fkntr==r?2:sys.upload.fkntr==1?0:1):u.errCB?u.errCB(o):(s="Unable to upload image",o.substr(0,2)=="E:"?s=o.substr(2):console.log(o),sys.create({id:"err-msg",msg:s,visible:!0}));e=u.prog;typeof e=="function"&&(e=e(n,t,i,r));e.tmr&&clearInterval(e.tmr);h=document.body.offsetWidth;e.style.opacity=0;sys.upload.fkntr==r&&(sys.upload.o.waitFN?sys.upload.o.waitFN(0):document.body.setAttribute("upload",0));u.sysCB&&u.sysCB(n,t,i,r);u.endCB&&u.endCB(n,t,i,r)}}(n,t,i,r);f.upload.onprogress=function(n,t,i,r){return function(u){sys.upload.progressFN(u,n,t,i,r)}}(n,t,i,r);f.send(n)},progressFN:function(n,t,i,r,u){var f,e,h,o,s,c;n.lengthComputable&&(f=n.loaded*100/n.total,f=f-(100-f)/5,f>=1&&(e=sys.upload.o.prog,typeof e=="function"&&(e=e(t,i,r,u)),h=(new Date).getTime()-e.st,o=sys.upload.o.extraTime,o=o?o:0,s=h/(f/100)+300+o,navigator.appVersion.indexOf("MSIE")!=-1&&(f<90&&s<4e3&&(s=4e3),s+=2e3),c=s-h,e.initial=!1,e.setTL(c)))},preloadF:{},preload:function(n,t){var r,i;if(!n){t({src:n,w:0,h:0});return}if(r=sys.upload.preloadF[n],r){t(r);return}
i=document.body.appendChild(document.createElement("IMG"));i.style.cssText="position:absolute; top:-10000px; left:-10000px; opacity:0; pointer-events:none;";attachE(i,["load","error"],function(n,t,i){return function(r){var u={w:t.offsetWidth,h:t.offsetHeight,src:n};sys.upload.preloadF[n]=u;t.parentNode.removeChild(t);i(u,r.type=="error"?1:0)}}(n,i,t));i.src=n}};!1&&console.log("drag");sys.drag={s:0,cursor:1,cb:function(){},fn:function(n,t){var r=n.target?n.target:n.srcElement,i,u;sys.drag.s=1;t.pos=0;i=clientXY(n);t.m&&(t.pos={x:i.x-t.m.sx,y:i.y-t.m.sy});switch(n.type){case"mousedown":case"touchstart":t.evt=function(n){return function(t){sys.drag.fn(t,n)}}(t);t.m||(sys.drag.cb("start",n,t),t!=r&&(u=getComputedStyle(r,null),i.ox+=r.offsetLeft-parseInt(u.marginLeft),i.oy+=r.offsetTop-parseInt(u.marginTop)),t.p.setAttribute("drag",sys.drag.cursor),t.m={sx:i.x-i.ox,sy:i.y-i.oy,ox:i.ox,oy:i.oy},t.pos={x:i.ox,y:i.oy},attachE(document.body,["mouseup","mousemove","mouseleave","touchmove","touchend"],t.evt),t.pos&&sys.drag.cb("change",n,t));break;case"mousemove":case"touchmove":t.pos&&sys.drag.cb("change",n,t);break;case"mouseleave":if(!t.m||(n.fromElement?n.fromElement:n.relatedTarget).tagName!="BODY")return!1
case"mouseup":case"touchend":t.pos&&(sys.drag.cb("change",n,t),sys.drag.cb("end",n,t));t.m=!1;dettachE(document.body,["mouseup","mousemove","mouseleave","touchmove","touchend"],t.evt);t.p.setAttribute("drag",0);sys.blockPrev=1}t.pos&&sys.blockPrev&&(sys.drag.s=0,sys.blockPrev=0);preventDefault(n,1)}};window!=top.window&&sys.init(0,function(){document.body.className+=" sys-framed";attachE(window,"message",function(n){if((n.data+" ").substr(0,1)=="{"){var t=JSON.parse(n.data);switch(t.act){case"wait":sys.wait(t.s);break;case"init":sys.qlist&&(sys.qlist.shareURL=t.share,sys.qlist.accountURL=t.account)}sys.frameMsg&&sys.frameMsg(t)}})});sys.xStream=function(n){var t={msg:"",abit:0,cbit:0,isStart:1,appendBuffer:function(n,t){if(!n)return t;if(!t)return n;var i=new Uint8Array(n.byteLength+t.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(t),n.byteLength),i.buffer},readStream:function(n){try{return n.reader.read().then(function(n){return function(t){var e=t.done,i=t.value,r,f,u,o;if(n.cbit=n.appendBuffer(n.cbit,i),n.isEnd=e?1:0,n.abit=n.appendBuffer(n.abit,i),i&&i.length)for(r=0;r<i.length;r++)f=i[r]<192?1:i[r]<224?2:i[r]<240?3:4,f>1?n.wl=f-1:n.wl>0&&n.wl--;if(n.isEnd||n.cbit&&!n.wl){if(n.isStart&&(n.isRunning=1),u=(new TextDecoder).decode(n.cbit),o="",/[\{]["]error["]/.test(u)){n.onError(JSON.parse(u));return}n.msg+=u;n.cbit=0;(n.isEnd||!n.html||(n.msg.match(/</g)||[]).length==(n.msg.match(/>/g)||[]).length)&&(n.cb&&n.cb(n,u),n.isStart&&(n.isStart=0),n.isEnd&&(n.isRunning=0,n.ecb&&n.ecb(n,u,0)))}if(!e)return n.readStream(n)}}(n))}catch(t){/user aborted/i.test(t)||console.log(t)}}},r,i;for(i in n)t[i]=n[i];if(t.readData=function(n){return function(t,i){return n.control=new AbortController,i.signal=n.control.signal,n.isStart=1,fetch(t,i).then(function(n){return function(t){return n.reader=t.body.getReader(),n.readStream(n)}}(n))}}(t),t.cancel=function(n){return function(){try{n.control.abort()}catch(t){}n.isRunning=0;n.ecb&&n.ecb(n,"",0)}}(t),t.post){if(r="",typeof t.post=="object")
for(i in t.post)r+=(r?"&":"")+i+"="+encodeURIComponent(t.post[i]);else r=t.post;t.fopt?t.fopt.body||(t.fopt.body=r):t.fopt={method:"POST",body:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}}}
return t.readData(t.url,t.fopt),t};sys.libLoad=1;document&&"loaded;interactive;complete".indexOf(document.readyState)!=-1?sys.domReady():window.addEventListener?window.addEventListener("DOMContentLoaded",sys.domReady,!0):window.attachEvent("onload",sys.domReady);sys.quizAI={qWin:window,allowImages:{q:0,oc:0},prompts:{build:["Build Quiz"],placeholders:["Enter the topic of your quiz questions here and hit 'Build Quiz'"],slabels:[{n:"Sending quiz details",z:.5},{n:"Initializing neural network"},{n:"Analyzing subject prompt",z:2},{n:"Compiling relevant information",z:3},{n:"Building source text",z:3},{n:"Reviewing quiz details"},{n:"Finalizing"}],elabels:[{n:"Constructing difficulty baseline"},{n:"Comparing to previous iterations"},{n:"Eliminating duplicates"},{n:"Replacing removed questions"},{n:"Checking for accuracy"},{n:"Structuring semantic overview"}],tips:[{n:"Your quiz will be more targeted if you enter more details in the prompt. Try a whole paragraph!"},{n:"You can enter Wikipedia link(s) into the prompt"},{n:'Positive instructions work better than negative ones so it is better to avoid saying "without" or "don\'t"'},{n:"If our AI is unable to create the full amount of questions, you will be able to request more"},{n:"We are working on expanding the functionality of the AI, so let us know what you think"}],timeout:["Your quiz has been queued","Unfortunately the AI usage is currently higher than anticipated and your quiz is currently in the queue.  Please enter your email address below and we will email the quiz to you once it has been created.  We will not use this email address for any other purpose."]},init:function(){if(sys.aiBtnStream&&sys.init("qm-preload-cb",function(n){for(var i=0,r,t=0;t<n.list.length;t++)r=n.list[t],r.stream===0&&(i=1);i&&sys.quizAI.addMoreB(function(){sys.quizAI.loadWin();var
n=sys.qai;n.isSuggest=1;n.show(1)})}),sys.allowBot&&document.body.getAttribute("p")!="QuizMaker-Frame"){var n=!1;qsV("a")=="y"&&(n=!0);n=!0;n&&(this.loadBot(),/home/.test(document.body.className)||sys.assist.small(1),sys.assist.show(1));sys.runInit("ai-init-cb",0);sys.tool&&sys.tool.set(sys.quizAI.prompts);/home/.test(document.body.className)&&sys.quizAI.loadHash()}},loadBot:function(){sys.assist||(sys.addTemplates(" \t\t\t<div class='assist-win' adv=1 att='smallC::click'><div class='assist-win-i'> \t\t\t\t<div class='assist-bubble'><div class='assist-bubble-i' att='mbox::save'><\/div><\/div> \t\t\t\t<div class='assist-head'><div class='assist-close' att='closeC::click'><\/div><div class='assist-eyes'><div><\/div><div><\/div><\/div><\/div> \t\t\t\t<div class='assist-body'> \t\t\t\t\t<div class='assist-prog' att='pbar::save'><\/div> \t\t\t\t\t<div class='assist-inp'><div class='qp-subtab-c' hash='no'> \t\t\t\t\t\t<div tab='start'> \t\t\t\t\t\t\t<span class='assist-starttxt'>AI Helper Bot<\/span> \t\t\t\t\t\t\t<div class='button cta-b assist-startbtn' caption='Create' b=1 att='startBtn::click'><\/div> \t\t\t\t\t\t\t<div class='button cta-b assist-startbtn' caption='Add Questions' b=2 att='startBtn::click'><\/div> \t\t\t\t\t\t\t<div class='button cta-b assist-startbtn' caption='Add Answers' b=3 att='startBtn::click'><\/div> \t\t\t\t\t\t\t<div class='button cta-b assist-startbtn' caption='Help Me!' b=4 att='startBtn::click'><\/div> \t\t\t\t\t\t<\/div> \t\t\t\t\t\t<div tab='tags' att='inputs::tb-inp'><\/div> \t\t\t\t\t\t<div tab='info'> \t\t\t\t\t\t\t<div class='assist-chat' att='ibox::save'><\/div> \t\t\t\t\t\t\t<div class='button cta-c cta-big assist-qbtn' caption='Cancel' att='cancelQuiz::click'><\/div> \t\t\t\t\t\t<\/div> \t\t\t\t\t\t<div tab='chat'> \t\t\t\t\t\t\t<div class='assist-chat' att='cbox::save'><\/div> \t\t\t\t\t\t\t<div class='assist-chat-x' att='clearChat::click'><\/div> \t\t\t\t\t\t\t<div class='assist-chat-s' att='clearChatFocus::click'><\/div> \t\t\t\t\t\t\t<input class='assist-chati' type=text value='' placeholder='Type and press enter for help' att='onK::keyup,cinp::save'><div class='tb-btn cta-b fa fa-send assist-chatb' att='onChatB::click'><\/div> \t\t\t\t\t\t\t<div class='button cta-c cta-big assist-qbtn' caption='Back' att='cancelChat::click'><\/div> \t\t\t\t\t\t<\/div> \t\t\t\t\t<\/div><\/div> \t\t\t\t\t<div class='assist-s' att='sbox::save'><\/div> \t\t\t\t<\/div> \t\t\t<\/div><div class='assist-scroll' att='reFocus::click'><\/div><\/div> \t\t"),sys.create({id:"assist",pDom:obj("quiz-maker"),template:"assist-win",visible:0,blur:0,grow:0,noHidePrev:1,advOpt:{},thinkv:"",cobj:{msg:[],opt:{}},defaults:{btns:{create:"Create Quiz"},chat:{quiz:"Tell me about your quiz and I will make it for you.",help:"Ask me anything about Quiz Maker and I will do my best to help!",addq:"Give me a moment while I work out what your quiz is about..."},placeholder:{quiz:"Type and press enter to answer",help:"Type and press enter for help",addq:"Type and press enter to answer"}},onCreate:function(n){if(n.qlist=sys.qlist,n.qWin=window,n.qlist||sys.init("qm-init-cb",function(n){return function(){n.qlist=sys.qlist}}(n)),window.innerWidth<1e3&&n.small(1),loadTabs(),n.tabs=n.obj(".qp-subtab-c").tabs,n.tabs.cb=n.onTab.bind(n),/(survey-maker|supersurvey)/.test(document.location.host)&&(n.defaults=n.setDF(n.defaults)),n.obj(".assist-startbtn",3)[0].setAttribute("caption",n.defaults.btns.create),n.eyes=n.obj(".assist-eyes > DIV"),n.qm=obj("quiz-maker"),attachE(window,"scroll",n.onWinScroll.bind(n)),attachE(window,["wheel","mousedown","touchstart"],n.onWinFocus.bind(n)),qsV("tagf")=="quiz"){setWait(1);n.setTab("chat","quiz");var t=function(n){return function(){n.qlist.clear(1);n.qWin.sys.oc.clear(1);n.qWin.sys.qresults&&n.qWin.sys.qresults.clear(1);delete n.qWin.gObj.qtype;n.qWin.sys.tdrop.showType();delete n.qWin.gObj.context;setWait(0);n.mode="nextbuild";n.chat({msg:sys.dashAI&&sys.dashAI.tp?sys.dashAI.tp:qsV("tagn")});n.mode="quiz";document.location.hash=""}}(n);n.qlist?setTimeout(t,301):sys.init("qm-init-cb",t)}n.dbInit()},onShow:function(n){n.firstShow&&(delete n.firstShow,attachE(n.cbox,["wheel","mousedown","touchstart"],n.onChatFocus.bind(n)),attachE(document,"mousemove",n.onMouseMove.bind(this)),n.randEmote("b",1),sys.createCB("qm-onSel",n.qSel.bind(n)))},setDF:function(n){for(var t in n)typeof n[t]=="object"?n[t]=this.setDF(n[t]):typeof n[t]=="string"&&(n[t]=n[t].replace(/(quiz maker|quiz|quizzes)/gi,function(n){var t={"quiz maker":"Super Survey",quiz:"Survey",quizzes:"Surveys"}[n.toLowerCase()];return t?n.charAt(0)=="Q"?t:t.toLowerCase():n}));return n},startBtn:function(n,t,i,r){var o=r.obj("DIV[tab='tags'] .assist-qbtn",1),e=parseInt(t.getAttribute("b")),u,t,f;gEvent("AI","Start",["Create Quiz","Add Questions","Add Answers","Help Me","Other"][e-1]);switch(e){case 1:u=function(n){return function(){n.setTab("chat","quiz");n.chat({msgO:{mode:"quiz"},msg:n.defaults.chat.quiz,local:!0,qclear:!0});n.cinp.focus()}}(r);r.qlist&&r.qlist.list.length?(sys.aiclearq||sys.create({id:"aiclearq",template:"window",title:"Delete existing quiz?",msg:"This will clear your existing quiz, are you sure?<br><br>You can click 'Add Questions' instead if you wish to add questions to your current quiz.",visible:0,okCB:function(){var n=sys.assist;return n.qlist.clear(1),n.qWin.sys.oc.clear(1),n.qWin.sys.qresults.clear(1),delete n.qWin.gObj.qtype,n.qWin.sys.tdrop.showType(),delete n.qWin.gObj.context,this.cfn(),n.dom.scrollIntoView({behavior:"smooth",block:"end"}),n.cinp.focus(),!0}}),sys.aiclearq.cfn=u,sys.aiclearq.show(1)):u();break;case 2:r.setTab("chat",!r.qlist||!r.qlist.list.length?"quiz":"addq");r.qlist&&r.qlist.list.length?(r.chat({msgO:{mode:"addq"},msg:r.defaults.chat.addq,local:!0,clear:!0}),r.guessQuiz()):r.chat({msgO:{mode:"quiz"},msg:r.defaults.chat.quiz,local:!0,clear:!0});r.cinp.focus();break;case 3:if(!sys.page){if(!r.qlist){sys.assist.noEditor("The AI Helper wants to take you to the quiz editor","");return}if(!r.qlist.sel&&r.qlist.list.length&&(t=obj("#quiz-questions > .quiz-qi:last-of-type",1),t&&t.o&&(f=r.qlist.find(t.o),f&&r.qlist.setSel(f))),!r.qlist.sel){r.msg("Please select or create a question first");r.processTag("question","question");return}if(r.qlist.sel&&!r.qlist.sel.q){r.msg("Please add some text to your question first");r.processTag("question","question");return}}r.setTab("info","answers");r.addAnswers(1,1);break;case 4:r.setTab("chat","help");r.cbox.childNodes.length||r.chat({msgO:{mode:"help"},msg:r.defaults.chat.help,local:!0,clear:!0});r.cinp.focus()}},setTab:function(n,t){var i=this,r;(t||t=="")&&(i.mode=t);i.dom.setAttribute("mode",i.mode);r=i.defaults.placeholder;i.cinp.setAttribute("placeholder",r[i.mode]?r[i.mode]:r.help);typeof n=="string"&&(n=i.tabs.t.indexOf(i.obj("DIV[tab='"+n+"']",1))+1);i.tabs.idx!=n&&i.tabs.t[n-1].show()},onTab:function(n,t){var r=this,u=r.tabs.t[t-1],f=u.getAttribute("tab"),i=r.getLast();return i&&i.o&&i.o.mode&&(i.parentNode.removeChild(i),i=r.getLast()),i&&r.chatSetScroll(1),!0},addContext:function(n){var f=this,t=f.qWin?f.qWin.gObj:0,i,r,u;if(t){for(t.context||(t.context={msg:[]}),i=0,r=0;!i&&r<t.context.msg.length;r++)u=t.context.msg[r],u&&u.v==n+""&&(i=1);i||t.context.msg.push({n:"guess",v:n+""})}},getLast:function(){var n=this;return n.cbox.childNodes[n.cbox.childNodes.length-1]},guessQuiz:function(){var n=this;gEvent("AI","Guess Quiz","Send");n.chat({msg:"guess",mode:"addq",ecb:function(n,t){n||t.addContext(t.cobj.reply)}})},smallC:function(n,t,i,r){r.isSmall&&(r.small(0),preventDefault(n,1))},closeC:function(n,t,i,r){r.small(1);preventDefault(n,1)},onK:function(n,t,i,r){n.keyCode==13&&r.chat()},onChatB:function(n,t,i,r)
{r.chat()},noinputs:[{n:"q",label:"",lwidth:0,placeholder:"What is your quiz about?",cn:"assist-tagi",onK:function(n,t,i,r){n.keyCode==13&&r.findTags()},btns:[{cn:"cta-b fa fa-search",onC:function(n,t,i,r){r.findTags(1)}}]},{nosave:1,template:"button",cn:"cta-b assist-advb fa fa-chevron-left",mevt:function(n,t,i,r){var u=n.type=="mouseup";r.emote(u?"":"w",u?-1:1e4)},cb:function(n,t,i,r){gEvent("AI","Button","Back");r.setTab("start")}},{nosave:1,template:"button",cn:"cta-b cta-big assist-qbtn",caption:"Add Questions",mevt:function(n,t,i,r){var u=n.type=="mouseup";r.emote(u?"":"w",u?-1:1e4)},cb:function(n,t,i,r){gEvent("AI","Button",t.getAttribute("Caption")+"");r.addQ()}},{nosave:1,template:"button",cn:"cta-b assist-advb fa fa-cogs",css:typeof(cUser)=='object'&&cUser.aVis?"":"display:none;",mevt:function(n,t,i,r){var
u=n.type=="mouseup";r.emote(u?"":"w",u?-1:1e4)},cb:function(n,t,i,r){gEvent("AI","Button","Advanced");r.showAdv()}}],speed:{chat:20,quiz:20},tt:{b:700,wl:700,wr:700},rEmote:{},tSent:{},look:function(n,t){n=n+"  ";this.dom.setAttribute("v",n[0]);this.dom.setAttribute("h",n[1]);clearTimeout(this.ltmr);t>0&&(this.ltmr=setTimeout(this.lookC.bind(this),t+1))},emote:function(n,t){this.cem=n;this.dom.setAttribute("em",n);t=t?t:this.tt[n];t=t?t:300;clearTimeout(this.etmr);t>0&&(this.etmr=setTimeout(this.emoteC.bind(this),t+1))},emoteC:function(){this.dom.removeAttribute("em");this.cem=""},lookC:function(){this.dom.removeAttribute("v");this.dom.removeAttribute("h")},think:function(n){n!=this.thinkv&&(this.thinkv=n,this.dom.setAttribute("think",this.thinkv))},small:function(n){n=n?n:0;this.isSmall=n;this.dom.setAttribute("small",n)},toQ:function(n){n&&n.dom&&!sys.quizAI.nofocus&&easeScroll(findPos(n.dom).ya-295)},qVis:function(n){if(n&&n.dom&&!sys.quizAI.nofocus){var t=findPos(n.dom),i=t.y+n.dom.offsetHeight+
160;i>window.innerHeight&&easeScroll(t.ya-t.y+(i-window.innerHeight))}},randEmote:function(n,t){if((typeof n=="string"&&(n=this.rEmote[n]?this.rEmote[n]:{em:n}),n&&n.em)&&(n.tmr&&clearTimeout(n.tmr),t))
{this.rEmote[n.em]=n;n.min||(n.min=3);n.max||(n.max=10);var i=Math.random()*(n.max-n.min)*1e3+n.min*1e3;t==2&&(this.cem||this.emote(n.em,n.emtt));n.tmr=setTimeout(function(n,t){return function(){n.randEmote(t,2)}}(this,n),i)}},setAct:function(n){var t=this;t.cAct=n;t.dom.setAttribute("act",n)},htmlSplit:function(n){var t=[],i=String.fromCharCode(209);return n=n.replace(/(?:Ñ|[\<]([a-z]+)[^\>]*[\>][\s\S]*?[\<][\/](\1)[\>])/g,function(n,t){return function(i){return n.push(i),t}}(t,i)),n=n.split(""),n.map(function(n){return n==i?t.shift():n})},msg:function(n,t){var r=this,i=r.mobj;i||(r.mobj=i={});i.win=r;i.tp="";i.box=r.mbox;i.ecb=t;i.msg=n.split("");i.stop=0;clearTimeout(i.tmr);clearTimeout(i.etmr);i.box.innerHTML="";i.win.dom.setAttribute("chat",1);r.setAct("msg");r.msgN.apply(i)},msgE:function(){var n=this;n.win&&n.win.dom.removeAttribute("chat");n.running=0;n.ecb&&n.ecb()},msgN:function(){var n=this,t;clearTimeout(n.tmr);clearTimeout(n.etmr);t=n.msg.shift();t&&(n.box.innerHTML+=t,n.box.scrollTop=n.box.scrollHeight);n.msg.length&&!n.stop?n.tmr=setTimeout(n.win.msgN.bind(n),20):n.etmr=setTimeout(n.win.msgE.bind(n),5e3)},readData:function(n,t,i,r){return sys.assist.think("w"),fetch(n,t).then(function(n,t){return function(i){return sys.assist.reader=i.body.getReader(),sys.assist.readStream(n,t)}}(i,r))},readStream:function(n,t){try{return sys.assist.reader.read().then(function(n,t){return function(i){var r=sys.assist,l=sys.quizAI,y=i.done,s=i.value,h,a,u,o,c,e,v,f;if(r.cobj.cbit=l.appendBuffer(r.cobj.cbit,s),r.cobj.isEnd=y?1:0,r.cobj.abit=l.appendBuffer(r.cobj.abit,s),s&&s.length)for(h=0;h<s.length;h++)a=s[h]<192?1:s[h]<224?2:s[h]<240?3:4,a>1?r.cobj.wl=a-1:r.cobj.wl>0&&r.cobj.wl--;if(r.cobj.isStart&&(r.cobj.isStart=0,r.cobj.running=1,r.cobj.st=performance.now(),r.cobj.stop=0,r.cobj.chattmr=setInterval(r.chatV.bind(r),r.speed.chat)),r.cobj.isEnd||r.cobj.cbit&&!r.cobj.wl){if(u=(new TextDecoder).decode(r.cobj.cbit),r.cobj.cbit=0,o="",/[\{]["]error["]/.test(u)){sys.assist.onError(JSON.parse(u));return}r.cobj.quiz?(c=r.cobj.quiz,r.cobj.switchQ&&(u=u.replace(/^[\#]*[\s\f\r\n]+/g,""),r.cobj.switchQ=0),c=="wait"?r.cobj.wbuffer=(r.cobj.wbuffer?r.cobj.wbuffer:"")+u:(c.chunks=c.chunks.concat(u.split("")),sys.quizAI.processStream(0),r.cobj.isEnd&&(r.cobj.running=0,r.think(""),l.streamEnd(),r.cobj.opt.ecb&&r.cobj.opt.ecb(0,r)))):(r.cobj.opt.msgO&&(cobj.msg=cobj.msg.concat(r.cobj.opt.msgO),delete r.cobj.opt.msgO),r.cobj.store&&(r.cobj.store+=u,u="",/[\#][^\#]+[\#]/.test(r.cobj.store)&&(e=r.cobj.store.split("#"),u=e.shift(),r.cobj.store="#"+e.shift()+"#",o=e.join("#").replace(/^[\s]+/gi,""),/[\#](Quiz|W|R)[\:][^\#]+[\#]/gi.test(r.cobj.store)?(f=r.cobj.store.toLowerCase(),delete r.cobj.store,f=f.replace(/[\']/gi,"\\'").split("#")[1],f=f.split(":"),r.processTag(f[0],f[1],o),o=""):(u&&(r.cobj.msg=r.cobj.msg.concat(u.split(""))),r.cobj.msg=r.cobj.msg.concat(r.cobj.store),delete r.cobj.store,o&&(r.cobj.msg=r.cobj.msg.concat(o.split("")))))),/[\#]/.test(u)?(e=u.split("#"),u=e.shift(),v=0,e.length>1&&(o=e.pop().replace(/^[\s]+/gi,""),v=1),e="#"+e.join("")+(v?"#":""),u&&(r.cobj.msg=r.cobj.msg.concat(u.split(""))),r.cobj.store=e,/[\#](Quiz|W|R)[\:][^\#]+[\#]/gi.test(r.cobj.store)?(f=r.cobj.store.toLowerCase()+"#",delete r.cobj.store,f=f.replace(/[\']/gi,"\\'").split("#")[1],f=f.split(":"),r.processTag(f[0],f[1],o),o=""):o&&(r.cobj.msg=r.cobj.msg.concat(r.cobj.store),delete r.cobj.store,r.cobj.msg=r.cobj.msg.concat(o.split("")))):r.cobj.msg=r.cobj.msg.concat(u.split("")),r.cobj.isEnd&&(r.cobj.reply=(new TextDecoder).decode(r.cobj.abit),r.cobj.running=0,r.think(""),r.cobj.opt.ecb&&r.cobj.opt.ecb(0,r),r.cobj.opt.mcb&&(r.cobj.msg=r.cobj.msg.concat([r.cobj.opt.mcb]))))}if(!y)return r.readStream(n,t)}}(n,t))}catch(i){/user aborted/i.test(i)||console.log(i)}},chat:function(n){var t=this,i=t.cobj,r,o,e,u,s,f;if(n||(n={}),i.opt=n,n.mode&&(t.mode=n.mode),r=t.qWin?t.qWin.gObj:0,i.opt.clear?(i.running&&t.cancelChat(),i.msg=[],delete i.cMsg):(i.cMsg||i.msg.length)&&i.msg.push(null),i.stop=0,n.local){n.msg&&(o=typeof n.msg=="object"&&n.msg.push?n.msg:n.msg.split(""),n.msgO&&(n.msgO.local=!0,o.unshift(n.msgO)),i.msg=i.msg.concat(o));i.isEnd=1;clearInterval(t.cobj.chattmr);t.cobj.chattmr=setInterval(t.chatV.bind(t),t.speed.chat);return}
n.fromInp=!1;n.msg||(n.msg=t.cinp.value,n.fromInp=!0);i.quiz=0;i.isEnd=0;i.isStart=1;i.tabMap=0;n.msg?(typeof r=="object"&&n.fromInp&&t.mode=="addq"&&r.context&&t.addContext(n.msg),n.fromInp&&(e=document.createElement("DIV"),e.className="assist-chat-msg you",e.innerHTML=t.cinp.value,t.cbox.appendChild(e),t.cinp.value="",t.chatSetScroll(1)),t.setAct("chat"),u="q="+encodeURIComponent(n.msg)+"&mode="+t.mode,typeof r=="object"&&r.qtype&&(u+="&qtype="+encodeURIComponent(r.qtype)),typeof r=="object"&&r.context&&(u+="&context="+encodeURIComponent(JSON.stringify(r.context))),n.fromInp&&t.mode=="quiz"&&t.cbox.childNodes.length<3&&(u+="&qclear=y"),n.fromInp&&t.mode=="help"&&t.cbox.childNodes.length<3&&(u+="&clear=y"),t.qlist||sys.page||(u+="&ed=n"),t.mode=="addq"&&t.qlist.list.length&&(u+="&more="+encodeURIComponent(sys.quizAI.exampleQ())),s="/api/AI.Help",f={},f.method="POST",f.headers={"Content-Type":"application/x-www-form-urlencoded"},f.body=u,t.cobj.control=new AbortController,f.signal=t.cobj.control.signal,t.clearChatFocus(1),gEvent("AI","Chat","Send"),t.cobj.chatting=1,t.readData(s,f)):t.msg("Type your message into the box below and press 'Enter'")},chatV:function(){var t=this,n=t.cobj,i,r,u;if(n.stop)
{clearInterval(t.cobj.chattmr);return}if(i=n.msg.shift(),n.opt.fill&&!n.msg.length&&(n.msg.push(" "),n.msg=n.msg.concat(Array.from(crypto.getRandomValues(new Uint8Array(Math.round(Math.random()*7)+1))).map(function(n){return"abcdefghijklmnopqrstuvwxyz".charAt(Math.round(n*26/255))})),n.cMsg&&n.cMsg.offsetHeight>10+21*(Math.round(Math.random()*3)+2)&&n.msg.push(null)),i)switch(typeof i){case"string":i=="\n"&&(i="<br>");t.think("");/[\#](Tab|Settings)[\:][^\#]+[\#]/gi.test(i)&&(r=i.replace(/[\']/gi,"\\'").split("#")[1],r=r.split(":"),i="<a class='assist-msg-link' onClick=\"sys.assist.processTag('"+
r[0].toLowerCase()+"','"+r[1].toLowerCase()+"','Click here to go to "+r[1]+"')\">Take me to: "+r[1]+"<\/a>");n.cMsg||(n.cMsg=t.chatItem());n.cMsg.innerHTML+=i;t.linkerize(n.cMsg,i,n.isEnd);t.chatSetScroll();break;case"function":i(0,t);break;case"object":n.cMsg=t.chatItem();n.cMsg.o=i}else i===null&&delete n.cMsg,u=performance.now()-n.st,u>300&&t.think("w");n.isEnd&&!n.msg.length&&(t.cobj.chatting=0,clearInterval(t.cobj.chattmr),t.think(""),t.dbSave())},clearChat:function(){sys.create({id:"assistcc",title:"Clear Chat",msg:"This will clear the chat, are you sure?<br><br>",visible:1,okCB:function(){var n=sys.assist;return n.cbox.innerHTML="",n.dbSave(),!0}})},chatItem:function(n){var t=document.createElement("DIV");return t.className="assist-chat-msg",n&&(t.innerHTML=n),this.cbox.appendChild(t)},linkerize:function(n,t,i){var e=this,r=n.innerHTML,u={c:0},f;(i||/[^\w\d]/.test(t))&&(f=function(n){return function(t){var i,u,r;return n.c++,i=/(^|[^\w])([\"\']*)([a-zA-Z 0-9\:\/]+)\2[\s](tab|setting|section)/i.exec(t),u=t.substr(0,1),u!=">"&&i&&i.length&&(r=i[4].toLowerCase(),r=="option"&&(r="setting"),/^[\s]*(an|update|or|this|the|your|a|quiz|enabl|sett|set|tick|select|by|and|keys|available|specific)(ing)*[\s]*$/.test(i[3])||sys.assist.processTag(r,i[3].toLowerCase(),"#")&&(t=u+"<a class='assist-msg-link' onClick=\"sys.assist.processTag('"+r+"','"+i[3].toLowerCase()+"','"+i[3]+"',1)\">"+t.substr(1)+"<\/a>")),t}}(u),r=r.replace(/(^|[^\w])([\"\']*)([a-zA-Z 0-9\:\/]+)\2[\s](tab|setting|section)(?=[^a-zA-Z])/gi,f),r=r.replace(/(^|[^\w])([a-zA-Z]+)[\s](tab|setting|section)(?=[^a-zA-Z])/gi,f));(i||/[\s"']/.test(t))&&(r=r.replace(/[^>"]https*[\:][\/][\/](?:www[\.])*((?:quiz|poll|survey)[\-]maker|supersurvey|quizwiz)[\.]com[^\s"'\.\)\}\]\<]*(?=[\s"'\.\)\}\]\<])/gi,function(n){return function(t){var r,i;return n.c++,r=t.substr(0,1),t=t.substr(1),i="",/\.$/.test(t)&&(i=t.substr(t.length-1),t=t.substr(0,t.length-1)),r+"<a class='assist-msg-link' href=\""+t+'" target=_blank>'+t+"<\/a>"+i}}(u)));u.c&&(n.innerHTML=r)},cancelQuiz:function(n,t,i,r){gEvent("AI","Button","Add Cancel");var u=r?r:this;u.cobj&&u.cobj.quiz?(sys.quizAI.streamStop(),u.setTab("chat"),u.chat({msg:"ok I have stopped",local:!0})):(sys.quizAI.streamStop(),u.setTab("start"));u.setAct("")},cancelChat:function(n,t,i,r){gEvent("AI","Button","Chat Cancel");var u=r?r:this;u.cobj&&(u.cobj.control&&u.cobj.control.abort(),u.cobj.stop=1,u.cobj.running=0,u.cobj.opt.ecb&&u.cobj.opt.ecb(1,u));u.setTab("start");u.setAct("")},noEditor:function(n,t){sys.page&&sys.editor&&sys.editor.frame&&this.edContinue(t)||(sys.create({id:"aichangepg",template:"window",visible:0,title:"Build Quiz?",msg:n,visible:1,confirm:1,okCB:function(){return sys.aichangepg.show(0),setWait(1),sys.page?sys.page("editor","","new",function(){sys.editor.unloadCB=function(){delete sys.assist.qlist;delete sys.assist.qWin};sys.editor.reloadCB=function(){clearInterval(sys.aichangepg.etmr);sys.aichangepg.etmr=setInterval(function(){sys.assist.edContinue(sys.aichangepg.hash)},500)};sys.editor.reloadCB()}):document.location="/"+(this.hash?"#"+this.hash:""),!1},cancelCB:function(){return sys.assist.chat({msg:"ok no problem",local:!0,clear:!0}),!0}}),sys.aichangepg.hash=t)},edContinue:function(n){var t=!sys.editor||!sys.editor.frame?0:sys.editor.frame.contentWindow;return t&&t.sys&&t.sys.qlist?(attachE(t,"scroll",sys.assist.onWinScroll.bind(sys.assist)),sys.aichangepg&&clearInterval(sys.aichangepg.etmr),sys.quizAI.qWin=t,sys.assist.qWin=sys.quizAI.qWin,sys.assist.qlist=sys.quizAI.qWin.sys.qlist,sys.assist.qm=t.obj("quiz-maker"),n&&(sys.assist.processTag(decodeURIComponent(qsV("tagf",n)),decodeURIComponent(qsV("tagn",n)),decodeURIComponent(qsV("tagcn",n))),setWait(0)),!0):!1},tabMap:function(){var h=this,i={},t=h.qWin.obj("DIV.sel DIV[th], DIV.sel .qp-subtab > DIV",3),e,o,u,f;for(t||(t=[]),t=t.concat(h.qWin.obj("DIV[th], .qp-subtab > DIV",3)),e=0;e<t.length;e++){var n=t[e],r=n.parentNode.nextSibling,s=0;for(r&&r.tabs&&r.tabs.t&&(s=r.tabs.t[r.tabs.h.indexOf(n)]),o=[n.innerHTML,n.getAttribute("th"),getComputedStyle(n,"::before").content,s?s.getAttribute("tab"):""],u=0;u<o.length;u++)o[u]&&(f=(o[u]+"").toLowerCase().replace(/([^a-z0-9]|[\s])+/gi,""),i[f]?findPos(i[f]).x<0&&(i[f]=n):i[f]=n)}return i},processTag:function(n,t,i,r){var u=this,o,s,v,h,f,c,y,p,l,e,w,a;if(t=(t?t:"").replace(/([^a-z0-9]|[\s])+/gi,""),i=i?i:"",o={design:"themes",questionbehavior:{f:"question",n:"settings"},quizsettings:"settings",plugins:"advanced",quizeditor:"quiz",questions:"quiz"}[t],o&&(typeof o=="object"?(n=o.f,t=o.n):t=o),!u.qlist&&(n=="question"||n=="setting")){if(i=="#")return!0;u.noEditor("This will take you to the editor, continue?","&tagf="+
encodeURIComponent(n)+"&tagn="+encodeURIComponent(t)+"&tagcn="+encodeURIComponent(i));return}switch(n){case"tab":case"section":if(u.qlist&&((!u.cobj.tabMap||r)&&(u.cobj.tabMap=u.tabMap()),s=u.cobj.tabMap[t],s)){if(i=="#")return!0;document.body.setAttribute("hasq",1);v=s.parentNode.parentNode;v.getAttribute("tab")&&v.show();s.show?s.show():s.click();easeScroll(0)}if(sys.pages){h="";fTab="";for(f in sys.pages)if((f==t||(sys.pages[f].title+"").toLowerCase()==t)&&(h=f),!h&&sys.pages[f].tabs)for(c=0;c<sys.pages[f].tabs.length;c++)((sys.pages[f].tabs[c].n+"").toLowerCase()==t||(sys.pages[f].tabs[c].tab+"").toLowerCase()==t)&&(h=f,fTab=sys.pages[f].tabs[c].tab);if(h){if(i=="#")return!0;sys.page(h,fTab,"")}}break;case"question":if(!u.qlist){u.noEditor("This will take you to the editor, continue?","&tagf="+
encodeURIComponent(n)+"&tagn="+encodeURIComponent(t)+"&tagcn="+encodeURIComponent(i));return}if(u.qlist.sel||(y=u.qlist.list[0],y&&u.qlist.setSel(y)),u.qlist.sel||(t="add",i=""),p={add:"#quiz-add-q",question:"@ .qi-q",photo:"@ .qi-img",image:"@ .qi-img",editor:"@ .fa-pencil",advanced:"@ .fa-pencil",settings:"@ .fa-cogs",logic:"@ .fa-bars"}[t],i||(i={add:"Click here to add a question first",question:"Type your question text here first"}[t],i||(i="Click here for the "+t)),p){if(i=="#")return!0;e={rid:1,sel:p.replace(/[\@]/,".quiz-qi[sel='1'] "),tidx:1,txt:i,b:"OK",delay:1};sys.walk.clear(1);sys.walk.helpTop=findPos(obj("quiz-maker")).ya-100;sys.walk.p.noscroll=!0;sys.walk.load({c:1,list:[e]});sys.walk.setSel(e.rid);sys.walk.sel.dom.scrollIntoView({behavior:"smooth",block:"end"})}break;case"setting":if(l=sys.qset.stiles.find(function(n){return n.dom&&n.n.toLowerCase().indexOf(t)!=-1}),l||(l=sys.qset.stiles.find(function(n){return n.dom&&(n.n+(n.desc?n.desc:"")).toLowerCase().indexOf(t)!=-1})),l){if(i=="#")return!0;e={rid:1,sel:".stile-itm[tk='"+
l.dom.getAttribute("tk")+"']",tidx:3,txt:"Set the '"+(i?i:t)+"' Setting",b:"OK",delay:1};sys.walk.clear(1);sys.walk.helpTop=findPos(obj("quiz-maker")).ya-100;sys.walk.p.noscroll=!0;sys.walk.load({c:1,list:[e]});sys.walk.setSel(e.rid);sys.walk.sel.dom.scrollIntoView({behavior:"smooth",block:"end"})}break;case"quiz":clearInterval(u.cobj.chattmr);u.think("");u.cobj.msg.length&&(u.cobj.msg[0]=u.cobj.msg.join(""),u.chatV());u.qlist?(w={quiz:1,type:2,survey:3}[t],a=sys.quizAI.streamInit("questions",{quiz:w?w:1,isNew:u.mode=="addq"?0:1}),sys.quizAI.streamStart(),i=i.replace(/^[\#]*[\s\f\r\n]+/g,""),a.control=u.cobj.control,u.cobj.wbuffer&&(i=(i?i:"")+u.cobj.wbuffer,delete u.cobj.wbuffer),i&&(a.chunks=a.chunks.concat(i.split(""))),u.cobj.quiz=a,sys.quizAI.processStream(0)):(u.cobj.quiz="wait",u.cobj.wbuffer="",u.cobj.switchQ=1,u.noEditor("The AI Helper wants to take you to the quiz editor to build you quiz...<br><br>","&tagf=quiz&tagn="+encodeURIComponent(t)+"&tagcn="+encodeURIComponent(i)));break;case"w":u.cobj.msg=u.cobj.msg.concat((t=="H"?"Please wait a moment while I look that up for you...":"Please wait a few moments while I have a bit of a think about all of this...").split(""));i=i.replace(/^[\#]*[\s\f\r\n]+/g,"");i&&(u.cobj.msg=u.cobj.msg.concat(i.split("")));break;case"r":u.cobj.msg=u.cobj.msg.concat("<div class='assist-chat-rate'><div class='u' onClick=\"sys.assist.processTag('ru','"+t+"',this)\"><\/div><div class='d' onClick=\"sys.assist.processTag('rd','"+
t+"',this)\"><\/div><\/div>");i=i.replace(/^[\#]*[\s\f\r\n]+/g,"");i&&(u.cobj.msg=u.cobj.msg.concat(i.split("")));break;case"ru":case"rd":xSend({s:"AI.Chat_Rate",d:"id="+t+"&v="+(n=="ru"?1:-1),cb:function(){}});i&&i.parentNode&&(i.parentNode.setAttribute("hide",1),setTimeout(function(n){return function(){n&&n.parentNode&&(n.parentNode.removeChild(n),sys.assist.dbSave())}}(i.parentNode),601));break;case"answers":u.addAnswers(t,i)}if(i=="#")return!1},info:function(n){var r=this,f,i,t,u;if(r.setTab("info"),(!r.iopt||n&&n.clear)&&(r.iopt={}),n.set){f=0;for(i in n.set)(n.set[i]!=2||n[i])&&r.iopt[i]!=n.set[i]&&(n[i]=n.set[i],f=1);if(f)delete n.set;else return}for(i in n)r.iopt[i]=n[i];n=r.iopt;t="";u=!n.tp&&n.tp!==0?"":["Multiple Choice","Checkboxes","Text","Number Scale"][n.tp];typeof n.tp=="string"&&(u=n.tp);t+="<div class='ai-info-h'>"+(n.head?n.head:"Writing "+(n.qk?n.qk:1)+" of "+(n.qn?n.qn:n.qk>10?n.qk:10)+" "+(n.item?n.item:"Questions"))+"<\/div>";t+="<div class='ai-info-q'>";n.body?(t+=n.body,delete
n.head,delete n.body):(t+="<div><div>Type: <\/div>"+(u?u:"<span class='ai-info-u'>detecting...<\/span>")+"<\/div>",t+=n.item=="Types"?"<div><div>Description: <\/div><span class='ai-info-u'>writing...<\/span><\/div>":"<div><div>Answers: <\/div>"+(n.ak?(n.ak?n.ak:1)+" of "+(!n.an||n.an<4?4:n.an):"<span class='ai-info-u'>writing...<\/span>")+"<\/div>",r.qWin.gObj.type==1&&(t+="<div><div>Score: <\/div>"+(!n.score&&n.score!==0?"<span class='ai-info-u'>calculating...<\/span>":n.score)+"<\/div>",n.alt&&(t+="<div><div>Alternatives: <\/div>"+(n.alt==1?"<span class='ai-info-u'>writing...<\/span>":"Complete")+"<\/div>"),n.ex&&(t+="<div><div>Explanation: <\/div>"+(n.ex==1?"<span class='ai-info-u'>writing...<\/span>":"Complete")+"<\/div>")));t+="<\/div>";r.ibox.innerHTML=t},progStart:function(n){var i=this,t,r;i.dom.removeAttribute("prog");t=i.pbar;t.style.top="";t.style.transitionDuration=n+"ms";r=t.offsetHeight;i.dom.setAttribute("prog",1);r=t.offsetHeight;t.style.top="-10%"},progStop:function(){var t=this,n=t.pbar,i;n.style.top=parseInt(getComputedStyle(n).top)*100/(n.offsetHeight/2)+"%";n.style.transition="none";i=n.offsetHeight},progLeft:function(n){var r=this,t=r.pbar,i;r.progStop();t.style.transition="";t.style.transitionDuration=Math.round(n)+"ms";i=t.offsetHeight;t.style.top="-10%";i=t.offsetHeight},progEnd:function(){var t=this,n,i;t.dom.removeAttribute("prog");n=t.pbar;n.style.top="";n.style.transitionDuration="";i=n.offsetHeight},qSel:function(){},addAnswers:function(n,t){var r=this,i,u,e,f;if(!r.qlist&&!r.edContinue()){sys.assist.noEditor("The AI Helper wants to take you to the editor?","&tagf=answers&tagn="+(n?"y":"")+"&tagcn="+
(t?"y":""));r.setTab("start");return}if(i=r.qlist.sel,!i||!i.q){alert("Please select a question"+(i?"":" with text")+" first");r.setTab("start");return}for(r.think("w"),u={jtype:"answers",q:i.q,qt:i.qtype,quiz:r.qWin.gObj.qtype,qn:1,speed:r.speed.quiz},e=[],f=0;f<i.opt.length;f++)i.opt[f].score.y&&i.opt[f].v&&(u.a=i.opt[f].v),i.opt[f].v&&e.push(i.opt[f].v);u.quiz==2&&(u.types=sys.quizAI.makeTypes());t&&!i.settings.yexp&&r.qWin.gObj.qtype==1&&(u.exp="y");n&&(u.ans="y",e.length&&(u.more=e.join("\n")));r.info({clear:1,item:"Answers",tp:i.qtype,qn:4});sys.quizAI.streamQ(u,function(n,t){return function(i)
{i.isError||sys.assist.msg(i.cancel?"Ok, I've stopped":"I've added the "+(n?"answers":"")+(t?(n?" and ":"")+"explanation":"")+" for you")}}(n,t))},onMouseMove:function(n){for(var u=this,i=0;i<2;i++){var
l=u.eyes[i],f=l.parentNode,e=findPos(f),o=i==0?15:10,s=10,r={x:e.x+f.offsetWidth/2,y:e.ya+f.offsetHeight/2},t={x:n.clientX-r.x,y:n.clientY-r.y};t.x>0&&(s=20);t.x>-160&&(o=10);var y=Math.sqrt(t.x*t.x+t.y*t.y),h=Math.atan2(t.y,t.x),c={x:r.x+s*Math.cos(h),y:r.y+o*Math.sin(h)},a=50-Math.round(r.x-c.x),v=50-Math.round(r.y-c.y);u.eyes[i].style.left=Math.abs(t.x)<160?"":a+"%";u.eyes[i].style.top=Math.abs(t.x)<160&&t.y>0&&t.y<380?"":v+"%"}},onChatFocus:function(){var n=this;n.dom.setAttribute("chatnofocus",1);n.chatNoFocus=1},chatSetScroll:function(n){var t=this;t.chatNoFocus&&n!=1||(t.cbox.scrollTop=t.cbox.scrollHeight)},clearChatFocus:function(n){var t=sys.assist;t.chatNoFocus=0;t.dom.removeAttribute("chatnofocus");n!=1&&t.chatSetScroll(1)},onWinScroll:function(){var n=this,t,i,r;obj("quiz-maker")&&n.visible&&(t=findPos(n.qm),t.h=n.qm.offsetHeight,n.floatTop||(n.floatTop=parseInt(getComputedStyle(n.dom).top)),i={y:n.floatTop},i.h=n.dom.offsetHeight+55,n.qlist&&n.qlist.stream||t.y+t.h>i.y+i.h?n.floating!=2&&(n.floating=2,n.dom.setAttribute("noanim",1),n.dom.style.position="",n.dom.style.top="",r=n.dom.offsetHeight,n.dom.removeAttribute("noanim")):n.floating!=1&&(n.floating=1,n.dom.setAttribute("noanim",1),n.dom.style.position="absolute",n.dom.style.top=t.h-120+"px",r=n.dom.offsetHeight,n.dom.removeAttribute("noanim")))},onWinFocus:function(){var n=this;n.qlist&&n.qlist.stream&&n.noFocus(1)},noFocus:function(n){var t=this;n=n?n:0;sys.quizAI.nofocus=n;n?t.dom.setAttribute("nofocus",n):t.dom.removeAttribute("nofocus")},reFocus:function(n,t,i,r){var u,t;r.noFocus(0);sys.quizAI.stream&&(u=sys.quizAI.stream.q);u||(t=obj("#quiz-questions > .quiz-qi:last-of-type",1),t&&t.o&&(u=r.qlist.find(t.o)));u&&r.qVis(u)},tSearch:function(){var t=this,r=t.values(),i,f,u,n;if(r.q.length>2){if(t.tSent[r.q])return;if(i=t.inpID.tags.options,r.tags)for(f=i.json(0,function(n){return n.selected?!1:n.value}).list,u=0;u<f.length;u++)i.remove(f[u]);else i.clear(1);n=i.find(1);n||(n={value:1,txt:r.q},i.load({c:1,list:[n]}));n.txt=r.q;n&&n.dom&&(n.dom.childNodes[1].innerHTML=r.q);n.selected=!0;n.inp.checked=!0;t.inpID.tags.inp.value=i.json(0,function(n){return n.selected?n.txt:!1}).list.join(",");i.list.length==1&&setWait(2,t.dom);clearTimeout(t.ktmrx);t.ktmrx=setTimeout(t.tSearchF.bind(t),1e3)}},tSearchF:function(){var t=this,n=t.values();if(n.q.length>2){if(t.tSent[n.q])return;t.tSent[n.q]=1;n.jtype="tags";n.local={win:t};t.moreTags(n)}},findTags:function(){var n=this,t=n.values(),i,u,r;if(t.q){if(gEvent("AI","Tags","Send"),n.ctag!==t.q){if(i=n.inpID.tags.options,t.tags)for(u=i.json(0,function(n){return n.selected?!1:n.value}).list,r=0;r<u.length;r++)i.remove(u[r]);else i.clear(1);n.ctag=t.q;t.jtype="tags";t.local={win:n};n.moreTags(t)}else setWait(1,n.inpID.q.btns[0].dom,0,400);n.adv||(n.adv=1,n.dom.setAttribute("adv",1))}else gEvent("AI","Tags","Empty Error"),n.msg("Please type in what your quiz is about and then press 'Enter'"),n.inpID.q.inp.focus()},onScroll:function(){var n=this,t,i;if(n&&n.visible&&(t=n.inpID.tags.options.p.parentNode,i=t.scrollHeight-t.scrollTop-t.offsetHeight,i<50)){n.scrollEnd();return}},scrollEnd:function(){var t=this,n=t.values(),i;n.jtype="tags";n.local={win:t};n.tags&&(n.q=n.tags,delete n.tags);i=t.exampleT();i&&(n.more=i);t.moreTags(n)},moreTags:function(n,t){var i=this,r=i.inpID.tags.options,u;i.loading||i.nomore||r.list.length>50||(i.loading=1,i.waiting=1,setWait(1,i.inpID.q.btns[0].dom),setWait(2,i.dom),u=r.list.length,sys.quizAI.streamQ(n,function(n,t,i,r){return function(){setWait(0,n.dom);setWait(0,n.inpID.q.btns[0].dom);n.waiting=0;var i=t.list.length;clearTimeout(n.moretmr);n.moretmr=setTimeout(function(){var n=sys.assist;n.loading=0},500);r&&r()}}(i,r,u,t),function(n,t,i){return function(){if(n.waiting!=2){var r=t.list.length;r-i>3&&(n.waiting=2,setWait(0,n.inpID.q.btns[0].dom))}}}(i,r,u)))},guessTags:function(){var n=this,i=n.inpID.tags.options,t;if(n.guess==-1||i.list.length){n.guess=-1;return}t=sys.quizAI.exampleQ();t.length>250&&(n.guess=-1,n.tagsFromQ(t))},tagsFromQ:function(n){var t=this,f={jtype:"tags",local:{win:t},selFirst:!0},i,u,r;if(t.think("w"),n||(n=sys.quizAI.exampleQ()),n&&(f.ex=n),i=t.inpID.tags.options,t.values().tags)for(u=i.json(0,function(n){return n.selected?!1:n.value}).list,r=0;r<u.length;r++)i.remove(u[r]);else i.clear(1);t.moreTags(f,function(n){return function(){n.think("")}}(t,i))},addQ:function(){var n=this,t=n.values(),r,i;if(t.isNew=n.qlist.list.length==0?1:0,t.speed=n.speed.quiz,t.quiz=n.qWinb.gObj.qtype,t.tags&&(t.q=t.tags,delete t.tags),n.advOpt)for(r in n.advOpt)t[r]=n.advOpt[r];t.quiz==2&&(t.types=sys.quizAI.makeTypes());i=sys.quizAI.exampleQ();i.length>50&&(t.more=i);(!t.q||t.q.length<=2)&&(!i||i.length<250)?(n.emote("g",3e3),n.msg("Please tell me what your quiz is about first! Type into the box below"),n.inpID.q.inp.focus(),gEvent("AI","Add Send","Empty Error")):(n.mode=="quiz"?(t.qn=10,n.qWin.gObj.qtype||n.qWin.sys.tdrop.global.setC({},{},n.qWin.sys.tdrop.find(1),n.qWin.sys.tdrop),n.qlist.clear(1),gEvent("AI","Add Send","Quiz")):(t.qn=5,gEvent("AI","Add Send","Questions")),n.think("w"),sys.quizAI.streamQ(t,function(n){n.isError||sys.assist.msg((n.cancel?"Ok, I've stopped. ":"")+"I've added "+n.qk+" questions for you.  Click 'Add Questions' for more")}),document.easeScrollEvent=1,n.onWinScroll())},exampleT:function(){return JSON.stringify(this.inpID.tags.options.json(0,function(n){return{v:n.txt}}).list)},showAdv:function(){sys.aiadvw||sys.create({id:"aiadvw",template:"window",cn:"with-tabs use-grid ai-advwin",msg:"",title:"Advanced AI Settings",inputs:[{n:"quiz",label:"",hide:0,format:"int",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:1,txt:"Scored Quiz / Trivia Quiz"},{value:2,txt:"Type Quiz / Personality Quiz"},{value:3,txt:"Survey"}]},{n:"purpose",hide:0,label:"",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"",txt:"What is the purpose of your quiz?"},{value:"the fun of",txt:"Fun"},{value:"educational assessment of",txt:"Educational Assessment"},{value:"educational revision of",txt:"Educational Revision"},{value:"training of",txt:"Training"},{value:"marketing to",txt:"Marketing"},{value:"a competition for",txt:"Competition"},{value:"obtaining feedback from",txt:"Feeeback"},{value:"research on",txt:"Research"},{value:"other",txt:"Other"}]},{n:"d",hide:0,label:"",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"",txt:"How hard should it be?"},{value:"easy",txt:"Easy"},{value:"difficult",txt:"Medium"},{value:"very difficult",txt:"Hard"}]},{n:"audience",hide:0,label:"",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"",txt:"Who is your audience?"},{value:"students",txt:"Students"},{value:"teachers",txt:"Teachers"},{value:"employees",txt:"Employees"},{value:"job candidates",txt:"Job Candidates"},{value:"customers",txt:"Customers"},{value:"website visitors",txt:"Website Visitors"},{value:"event attendees",txt:"Event Attendees"},{value:"research participants",txt:"Research Participants"},{value:"other",txt:"Other"}]},{n:"age",hide:0,label:"",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"",txt:"Age range of your audience?"},{value:"in primary school",txt:"Primary School"},{value:"in high school",txt:"High School"},{value:"young adults",txt:"Young Adults"},{value:"adults",txt:"Adults"},{value:"older adults",txt:"Older Adults"},{value:"under 5 years old",txt:"5 or under"},{value:"aged 6-7",txt:"6-7"},{value:"aged 8-9",txt:"8-9"},{value:"aged 10-11",txt:"10-11"},{value:"aged 12-13",txt:"12-13"},{value:"aged 14-15",txt:"14-15"},{value:"aged 16-17",txt:"16-17"},{value:"aged 18-19",txt:"18-19"},{value:"aged 20-24",txt:"20-24"},{value:"aged 25-29",txt:"25-29"},{value:"aged 30-39",txt:"30-39"},{value:"aged 40-59",txt:"40-59"},{value:"aged 60-79",txt:"60-79"},{value:"aged 80 or older",txt:"80+"},{value:"everyone",txt:"Everyone"}]}],okCB:function(){return sys.assist.advOpt=n.values(),!0}});var n=sys.aiadvw;n.values(this.advOpt);n.show(1)},onError:function(n){gEvent("AI","Error",(!n||!n.error?"":n.error)+"_"+(!n||!n.reason?"":n.reason));var r=this,t="I'm sorry I was not able to do that",i="";switch(n.error){case"limited":n.reason=="rate"||n.reason=="global_rate"?t="Please slow down, there's too many people using me right now and I need a break!":(t="",i="I would love to keep helping you but I've run out of free usage!  Please create an account so I can keep assisting you.  I can take you to the available options:".split(""),i.push("<div><a class='assist-msg-link' target=_blank href='/Pricing?src=assistant'>Take me there<\/a><\/div>"))}
t&&r.msg(t);i&&(r.setTab("chat"),r.chat({msg:i,local:!0}))},dbOpt:function(){for(var i=this,u={msg:[],mode:i.mode,tab:i.tabs.t[i.tabs.idx-1].getAttribute("tab")},n,r,t=0;t<sys.assist.cbox.childNodes.length;t++)n=sys.assist.cbox.childNodes[t],r={n:/you/.test(n.className)?"u":"b",v:n.innerHTML},n.o&&(r.o=n.o),u.msg.push(r);return u},dbInit:function(){try{var n=this.db;if(n||(n=this.db={opt:{msg:[]}}),window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,!window.indexedDB)return;n.r=window.indexedDB.open("aiDB",3);n.r.onerror=function(n){console.log("error",n)};n.r.onsuccess=function()
{try{var n=sys.assist,t=n.db;t.store=t.r.result;n.dbLoad()}catch(e){}};n.r.onupgradeneeded=function(n){try{var t=sys.assist.db;t.store=n.target.result;t.store.createObjectStore("bot")}catch(n){}}}catch(t)
{}},dbLoad:function(n){try{var t=this.db,i=t.store.transaction("bot").objectStore("bot");i.openCursor().onsuccess=function(n){return function(t){var f=t.target.result,e,i,u,r,o;if(f){if(e=sys.assist,i=e.db.opt=f.value,i.msg&&i.msg.length)for(u=0;u<i.msg.length;u++)r=i.msg[u],o=e.chatItem(r.v),r.o&&(o.o=r.o),r.n=="u"&&(o.className+=" you");f.continue()}else n&&n()}}(n)}catch(r){}},dbSave:function(n)
{try{var r=this.db,u=r.store.transaction(["bot"],"readwrite").objectStore("bot"),t=u.get("opt"),i=this.dbOpt();t.onsuccess=function(n){return function(t){var f=sys.assist.db,r=f.store.transaction(["bot"],"readwrite").objectStore("bot"),e=t.target.result,u=e?r.put(i,"opt"):r.add(i,"opt");u.onsuccess=function(n){return function(){n&&n()}}(n);u.onerror=function(n){console.log(n)}}}(n);t.onerror=function(n){console.log(n)}}catch(f){}}}))},quizRate:function(n){if(!obj(".quiz-rate",2)){var i="<div class='quiz-rate-msg'>How well did the AI do?<\/div><div class='quiz-rate-btns'><div class='quiz-rate-up' onClick='sys.quizAI.quizRateC(this,1)'><\/div><div class='quiz-rate-down' onClick='sys.quizAI.quizRateC(this,1)'><\/div><\/div><div class='quiz-rate-txt'><textarea id='quiz-rate-txt' class='quiz-rate-ftxt' onBlur='sys.quizAI.quizRateC(this,0)' placeholder='How could this "+
sys.tool.n+" have been better? (optional)'><\/textarea><div class='quiz-rate-send' onClick='sys.quizAI.quizRateC(this,1)'><\/div><\/div>",t=document.createElement("DIV");t.className="quiz-rate";t.innerHTML=i;n&&(t.src=n,gObj.settings.prid=n.id.split("x")[0]);obj("quiz-nav").appendChild(t)}},quizRateC:function(n,t){var u=n.className.split("-")[2],i=n.parentNode.parentNode,r=obj("quiz-rate-txt").value;switch(u){case"up":case"down":i.vote=u;i.setAttribute("vote",u);break;case"ftxt":if(i.fv!=r&&r){if(t!==1){clearTimeout(i.tmr);i.tmr=setTimeout(function(n){return function(){sys.quizAI.quizRateC(n,1)}}(n),1e3);return}}else return}t&&xSend({s:"Quiz.AI_Rate",d:"tp="+(i.src&&i.src.tp?i.src.tp:"Prompts")+"&prid="+(!gObj.settings||!gObj.settings.prid?0:gObj.settings.prid)+(i.rid?"&id="+i.rid+"&ep="+i.ep:"")+(gObj.id?"&ref="+gObj.id+"x"+gObj.ep+"-"+gObj.tbl:"")+"&vote="+(i.vote?i.vote:"")+"&txt="+encodeURIComponent(r),wait:i,itm:i,fv:r,json:1,cb:function(n,t){n.id&&(t.itm.rid=n.id,t.itm.ep=n.ep,t.itm.fv=t.fv)}})},loadHash:function(){var n=document.location.hash+"";if(n.substr(0,3)=="#AI"){var t=n.substr(3).split("x"),i=parseFloat(t[0]),r=t[1];i&&(sys.quizAI.loadWin(),setWait(1),sys.qai.buildCheck(i,r,1))}else
sys.init(0,function(){qsV("src")=="aiemail"&&(sys.quizAI.loadWin(),sys.init("qm-load-cb",function(){sys.quizAI.quizRate()}))})},loadWin:function(){if(document.body.getAttribute("p")!="Pricing"&&!sys.qai)
{var n=sys.getRCTA("Build AI Btn",sys.quizAI.prompts.build),t=sys.getRCTA("AI Prompt",sys.quizAI.prompts.placeholders).replace(/[\']Build (Quiz|Survey)[\']/gi,"'"+n+"'"),i=typeof cUser=="object"&&cUser&&cUser.aVis&&qsV("adv")=="y"?0:1;sys.create({id:"qai",template:"window",cn:"with-tabs use-grid",model:"3.5",vn:"a",typeName:sys.tool&&sys.tool.n?sys.tool.n:"Quiz",grow:0,close:1,batchIDX:1,visible:0,title:"",msg:"<div class='win-error'><\/div><div class='qai-prog'><div class='qai-prog-l'><\/div><div class='qai-prog-b'><div><\/div><\/div><div class='qai-tips'><div class='qai-tips-b' onClick='sys.qai.setTip(-1)'><\/div><div class='qai-tips-f' onClick='sys.qai.setTip(1)'><\/div><div class='qai-tips-i'><\/div><\/div><div class='qai-em'><div class='qai-em-h'><\/div><input id='qai-em-inp' type=email value='' placeholder='Email'><div class='qai-em-send' onClick='sys.qai.emSave()'><\/div><\/div><\/div>",tt:{n:3e4,min:1e4,max:18e4,tip:15e3},ptxt:t,buildtxt:n,slabels:sys.quizAI.prompts.slabels,elabels:sys.quizAI.prompts.elabels,tips:sys.quizAI.prompts.tips,buttons:{ok:{visible:0},cancel:{visible:0}},tipIDX:0,tipTMR:0,inputs:{qaitxt:{n:"txt",label:"",template:"win-textarea",placeholder:t,height:"120px",css:"border:0;",icss:"width:100%; font-size:16px; padding:10px; margin:0;"},qaiqt:{n:"qtype",label:"",hide:sys.tool&&sys.tool.n=="Survey"?1:0,template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"quiz",txt:"Scored Quiz / Trivia Quiz"},{value:"type",txt:"Type Quiz / Personality Quiz"},{value:"survey",txt:"Survey"}]},qaipp:{n:"purpose",hide:1,label:"",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"",txt:"What is the purpose of your quiz?"},{value:"the fun of",txt:"Fun"},{value:"educational assessment of",txt:"Educational Assessment"},{value:"educational revision of",txt:"Educational Revision"},{value:"training of",txt:"Training"},{value:"marketing to",txt:"Marketing"},{value:"a competition for",txt:"Competition"},{value:"obtaining feedback from",txt:"Feeeback"},{value:"research on",txt:"Research"},{value:"other",txt:"Other"}]},qaidf:{n:"d",hide:1,label:"",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"",txt:"How hard should it be?"},{value:"easy",txt:"Easy"},{value:"difficult",txt:"Medium"},{value:"very difficult",txt:"Hard"}]},qaiau:{n:"audience",hide:1,label:"",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"",txt:"Who is your audience?"},{value:"students",txt:"Students"},{value:"teachers",txt:"Teachers"},{value:"employees",txt:"Employees"},{value:"job candidates",txt:"Job Candidates"},{value:"customers",txt:"Customers"},{value:"website visitors",txt:"Website Visitors"},{value:"event attendees",txt:"Event Attendees"},{value:"research participants",txt:"Research Participants"},{value:"other",txt:"Other"}]},qaiag:{n:"age",hide:1,label:"",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"",txt:"Age range of your audience?"},{value:"in primary school",txt:"Primary School"},{value:"in high school",txt:"High School"},{value:"young adults",txt:"Young Adults"},{value:"adults",txt:"Adults"},{value:"older adults",txt:"Older Adults"},{value:"under 5 years old",txt:"5 or under"},{value:"aged 6-7",txt:"6-7"},{value:"aged 8-9",txt:"8-9"},{value:"aged 10-11",txt:"10-11"},{value:"aged 12-13",txt:"12-13"},{value:"aged 14-15",txt:"14-15"},{value:"aged 16-17",txt:"16-17"},{value:"aged 18-19",txt:"18-19"},{value:"aged 20-24",txt:"20-24"},{value:"aged 25-29",txt:"25-29"},{value:"aged 30-39",txt:"30-39"},{value:"aged 40-59",txt:"40-59"},{value:"aged 60-79",txt:"60-79"},{value:"aged 80 or older",txt:"80+"},{value:"everyone",txt:"Everyone"}]},qaiq:{n:"q",label:"",lwidth:0,template:"win-select",cn:"win-mvalue",type:"number",format:"int",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:30,txt:"30 Questions"},{value:20,txt:"20 Questions"},{value:10,txt:"10 Questions"},{value:5,txt:"5 Questions"}]},qaiafs:{n:"adv.fast",hide:i,label:"Fast",template:"win-check"},qaiafm:{n:"adv.multi",hide:i,label:"Multi Thread",template:"win-check",value:1,checked:!0},qaisve:{nosave:1,template:"button",cn:"cta-a cta-big btn-ai-build",caption:n,cb:function(){sys.qai.buildQuiz()}}},onCreate:function(){var n=this,t;n.tips.push(n.tips[0]);t=n.obj(".qai-tips-i",1);n.tips.forEach(function(n){n.dom=document.createElement("DIV");n.dom.className="qai-tips-n";n.dom.innerHTML=n.n;t.appendChild(n.dom)});t.style.width="calc("+n.tips.length*100+"% + "+n.tips.length*140+"px)"},onShow:function(){var n=this;n.dom.setAttribute("wait",0);n.dom.setAttribute("timeout",0);n.obj(".btn-ai-build",2).setAttribute("Caption",n.isSuggest?"Add Questions":n.inputs.qaisve.caption)},onHide:function(){var n=this;return(n.isSuggest=0,n.dom&&n.dom.getAttribute("wait")=="1"&&n.dom.getAttribute("timeout")!="1")?(sys.qaic||sys.create({id:"qaic",template:"window",blur:0,visible:0,title:"Cancel AI "+n.typeName+"?",msg:"Are you sure you wish to cancel<br>the building of your AI "+
n.typeName+"?",buttons:{ok:{caption:"Cancel Now"},cancel:{caption:"Continue Building"}},okCB:function(){var n=sys.qai;return n.endProg(0),n.show(0),!0}}),sys.qaic.show(1),!1):!0},setErr:function(n){var
t=this;t.obj(".win-error",1).innerHTML=n;n?setTimeout(function(n){return function(){n.dom.setAttribute("error",1)}}(t),100):t.dom.removeAttribute("error")},startProg:function(){var n=this,e=0,o=n.values().q,r,t,i,u,f,s;for(n.labels=copyObj(n.slabels),clearTimeout(n.tipTMR),clearTimeout(n.timeoutTMR),r=n.labels.length*.25/o,t=0;t<o;t++)sys.qai.labels.splice(5+t*2,0,{n:"Creating Question "+(t+1),z:r}),sys.qai.labels.splice(5+t*2+1,0,{n:"Creating Answers to Q"+(t+1),z:r});for(t=0;t<n.labels.length;t++)i=n.labels[t],i.z=i.z?i.z:1,e+=i.z,i.idx=t;u=0;n.labels.forEach(function(t){t.d=n.tt.n*(t.z/e);clearTimeout(t.tmr);t.tmr=setTimeout(function(n,t){return function(){n.setL(t)}}(n,t),u);u+=t.d});f=n.obj(".qai-prog-b > DIV");n.sd=(new Date).getTime();f.style.cssText="";s=n.dom.offsetWidth;n.dom.setAttribute("wait",1);n.dom.wait=1;n.timeoutTMR=setTimeout(function(n){return function(){n.dom.setAttribute("timeout",1);var t=n.obj(".qai-em-h",2),i=sys.quizAI.prompts.timeout;t&&i&&(t.setAttribute("thead",i[0]),t.setAttribute("tmsg",i[1]));n.endProg(0);n.dom.wait=1;n.dom.setAttribute("wait",1)}}(n),n.tt.max);setTimeout(function(n){return function(){n.style.width="100%"}}(f),100);setTimeout(function(n,t){return function(){n.setPD(t*2-t/2)}}(n,n.tt.n),n.tt.n/2);n.extend=setTimeout(function(n){return function(){n.runExtend()}}(n),n.tt.n-n.labels[n.labels.length-1].d-100);n.setTip(0)},setTip:function(n){var t=this,u,i,r;clearTimeout(t.tipTMR);i=t.obj(".qai-tips-i",1);t.tipIDX+=n;r=0;t.tipIDX>=t.tips.length&&(t.tipIDX=0,r=1);t.tipIDX<0&&(t.tipIDX=t.tips.length-1,r=1);r&&(i.style.transition="none",i.style.webkitTransition="none",u=i.offsetWidth,i.style.left="calc("+t.tipIDX*-100+"% - "+t.tipIDX*140+"px)",u=i.offsetWidth,i.style.transition="",i.style.webkitTransition="",t.tipIDX+=n);i.style.left="calc("+t.tipIDX*-100+"% - "+t.tipIDX*140+"px)";t.dom.getAttribute("wait")!="0"&&(t.tipTMR=setTimeout(function(n){return function(){n.setTip(1)}}(t),t.tt.tip))},setPD:function(n){var i=this,t=i.obj(".qai-prog-b > DIV"),r;t.style.width=parseFloat(getComputedStyle(t).width)+"%";t.style.transitionDuration=n+"ms";r=t.offsetWidth;t.style.width="100%"},runExtend:function(){var n=this,t;clearTimeout(n.extend);n.labels.forEach(function(n){clearTimeout(n.tmr)});var r=(new Date).getTime(),u=r-n.sd,i=n.tt.max-u;n.setPD(i);t=n.labels.pop();n.elabels.forEach(function(t){t.z||(t.z=1,t.ext=1);t.idx=n.labels.length;n.labels.push(t)});t.idx=n.labels.length;n.labels.push(t);n.progDis(i)},endProg:function(n){var t=this,u=(new Date).getTime(),f=u-t.sd,r,i;if(n&&!t.labels){n();return}if(clearTimeout(t.extend),t.labels&&t.labels.forEach(function(n){clearTimeout(n.tmr)}),clearTimeout(t.tipTMR),clearTimeout(t.endTMR),clearTimeout(t.timeoutTMR),n===0){setWait(0,t.dom);clearTimeout(t.checkTmr);return}f>t.tt.min?(r=t.labels[t.labels.length-1],i=0,!r.shown||u-r.shown>1e3?(t.setL(r),i=1e3-(r.shown?u-r.shown:0)):i=1,i+=500):(i=t.tt.min-f,i=i<500?500:i,t.progDis(i));t.setPD(i);t.endTMR=setTimeout(function(n,t){return function(){setWait(0,n.dom);clearTimeout(n.checkTmr);clearTimeout(n.timeoutTMR);n.show(0);t&&t()}}(t,n),i)},progDis:function(n){var t=this,r=0,i=-1,u=0;t.labels.forEach(function(n){clearTimeout(n.tmr);n.shown||(i==-1&&(i=n.idx),r+=n.z)});t.labels.forEach(function(f){f.idx>=i&&(f.d=n*(f.z/r),f.tmr=setTimeout(function(n,t){return function(){n.setL(t)}}(t,f),u),u+=f.d)})},setL:function(n){var t=this;t.lidx=n.idx;t.obj(".qai-prog-l").setAttribute("label",n.n);n.shown=(new Date).getTime()},endMsg:function(n){var t=this;n&&(t.quizLink=n);sys.create({id:"qaif",template:"window",title:t.typeName+" Created",close:1,buttons:{ok:{visible:0},cancel:{visible:0}},msg:"Your "+t.typeName.toLowerCase()+" has been created by the AI, use the buttons below to take the "+t.typeName.toLowerCase()+" and/or edit it.<br><br><div class='btn-ai'><a class='cta-a cta-small' onClick=\"gEvent('AI','End','Edit');\" href='javascript:sys.qaif.show(0);sys.qai.editQuiz();void(0);'>Edit your "+
t.typeName+"<\/a><a class='cta-a cta-small' href='"+(n?"/Q"+n+"' target=_blank":"javascript:sys.qai.takeQuiz();void(0);'")+" onClick=\"gEvent('AI','End','Take');\">Take your "+t.typeName+"<\/a><\/div>",onHide:function(){!sys.qai.fromDash&&sys.mob&&sys.mob.check()&&sys.mob.load()}});this.fromDash||sys.quizAI.quizRate()},takeQuiz:function(){var n=sys.qai;!n.quizLink&&typeof gObj&&gObj.link&&(n.quizLink=gObj.link);n.quizLink?window.open("/Q"+n.quizLink,"_blank",""):(!this.fromDash&&sys.mob&&sys.mob.check()&&sys.mob.load(),obj("quiz-pvw").submit())},editQuiz:function(){var n=sys.qai;n.fromDash&&sys.page("editor","",n.quizRef,function(){sys.editor.frameCB=function(n){return function(t){var r=t.frame.contentWindow.sys,i=function(n){return function(){n.qlist?(n.quizAI.quizRate&&n.quizAI.quizRate(),setWait(0)):(setWait(1),setTimeout(i,300))}}(r,n);i()}}(n.quizRef)})},buildQuiz:function(){var n,t,u,s,r,f,e,i,o;for(sys.runInit("ai-start-cb",0),!this.fromDash&&sys.mob&&sys.mob.check()&&sys.mob.unload(),n=this,t=n.values(),n.emsg="",n.setErr(""),u=0;u<n.inputs.length;u++)n.inputs[u].dom.removeAttribute("error");if(t.adv&&t.adv.fast&&(n.tt.min=300),(!t.txt||t.txt.length<3)&&(n.emsg="Please let us know what your "+
n.typeName.toLowerCase()+" is about with at least a few words",n.inpID.txt.dom.setAttribute("error",n.emsg)),t.txt.length>1500&&(n.emsg="Your prompt is too long, please use a shorter prompt or enter a link to a wikipedia page",n.inpID.txt.dom.setAttribute("error",n.emsg)),(!t.q||t.q>30)&&(n.emsg="The number of questions is limited to 30 in the free version",n.inpID.q.dom.setAttribute("error",n.emsg)),n.emsg){s=n.dom.offsetHeight;gEvent("AI","Error",n.emsg,t.q);n.setErr(n.emsg);return}r=n.typeName=="Quiz"?"quiz":"survey";t.qtype&&(r=t.qtype);r=r+(n.vn?"_"+n.vn:"");gEvent("AI","Send",n.ptxt);n.btxt&&gEvent("AI","Send by Btn",n.btxt);n.buildtxt&&gEvent("AI","Send by Build Btn",n.buildtxt);n.startProg();n.gs&&(f=n.gs);n.qs&&(e=n.qs);sys.aiBtnStream?(sys.aiBtnFirst||(sys.aiBtnFirst=1,attachE(window,["wheel","mousedown","touchstart"],function(){sys.quizAI.nofocus=1;obj("quiz-maker").setAttribute("nofocus",1)}),i=document.createElement("DIV"),i.className="assist-scroll",obj("quiz-maker").appendChild(i),attachE(i,"click",function(){var n,t,i,r;sys.quizAI.nofocus=0;obj("quiz-maker").setAttribute("nofocus",0);sys.quizAI.stream&&(n=sys.quizAI.stream.q);n||(t=obj("#quiz-questions > .quiz-qi:last-of-type",1),t&&t.o&&(n=sysO.qlist.find(t.o)));n&&(i=findPos(n.dom),r=i.y+n.dom.offsetHeight+160,r>window.innerHeight&&easeScroll(i.ya-i.y+(r-window.innerHeight)))}),i=document.createElement("DIV"),i.className="assist-cancel",obj("quiz-maker").appendChild(i),attachE(i,"click",function(){sys.quizAI.streamStop()})),sys.quizAI.nofocus=0,obj("quiz-maker").setAttribute("nofocus",0),o={jtype:"questions",isNew:n.isSuggest?0:1,qn:t.q,q:t.txt,quiz:{quiz:1,type:2,survey:3}[t.qtype],age:t.age},n.isSuggest&&(o.ex=sys.quizAI.exampleQ()),sys.quizAI.streamQ(o,function(){sys.quizAI.addMoreB(function(){sys.quizAI.loadWin();var n=sys.qai;n.isSuggest=1;n.show(1)})},function(){var n=sys.qai;n.endProg(0);n.show(0)})):xSend({s:"Quiz.Build_AI",d:n.values(1)+"&model="+encodeURIComponent(n.model)+"&tp="+encodeURIComponent(r)+(f?"&gs="+encodeURIComponent(JSON.stringify(f)):"")+(e?"&qs="+encodeURIComponent(JSON.stringify(e)):"")+(n.fromDash?"&fsave=y":""),json:1,wait:0,win:n,cb:n.buildEnd,ecb:n.buildError})},emShow:function(n,t){var r=this,i;r.threadID=n;t&&(r.threadPass=t);i=r.obj(".qai-em INPUT",1);i.value||i.vset||typeof cUser!="object"||!cUser.em||(i.value=cUser.em,i.vset=1);r.obj(".qai-em",1).setAttribute("show",n?1:0)},emSave:function(){var n=this;xSend({s:"Quiz.Build_AI_Email "+n.threadID+";"+n.threadPass,d:"em="+encodeURIComponent(n.obj(".qai-em INPUT",1).value),json:1,wait:n.obj(".qai-em",1),win:n,cb:function(n,t){if(!n.thread){t.ecb(n,t);return}
var i=t.win;i.endProg(0);i.show(0)},ecb:function(n,t){t.win.setErr(!n||!n.error?"Unable to save email, please try again later":n.error)}})},buildCheck:function(n,t,i){var r=this;xSend({s:"Quiz.Build_AI_Check "+
n+";"+t,d:"",json:1,wait:0,win:r,frc:i,cb:r.buildEnd,ecb:r.buildError})},buildError:function(n,t){t.win.endProg(0);/A timeout occurred/i.test(n.error?n.error:n)&&(n={error:"A timeout has occurred and your "+
t.win.typeName.toLowerCase()+" was unable to be built in time, please try again later."});console.log("error",n);var i=!n||!n.error?"Unable to build "+t.win.typeName.toLowerCase()+", please try again later":n.error;gEvent("AI","Error",i);t.win.visible?t.win.setErr(i):sys.create({id:"aierr",template:"window",cn:"with-tabs use-grid",title:"",msg:i,objtype:"ok"})},buildEnd:function(n,t){var i=t.win;if(i.visible||t.frc){if(n.thread){sys.qai.emShow(n.thread,n.pass);clearTimeout(i.checkTmr);i.checkTmr=setTimeout(function(n,t){return function(){sys.qai.buildCheck(n,t)}}(n.thread,n.pass),5e3);return}if(!n.list)return i.buildError(n,t);i.endProg(function(n){return function(){var t=sys.qai,i;t.fromDash||(gObj.title=n.title+" - take the "+t.typeName.toLowerCase(),sys.qlist.clear(1),sys.qlist.initNav(n),n.id&&(document.location.hash="QP-"+n.id+"x"+n.ep+"-"+n.tbl),sys.qlist.changed(),i=obj("quiz-saved"),i&&i.setAttribute("saved","Reset"));t.quizRef=n.id+"x"+n.ep+"-"+n.tbl;sys.runInit("ai-end-cb",0);t.endMsg(n.link);gEvent("AI","Created","")}}(n))}},okCB:function(){return gEvent("AI","Cancel",""),sys.mob.check()&&sys.mob.unload(),!0},cancelCB:function(){return gEvent("AI","Cancel",""),!0}});sys.qai.values({txt:"",q:10,d:"",age:"",audience:"",purpose:"",qtype:sys.qai.typeName=="Quiz"?"quiz":"survey",adv:{fast:0,multi:1}});sys.runInit("ai-win-cb",0)}},suggestQ:function(){var t=sys.quizAI.exampleQ(),n=sys.aitopicw;t.length>500?(opt=n?n.values():{qn:5},opt.jtype="questions",opt.ex=t,opt.tags&&(opt.q=opt.tags,delete opt.tags),this.streamQ(opt)):(n||sys.create({id:"aitopicw",msg:"<div class='qp-subtab-c'><div tab='aiset'><\/div><div tab='aitag'><\/div><\/div>",title:"",cn:"with-tabs use-grid ai-suggestw",close:1,buttons:{ok:{visible:0},cancel:{visible:0}},tipIDX:0,tipTMR:0,inputs:[{n:"q",label:"",template:"win-textarea",placeholder:"What is the topic of your quiz?",height:"120px",css:"border:0;",icss:"width:100%; font-size:16px; padding:10px; margin:0;"},{n:"qtype",label:"",hide:sys.tool&&sys.tool.n=="Survey"?1:1,template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"quiz",txt:"Scored Quiz / Trivia Quiz"},{value:"type",txt:"Type Quiz / Personality Quiz"},{value:"survey",txt:"Survey"}]},{n:"age",hide:0,label:"",template:"win-select",cn:"win-mvalue",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:"",txt:"Age range of your audience?"},{value:"in primary school",txt:"Primary School"},{value:"in high school",txt:"High School"},{value:"young adults",txt:"Young Adults"},{value:"adults",txt:"Adults"},{value:"older adults",txt:"Older Adults"},{value:"under 5 years old",txt:"5 or under"},{value:"aged 6-7",txt:"6-7"},{value:"aged 8-9",txt:"8-9"},{value:"aged 10-11",txt:"10-11"},{value:"aged 12-13",txt:"12-13"},{value:"aged 14-15",txt:"14-15"},{value:"aged 16-17",txt:"16-17"},{value:"aged 18-19",txt:"18-19"},{value:"aged 20-24",txt:"20-24"},{value:"aged 25-29",txt:"25-29"},{value:"aged 30-39",txt:"30-39"},{value:"aged 40-59",txt:"40-59"},{value:"aged 60-79",txt:"60-79"},{value:"aged 80 or older",txt:"80+"},{value:"everyone",txt:"Everyone"}]},{n:"qn",hide:1,label:"",lwidth:0,template:"win-select",cn:"win-mvalue",type:"number",format:"int",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:40px;",options:[{value:30,txt:"30 Questions"},{value:20,txt:"20 Questions"},{value:10,txt:"10 Questions"},{value:5,txt:"5 Questions"}]},{nosave:1,template:"button",cn:"cta-a cta-big ai-suggest",caption:"Add Questions",cb:function(){sys.aitopicw.getTags()}},{n:"tags",tidx:1,label:"Select the categories that you want to see in your quiz",template:"win-checklist",cn:"ai-checklist",css:"border:0px;",boxcss:"width:100%",icss:"width:100%; height:300px;",type:"checkbox",options:{rtype:"txt",nodup:1,list:[]}},{nosave:1,tidx:1,template:"button",cn:"cta-a cta-big ai-suggest",caption:"Add Questions",cb:function(){sys.aitopicw.buildQuiz()}}],onCreate:function(n){var r,u,t,i;loadTabs();r=n.obj(".win-msg > .qp-subtab-c > DIV",3);n.tabs=r[0].parentNode.tabs;for(u in n.inputs)t=n.inputs[u].tidx,i=typeof t=="string"?n.obj("DIV[tab='"+t+"']",2):r[t?t:0],i.p=n.dom,i.appendChild(n.inputs[u].dom)},onShow:function(n){attachE(window,"scroll",n.onScroll.bind(n))},onHide:function(n){dettachE(window,"scroll",n.onScroll)},onScroll:function(){var n=this,t,i;if(n&&n.visible&&(t=n.inpID.tags.options.p.parentNode,i=t.scrollHeight-t.scrollTop-t.offsetHeight,i<50)){n.scrollEnd();return}},scrollEnd:function(){var t=this,n=t.values(),i;n.jtype="tags";n.tags&&(n.q=n.tags,delete n.tags);i=t.exampleT();i&&(n.more=i);t.moreTags(n)},getTags:function(){var n=this,t=n.values(),i,r;t.jtype="tags";n.tabs.t[1].show();i=n.inpID.tags.options;i.clear(1);r={value:1,txt:t.q};i.load({c:1,list:[r]});r.inp.checked=!0;n.inpID.tags.inp.value=t.q;n.moreTags(t)},moreTags:function(n){var t=this,i,r;t.loading||t.nomore||(t.loading=1,t.waiting=1,setWait(1,t.dom),i=t.inpID.tags.options,r=i.list.length,sys.quizAI.streamQ(n,function(n,t,i){return function(){n.loading=0;setWait(0,n.dom);n.waiting=0;var r=t.list.length;r-i<3&&(n.nomore=1)}}(t,i,r),function(n,t,i){return function(){if(n.waiting!=2){var r=t.list.length;r-i>3&&(n.waiting=2,setWait(2,n.dom))}}}(t,i,r)))},buildQuiz:function(){var t=this,n=t.values();n.isNew=sys.qlist.list.length==0?1:0;n.tags&&(n.q=n.tags,delete n.tags);n.qn=5;sys.quizAI.streamQ(n,function(){sys.quizAI.addMoreB()});t.show(0)},exampleT:function(){return JSON.stringify(this.inpID.tags.options.json(0,function(n){return{v:n.txt}}).list)}}),n=sys.aitopicw,n.values({q:"",qtype:"quiz",age:"",qn:5}),n.show(1))},addMoreB:function(n){var t=obj("quiz-add-q"),i;!obj(".quiz-addm")&&t&&(t.className=t.className+" quiz-addm",i=t.cloneNode(!0),t.parentNode.appendChild(i),t.className=t.className.replace(/cta[\-]a/i,"cta-b"),n||(n=function(){sys.quizAI.suggestQ()}),attachE(i,"click",n))},readData:function(n,t,i,r){return fetch(n,t).then(function(n,t){return function(i){return sys.quizAI.reader=i.body.getReader(),sys.quizAI.readStream(n,t)}}(i,r)).catch(function(n){console.log("rd",n)})},readStream:function(n,t){return sys.quizAI.reader.read().then(function(n,t){return function(i){var f=sys.quizAI,r=f.stream,s=i.done,u=i.value,e,o;if(r.cbit=f.appendBuffer(r.cbit,u),r.isEnd=s?1:0,r.abit=f.appendBuffer(r.abit,u),u&&u.length)for(e=0;e<u.length;e++)o=u[e]<192?1:u[e]<224?2:u[e]<240?3:4,o>1?r.wl=o-1:r.wl>0&&r.wl--;return r.isStart&&(r.isStart=0,f.streamStart()),(r.isEnd||r.cbit&&!r.wl)&&(r.chunks=r.chunks.concat((new TextDecoder).decode(r.cbit).split("")),r.cbit=0,r.chunks[0]=="{"&&/^[\{][\"]error[\"]/.test(r.chunks.join(""))?r.isError=!0:f.processStream(0,t),r.isEnd&&f.streamEnd(n)),s?void 0:sys.quizAI.readStream(n,t)}}(n,t)).catch(function(n){console.log("st",n)})},streamQ:function(n,t,i){var e,r,o,u,f,s,h;n||(n={});e={};r=n.jtype;r||(r="questions");delete n.jtype;o=this.streamInit(r=="dbstream"?"questions":r,n);e.signal=o.control.signal;t?o.cancelCB=t:delete o.cancelCB;u={qs:"",fd:""};for(f in n)({isNew:1,rpt:1,local:1,selFirst:1,speed:1})[f]||(s={ex:1,more:1,types:1}[f]?"fd":"qs",u[s]+=n[f]?"&"+f+"="+encodeURIComponent(n[f]):"");h="/api/AI."+r+(u.qs?"?"+u.qs.substr(1):"");u.fd&&(e.method="POST",e.body=u.fd.substr(1));try{sys.quizAI.readData(h,e,t,i)}catch(c){}},streamT:function(n){var t=this.streamInit(n.jtype?n.jtype:"questions",n);t.data="1¦What is the scientific name for the American bison?¦0¦5¦Bison bison=5»Bison americanus=0»Bison bison bison=0»Bison bison athabascae=0¦¦The scientific name for the American bison is Bison bison. The genus name 'Bison' refers to the group of large herbivorous mammals in the Bovidae family, while the species name 'bison' specifically identifies the American bison.¦60%¦Animals»Mammals»American BisonÑ2¦Which of these animals is known for its playful behavior and sliding on snow or mud?¦1¦3¦North American river otter=3»American black bear=0»American bison=0»North American beaver=0¦¦The North American river otter is known for its playful behavior and sliding on snow or mud. They are highly social animals and engage in various playful activities, including sliding down slopes as a form of entertainment.¦40%¦Animals»Mammals»North American River OtterÑ3¦What is the largest land mammal in North America?¦0¦7¦American bison=7»North American river otter=0»American black bear=0»North American beaver=0¦¦The American bison is the largest land mammal in North America. Adult males can weigh up to 2,000 pounds and stand over six feet tall at the shoulder. They are known for their massive size and iconic hump on their shoulders.¦80%¦Animals»Mammals»American BisonÑ4¦Which of these animals is known for its ability to climb trees?¦1¦4¦American black bear=4»North American river otter=0»American bison=0»North American beaver=0¦¦The American black bear is known for its ability to climb trees. They have strong claws and muscular limbs that allow them to easily ascend trees in search of food or to escape from predators.¦50%¦Animals»Mammals»American Black BearÑ5¦What is the average lifespan of an American bison in the wild?¦0¦6¦20-25 years=6»10-15 years=0»30-35 years=0»5-8 years=0¦¦The average lifespan of an American bison in the wild is 20-25 years. However, some individuals have been known to live up to 40 years in captivity. Factors such as predation, disease, and habitat availability can affect their lifespan in the wild.¦70%¦Animals»Mammals»American BisonØ";t.next=function(){var t=sys.quizAI,n=t.stream,i,r;n.isStart&&(n.isStart=0,t.streamStart());i=Math.round(Math.random()*10)+1;r=Math.round(Math.random()*50)+50;n.opt.full?(n.chunks=n.data.split(""),n.data=""):(n.chunks=n.chunks.concat(n.data.substr(0,i).split("")),n.data=n.data.substr(i));t.processStream(0);n.data?n.dtmr=setTimeout(n.next,r):t.streamEnd()};t.dtmr=setTimeout(t.next,300)},streamInit:function(n,t){var i,r;return this.streamStop(),i=sys.quizAI.stream,this.nofocus=0,r=sys.assist,r&&(r.setAct(n),r.noFocus(0)),i=sys.quizAI.stream={delay:!t||!t.speed?25:t.speed,actq:1,rk:0,jtype:n,cbit:0,abit:0,wl:0,chunks:[],store:{},enc:"",midx:0,sidx:0,isEnd:0,q:0,ans:0,buffer:[],stop:0,cancel:0,isStart:1,prog:0,stt:performance.now(),qk:0,rpt:t.rpt?t.rpt:0,opt:t},t.local&&(i.local=t.local),i.control=new AbortController,i.st=i.lt=performance.now(),i.btmr=setTimeout(this.streamBufferN.bind(this),i.delay),(n=="questions"||n=="answers")&&(sys.quizAI.qWin.sys.qlist.stream=1,sys.quizAI.qWin.obj("quiz-maker").setAttribute("stream",1),this.streamProg(0)),i},streamBufferA:function(n){var t=sys.quizAI.stream,i,r,f,u;if(n)if(n.c&&n.c.length>1)for(i=0;i<n.c.length;i++)r=copyObj(n),r.c=n.c[i],t.rpt==1&&console.log(t.midx,t.sidx,r),t.buffer.push(r);else t.rpt==1&&console.log(t.midx,t.sidx,n),t.buffer.push(n);t.instant&&(t.instant=0,f=performance.now(),u=t.delay-(f-t.lt),u<1?this.streamBufferN():t.btmr=setTimeout(this.streamBufferN.bind(this),u))},streamBufferN:function(){var s=performance.now(),t=this.stream,r=0,f,n,i,e,o,u;if(clearTimeout(t.btmr),!t.stop){for(f=0;(r||f<t.actq)&&!t.instant;f++)if(n=t.buffer.shift(),n)if(t.rpt==2&&console.log(n,t.store,t),t.instant=0,i=t.delay,(n.d||n.d===0)&&(i=n.d),n.i&&typeof n.i=="string"&&(n.i=sys.getProp(t,n.i)),t.skipto&&n.tp!="store"&&(n.tp!="act"||(","+t.skipto+",").indexOf(","+n.n+
",")==-1))r=1;else{n.tp!="store"&&(t.afterSkip&&t.afterSkip(),delete t.skipto,delete t.afterSkip);r=0;switch(n.tp){case"value":if(n.i&&(n.i.value+=n.c,!this.nofocus))try{n.i.focus()}catch(h){}break;case"html":if(n.i&&(n.i.innerHTML+=n.c,n.i.offsetHeight||(r=1),!this.nofocus))try{n.i.focus();e=window.getSelection();e.selectAllChildren(n.i);e.collapseToEnd()}catch(h){}break;case"attr":n.i&&(o=n.i.getAttribute(n.n),n.i.setAttribute(n.n,(o?o:"")+n.c));break;case"act":this.processAct(n.n);n.rate&&sys.quizAI.quizRate(n.rate);i=0;break;case"store":n.c&&sys.setProp(t.store,n.n,n.c,2);n.o&&(v=t.store[n.n],n.fmt=="int"&&(v=parseFloat(v)),(v||v===0)&&sys.setProp(t,n.o,v),delete n.o,delete t.store[n.n])}if(n.o)if(typeof n.o=="string")sys.setProp(t,n.o,n.c,2);else for(u=0;u<n.o.length;u++)sys.setProp(t,n.o[u],n.c,2);n.cb&&n.cb(t,n);(n.instant||t.opt&&t.opt.full)&&(r=1)}else t.instant=1;t.instant||(i=i-(performance.now()-s),t.lt=s,i<1?this.streamBufferN():t.btmr=setTimeout(this.streamBufferN.bind(this),i))}},streamStart:function(){var n=this.stream;sys.assist&&sys.assist.think("");n.opt&&n.opt.isNew&&(sys.quizAI.qWin.sys.qlist.clear(1),sys.quizAI.qWin.sys.oc.clear(1),sys.quizAI.qWin.sys.qresults.clear(1),delete sys.quizAI.qWin.gObj.qtype,delete sys.quizAI.qWin.gObj.context,sys.quizAI.qWin.sys.tdrop.showType());n.opt&&(n.opt.isNew||n.opt.quiz)&&!sys.quizAI.qWin.gObj.qtype&&sys.quizAI.qWin.sys.tdrop.global.setC({},{},sys.quizAI.qWin.sys.tdrop.find(n.opt.quiz?n.opt.quiz:1),sys.quizAI.qWin.sys.tdrop)},streamEnd:function(n){var t=sys.quizAI.stream,i,r,u;if(t.isError&&(t.emsg=JSON.parse(t.chunks.join("")),i=sys.assist,i))
i.onError(t.emsg);r=0;t.chunks&&(u=t.chunks.pop(),u==String.fromCharCode(216)&&(r={tp:"Stream",id:t.chunks.join("")}));this.streamBufferA({tp:"act",n:"end",cb:n,rate:r});t&&t.control&&delete t.control},streamStop:function(){var n=sys.quizAI.stream;if(n){if(n.stop=1,n.cancel=1,clearTimeout(n.dtmr),n.control)try{n.control.abort()}catch(t){}else delete n.cancelCB;this.processAct("end");n.cancelCB&&(n.cancelCB(n),delete n.cancelCB)}},streamK:function(n){var t=this.stream;if(n.keyCode==27&&(t.delay=0,t.actq=99),!t.stop)return preventDefault(n,1),!0},processStream:function(n,t){var i=sys.quizAI.stream,f=sys.assist,u=0,o=sys.quizAI.qWin.sys.qlist,r,e,s;if(o){if(i.midx==0)switch(i.jtype){case"questions":i.midx=1;i.sidx=0;i.itype="";break;case"answers":i.q=o.sel;this.streamBufferA({tp:"act",n:"qs",vn:1});i.midx=1;i.sidx=0}for(i.jtype!="answers"||i.opt.ans||(u=1);i.chunks.length&&n<1e4&&!i.endChar;)if(n++,r=i.chunks.shift(),i.enc&&i.enc.length<7)i.enc+=r;else if(e=r.charCodeAt(0),i.enc&&(e=0,i.enc+=r,r={N:209,P:166,A:187,E:61}[i.enc.substr(6,1)],r=r?String.fromCharCode(r):"",i.enc=""),i.jtype=="tags")switch(e){case 209:case 216:i.midx=0;i.store.tag&&(this.processAct("ntag"),i.midx++,i.store.tag="",i.rk++,t&&t(i.rk));break;default:i.store.tag||(i.store.tag="");i.store.tag+=r}else switch(e){case 209:i.midx==3&&i.jtype=="questions"&&this.streamBufferA({tp:"store",n:"qtype",o:"q.qtype",fmt:"int",cb:function(n){o.qTypeC(n.q,n.q.qtype,1)}});i.midx=1;i.sidx=0;i.itype="";break;case 166:if(i.itype=="T")switch(i.midx){case 1:this.streamBufferA({tp:"act",n:"oc",vn:2});break;case 2:this.streamBufferA({tp:"act",n:"oci",vn:1})}else switch(i.midx){case 3:this.streamBufferA({tp:"store",n:"qtype",o:"q.qtype",fmt:"int",cb:function(n){o.qTypeC(n.q,n.q.qtype,1)}});break;case 4:i.sidx=1;u||this.streamBufferA({tp:"act",n:"a",vn:1});break;case 5:u||this.streamBufferA({tp:"act",n:"sc"});i.jtype=="answers"&&i.opt.exp&&this.streamBufferA({tp:"act",n:"cexp",vn:1});break;case 6:i.sidx=0;this.streamBufferA({tp:"act",n:"fa"});break;case 7:i.sidx=0;this.streamBufferA({tp:"act",n:"fa"});break;case 8:i.sidx=0;this.streamBufferA({tp:"act",n:"cat",vn:1})}i.midx++;break;case 61:i.sidx++;i.rpt&&console.log(i.midx,i.sidx,{ac:e,c:r});break;case 64:i.enc=r;i.rpt&&console.log(i.midx,i.sidx,{ac:e,c:r,enc:i.enc});break;case 187:i.midx>7?this.streamBufferA({tp:"act",n:"cat",vn:2,instant:1}):(i.sidx=1,u||(this.streamBufferA({tp:"act",n:"a",vn:2}),i.newA=1));break;case 216:i.endChar=1;break;default:if(i.midx==1&&!i.itype){switch(r){case"T":i.itype=r;break;default:i.itype="Q";i.jtype=="questions"&&this.streamBufferA({tp:"act",n:"q",vn:2})}i.rk++;t&&t(i.rk)}if(i.itype=="T")switch(i.midx+(i.midx==5?i.sidx/10:0)){case 1:r!="T"&&this.streamBufferA({tp:"store",n:"ocid",c:r});break;case 2:this.streamBufferA({tp:"html",i:"ocN",c:r,o:"oc.n"});break;case 3:this.streamBufferA({tp:"html",i:"ocD",c:r,o:"oc.d"})}else{switch(i.midx+(i.midx==5?i.sidx/10:0)){case 2:this.streamBufferA({tp:"value",i:"qInp",c:r,o:"q.q"});break;case 3:this.streamBufferA({tp:"store",n:"qtype",c:r});break;case 4:this.streamBufferA({tp:"store",n:"score",c:r});break;case 5.1:u||(i.hasAns=1,this.streamBufferA({tp:"value",i:"ans.inp",c:r,o:"ans.v",vn:1,cb:function(n,t){if(n.q&&n.q.qtype==2&&n.ans&&n.ans.v&&n.qExp){var i=n.qExp.getAttribute("ans");n.qExp.setAttribute("ans",(i?i:"")+t.c)}}}));break;case 5.2:u||this.streamBufferA({tp:"store",n:"ascore",c:r});break
case 5.3:u||this.streamBufferA({tp:"store",n:"oc",c:r});break;case 6:s="";(i.hasAns||i.newA)&&(s=", ",i.hasAns=0,i.newA=0,f&&f.info({alt:1}));this.streamBufferA({tp:"attr",i:"qExp",n:"ans",c:s+r,d:0});this.streamBufferA({tp:"value",i:"ans.inp",c:r,o:"ans.v",vn:2});break;case 7:this.streamBufferA({tp:"html",i:"qExp",c:r,o:["q.settings.yexp","q.settings.nexp"]});f&&f.info({set:{ex:1,alt:2}});break;case
8:this.streamBufferA({tp:"store",n:"diff",c:r});f&&f.info({set:{ex:2}});break;case 9:this.streamBufferA({tp:"value",c:r,o:"q.tag",vn:1,instant:1})}break}}}},processAct:function(n){var t=sys.quizAI.stream,u=sys.assist,f,nt,w,d,tt,y,g,s,b,c,it,p,rt,h,r,a,l,i,o;if(sys.quizAI.qWin&&sys.quizAI.qWin.sys&&sys.quizAI.qWin.sys.qlist){var e=sys.quizAI.qWin.sys.qlist,v=sys.quizAI.qWin.sys.qresults,k=sys.quizAI.qWin.sys.oc;switch(n){case"q":sys.quizAI.qWin.obj(".quiz-tabs-c",2).tabs.idx==1||sys.quizAI.nofocus||(e.getTab("quiz").show(),easeScroll(0));this.processAct("foc");this.processAct("fq");f=t.q=e.qAdd(0,1,{opt:[]});this.processAct("qs");f.stream=1;f.dom&&(sys.quizAI.allowImages.q&&f.dom.setAttribute("pic",1),f.dom.setAttribute("stream",1));u&&(u.toQ(t.q),u.look("dl",3e3),u.info({item:"Questions",tp:t.q.qtype,qk:t.qk+1,qn:t.opt.qn,clear:1}));break;case"qs":for(f=t.q,t.qInp=e.obj(f,".qi-txt")[0],t.qExp=e.obj(f,".qi-add-score > DIV",2),t.qExp.setAttribute("contenteditable",!0),nt=[],i=0;i<f.opt.length;i++)f.opt[i]&&(f.opt[i].isnew||!f.opt[i].v&&!f.opt[i].pic)?f.opt[i].dom.parentNode.removeChild(f.opt[i].dom):nt.push(f.opt[i]);f.opt=nt;t.store={};break;case"cexp":t.qExp&&(t.qExp.innerHTML="",t.q.settings.yexp=t.q.settings.nexp="");break;case"fq":if(!t||!t.q)return;t.q.qtype==4&&(w=t.q.settings,w.format=3,w.optmax=10,w.optmin=1,w.label={type:"number",low:"",high:"",pic:"",hpic:""});t.ans&&this.processAct("fa");this.processAct("cat");delete t.q.tag;t.q.tags&&t.q.tags.length&&sys.quizAI.allowImages.q&&xSend({s:"AI.iSearch",d:"pg="+t.q.rid+"&q="+encodeURIComponent(t.q.tags.join(" and ")),wait:0,q:t.q,cb:function(n,t){/http/i.test(n)&&(t.q.pic=n,e.update(t.q))}});t.qExp&&t.qExp.removeAttribute("contenteditable");t.q.stream=0;t.q.dom&&t.q.dom.removeAttribute("stream",1);e.update(t.q);t.q.testNew=1;t.q=0;t.ans=0;t.store={};t.qk++;this.streamProg(1);break;case"a":this.processAct("fa");d=0;t.store.score&&(d=parseFloat(t.store.score));y=t.q.qtype==2?d:0;tt=e.nextOIDX(t.q);t.ans={oidx:tt,v:"",score:{y:y,n:0}};t.q.opt.push(t.ans);e.setCol(t.q);e.update(t.q);u&&u.info({ak:tt,an:t.q.opt.length,score:d});break;case"fa":if(t.store.ascore&&t.ans&&(y=parseFloat(t.store.ascore),t.ans.score.y=y?y:0),delete t.store.ascore,t.store.oc&&t.ans&&t.ocL)for(g=t.store.oc.split(","),i=0;i<g.length;i++)if(g[i]&&(s=g[i].split(":"),s[1]=parseFloat(s[1]),s[0]&&s[1])){for(r=0,b=0;!r&&b<t.ocL.list.length;b++)t.ocL.list[b].aiIDX==s[0]&&(r=t.ocL.list[b]);r&&(t.ans.score.oc=(t.ans.score.oc?t.ans.score.oc+",":"")+r.oidx+"="+s[1],r.akntr=(r.akntr?r.akntr:0)+1,r.max=(r.max?r.max:0)+s[1],c=k.find(r.oidx),c&&(c.akntr=(c.akntr?c.akntr:0)+1,c.max=(c.max?c.max:0)+s[1]),t.ocL.update(r),t.ocL.p.removeAttribute("emsg"))}delete t.store.oc;break;case"sc":u&&(u.qVis(t.q),u.look(""));break;case"cat":t.q.tags||(t.q.tags=[]);t.q.tag&&t.q.tags.push(t.q.tag);t.q.tag="";break;case"ntag":it=sys.aitopicw;t.local&&t.local.win&&(it=t.local.win);t.tlist=it.inpID.tags.options;t.tag={value:t.tlist.nextID(),txt:t.store.tag};t.opt&&t.opt.selFirst&&!t.tlist.length&&(t.tag.selected=!0);t.tlist.load({c:1,list:[t.tag]});break;case"oc":if(sys.quizAI.qWin.obj(".quiz-tabs-c",2).tabs.idx==4||sys.quizAI.nofocus||(document.body.setAttribute("hasq",1),e.getTab("results").show(),e.getTab("build").show(),easeScroll(0)),p=t.store.ocid,this.processAct("foc"),o=0,p)for(i=0;!o&&i<k.list.length;i++)r=k.list[i],(r.oidx+""==p+""||r.aiIDX+""==p+"")&&(o=r);if(o)t.skipto="oc,q",t.afterSkip=function(){sys.assist.think("")},u&&(u.think("w"),u.info({head:"Removing duplicate 'Type'",body:"A duplicate type has been found, please wait as it is skipped..."}));else{if(!t.ocB)
{for(rt=v.getByType(6),rt&&(t.ocB=rt[0]),t.ocB||(t.ocB=v.addBlock(v.typeList().find(function(n){return n.rid==6}),v.list[0],1)),t.ocB.values({pics:sys.quizAI.allowImages.oc?1:0,titles:1,matchp:1,typeq:1,rptscore:1,redirect:0}),t.ocB.settings=t.ocB.values(),v.updatePreview(t.ocB,0,2),v.update(t.ocB),t.ocL=sys.quizAI.qWin.sys[t.ocB.items[0].id],h=[],i=0;i<t.ocL.list.length;i++)r=t.ocL.list[i],r.n||r.d||r.pic||h.push(r.oidx);for(i=0;i<h.length;i++)t.ocL.remove(h[i]);for(a=t.ocL.p.childNodes,h=[],l=0;l<a.length;l++)!a[l]||a[l].o&&a[l].o.oidx||a[l].className!="qresult-oc"||h.push(a[l]);for(i=0;i<h.length;i++)h[i].parentNode.removeChild(h[i])}o=t.oc=t.ocL.addNew(1);t.ocN=t.ocL.obj(o.oidx,".qresult-oc-n",2);t.ocD=t.ocL.obj(o.oidx,".qresult-oc-d",2);t.ocP=t.ocL.obj(o.oidx,".qresult-oc-pic",2);o.stream=1;o.dom&&o.dom.setAttribute("stream",1);t.ocL.onChange(o,"oc");p&&(t.oc.aiIDX=p);t.ocL.p.setAttribute("cq",t.ocL.list.length);u&&(u.toQ(t.oc),u.look("dl",3e3),u.info({item:"Types",tp:"Result",qk:t.ock+1,qn:4,clear:1}))}delete t.store.ocid;break;case"oci":t.oc&&t.oc.n&&sys.quizAI.allowImages.oc&&xSend({s:"AI.iSearch",d:"pg="+t.oc.oidx+"&q="+encodeURIComponent(t.oc.n),wait:0,oc:t.oc,img:t.ocP,cb:function(n,t){/http/i.test(n)&&(t.oc.pic=n,t.img.style.backgroundSize="cover",t.img.style.backgroundImage="URL("+n+")")}});break;case"foc":if(!t||!t.oc)return;t.oc.stream=0;t.oc.dom&&t.oc.dom.removeAttribute("stream",1);k.update(t.oc);t.oc=0;t.store={};t.ock++;break;case"end":(t.jtype=="questions"||t.jtype=="answers")&&(this.processAct("fq"),e.stream=0,sys.quizAI.qWin.obj("quiz-maker").removeAttribute("stream"),t.stop=1,this.streamProg(2),e.changed());u&&(t.isError||t.jtype!="answers"&&t.jtype!="questions"||u.setTab("start"),u.setAct(""))}}},streamProg:function(n){var t=this.stream,i=sys.assist;if(i)switch(n){case 0:i.progStart(t.opt.qn*15e3);break;case 1:t.ctt=performance.now();t.ttt=t.ctt-t.stt;t.qtt=t.ttt/t.qk;t.ett=t.opt.qn*t.qtt;t.prog=Math.round(t.ttt*100/t.ett);t.ltt=t.ett-t.ttt;t.ltt<300&&(t.ltt=300);i.progLeft(t.ltt);break;case 2:i.progEnd()}},appendBuffer:function(n,t){if(!n)return t;if(!t)return n;var i=new Uint8Array(n.byteLength+t.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(t),n.byteLength),i.buffer},exampleQ:function(n,t){for(var u=[],f=0,e=sys.quizAI.qWin.sys.qlist,i,r=0;r<e.list.length;r++){var o=e.list[r],i=this.makeExample(o,t),s=["Single Answer","Multiple Answer","Text","","Scale"][o.qtype];i&&(t?(i.ID=u.length+1,u.push(i),f+=i.Total_Score):u.push(u.length+1+". "+i))}if(!t)return u.join("\n");if(f)for(r=0;r<u.length;r++)i=u[r],i.Total_Score&&(i.Difficulty=Math.round(i.Total_Score*100/f)+"%");return JSON.stringify({Subject:n?n:"?",Questions:u})},makeExample:function(n,t){var a=["Single Answer","Multiple Answer","Text","","Scale"][n.qtype],v=this.qWin.sys.oc,i,o,u,e,s,h,f,c,l,r;if(n.q&&a){if(!t)return n.q;for(i={ID:1,Q:n.q,Type:a},sys.quizAI.qWin.gObj.qtype!=2&&(i.Total_Score=0),i.Answers=[],r=0;r<n.opt.length;r++)if(u=n.opt[r],u.v){if(o={Answer:u.v},sys.quizAI.qWin.gObj.qtype==2){if(o.Type_Scores=[],u.score.oc)for(e=(u.score.oc+"").split(","),f=0;f<e.length;f++)e[f]&&(e[f]=e[f].split("="),c=parseInt(e[f][0]),l=parseFloat(e[f][1]),c&&l&&(h=0,s=v.find(c),s&&(h={Type_ID:parseInt(s.aiIDX?s.aiIDX:s.oidx),Type_Score:l},o.Type_Scores.push(h))))}else o.Score=u.score.y,n.qtype==1?i.Total_Score+=u.score.y:u.score.y>i.Total_Score&&(i.Total_Score=u.score.y);i.Answers.push(o)}if(n.qtype==2&&n.opt.length)for(delete i.Answers,i.Answer=n.opt[0].v,i.Variations=[],r=1;r<n.opt.length;r++)n.opt[r].v&&i.Variations.push(n.opt[r].v);return n.settings.yexp?i.Explanation=n.settings.yexp:n.settings.nexp&&(i.Explanation=n.settings.nexp),i.Difficulty="50%",i}return!1},makeTypes:function(){var t=this.qWin.sys.oc,n=t.json(0,function(n){return{Type_ID:n.aiIDX?n.aiIDX:n.oidx,Title:n.n,Description:n.d}}).list;return!n||!n.length?"":JSON.stringify(n)},wHash:function(n){return n=n.toLowerCase().replace(/[^a-z ]+/gi," ").replace(/\b(the|am|are|be|was|were|to|of|and|a|in|that|have|i|it|for|not|on|with|he|as|you|do|at|this|but|his|by|from|they|we|say|her|she|or|an|will|my|one|all|would|there|their|what|so|up|out|if|about|who|get|which|go|me|when|make|can|like|time|no|just|him|know|take|people|into|year|your|good|some|could|them|see|other|than|then|now|look|only|come|its|over|think|also|back|after|use|two|how|our|work|first|well|way|even|new|want|because|any|these|give|day|most|us|is)\b/gi," "),n=n.replace(/\b(type|your|quiz|will|click|that|from|have|this|then|with|each|right|after|also|only|they|want|their|when|need|make|into|more|just|them|where|wish|what|these|there|every|been|using|such|does|again|those|give|means)\b/gi," "),n.replace(/[\s]+/gi,"")},dupList:function(n){var u,a,e,o,t,s,h,y,c,r,i,l;for(n||(n={sysID:"qlist",list:sys.quizAI.qWin.sys.qlist,nList:["q"],idName:"rid"}),n.sysID||typeof n.list!="string"||(n.sysID=n.list,delete n.list),n.sysID&&!n.list&&(n.sysO=sys[n.sysID],n.list=n.sysO.list),n.nList||(n.nList=["q"]),typeof n.nList!="object"&&(n.nList=[n.nList]),!n.idName&&n.sysO&&(n.idName=n.sysO.idName),n.idName||(n.idName="rid"),n.dup||(n.sysO&&n.sysO.dup?n.dup=n.sysO.dup:(n.dup={},n.dup[n.idName]={})),t=0;t<n.nList.length;t++)n.dup[n.nList[t]]||(n.dup[n.nList[t]]={});for(u=n.list.list,n.o&&(u=[n.o]),a=0;a<u.length;a++)if(e=u[a],o=e[n.idName],o)for(t=0;t<n.nList.length;t++){var i=n.nList[t],r=n.dup[i],v=this.wHash(e[i]?e[i]:""),f=n.dup[n.idName][o];if(f){while(f.length)if(s=f.shift(),s&&(h=n.dup[i][s],h))
{for(y=[],c=0;c<h.length;c++)h[c]!=e[n.idName]&&nhr.push(h[c]);nhr.length?n.dup[i][s]=nhr:delete n.dup[i][s]}}else f=n.dup[n.idName][o]=[];r[v]||(r[v]=[]);r[v].push(o);f&&f.push(v)}r=n.dup[n.nList[0]];n.dup.list=[];for(i in r)r[i].length>1&&(u=r[i].concat().sort(function(n,t){return n==t?0:n<t?-1:1}),l={},l[n.idName]=u.shift(),l.alt=u,l.hash=i,n.dup.list.push(l));return n.dup}};sys.init(0,function(){sys.quizAI.init()})